2025-05-12 21:28:36.282  INFO 31100 --- [main] c.soical.server.SoicalServerApplication  : Starting SoicalServerApplication using Java 1.8.0_202 on DESKTOP-GE4J95N with PID 31100 (E:\Code\NewProject\Soical-Server\target\classes started by Administrator in E:\Code\NewProject\Soical-Server)
2025-05-12 21:28:36.296 DEBUG 31100 --- [main] c.soical.server.SoicalServerApplication  : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-12 21:28:36.297  INFO 31100 --- [main] c.soical.server.SoicalServerApplication  : The following 1 profile is active: "dev"
2025-05-12 21:28:38.369  INFO 31100 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2025-05-12 21:28:38.375  INFO 31100 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-12 21:28:38.442  INFO 31100 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 46 ms. Found 0 Redis repository interfaces.
2025-05-12 21:28:40.289  INFO 31100 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-05-12 21:28:40.303  INFO 31100 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-12 21:28:40.303  INFO 31100 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-12 21:28:40.543  INFO 31100 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-12 21:28:40.543  INFO 31100 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4163 ms
2025-05-12 21:28:40.651 DEBUG 31100 --- [main] c.s.s.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-05-12 21:28:41.381  INFO 31100 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 初始化Redis消息订阅...
2025-05-12 21:28:41.382  INFO 31100 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 启动Redis消息订阅，订阅通道模式: soical:chat:user:*
2025-05-12 21:28:41.386  INFO 31100 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已成功启动
2025-05-12 21:28:41.386  INFO 31100 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已初始化
2025-05-12 21:28:41.822 ERROR 31100 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.getMessagesBetweenUsers] is ignored, because it exists, maybe from xml file
2025-05-12 21:28:41.825 ERROR 31100 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.markConversationMessagesAsRead] is ignored, because it exists, maybe from xml file
2025-05-12 21:28:41.825 ERROR 31100 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.markAsRead] is ignored, because it exists, maybe from xml file
2025-05-12 21:28:42.219 ERROR 31100 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.incrementShareCount] is ignored, because it exists, maybe from xml file
2025-05-12 21:28:42.219 ERROR 31100 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.incrementLikeCount] is ignored, because it exists, maybe from xml file
2025-05-12 21:28:42.221 ERROR 31100 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.decrementLikeCount] is ignored, because it exists, maybe from xml file
2025-05-12 21:28:42.221 ERROR 31100 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.updateHotScore] is ignored, because it exists, maybe from xml file
2025-05-12 21:28:43.314  INFO 31100 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-12 21:28:43.509  INFO 31100 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-12 21:28:43.651 ERROR 31100 --- [main] c.s.s.config.SecuritySettingsManager     : 解析passwordStrength失败

com.fasterxml.jackson.databind.JsonMappingException: Unrecognized token 'lowercase': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"[lowercase, number]"; line: 1, column: 11] (through reference chain: java.util.ArrayList[0])
	at com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:392) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:363) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:221) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:182) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4674) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3629) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3612) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.soical.server.config.SecuritySettingsManager.loadSettingsFromDatabase(SecuritySettingsManager.java:68) [classes/:na]
	at com.soical.server.config.SecuritySettingsManager.init(SecuritySettingsManager.java:42) [classes/:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:389) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:333) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:157) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:440) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1796) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.0.jar:2.7.0]
	at com.soical.server.SoicalServerApplication.main(SoicalServerApplication.java:17) ~[classes/:na]
Caused by: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'lowercase': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"[lowercase, number]"; line: 1, column: 11]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2391) ~[jackson-core-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:745) ~[jackson-core-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:2961) ~[jackson-core-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._handleOddValue(ReaderBasedJsonParser.java:2002) ~[jackson-core-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:802) ~[jackson-core-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextTextValue(ReaderBasedJsonParser.java:1218) ~[jackson-core-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:201) ~[jackson-databind-2.13.3.jar:2.13.3]
	... 33 common frames omitted

2025-05-12 21:28:43.652  INFO 31100 --- [main] c.s.s.config.SecuritySettingsManager     : 从数据库加载了 7 条安全设置
2025-05-12 21:28:43.652  INFO 31100 --- [main] c.s.s.config.SecuritySettingsManager     : 安全设置管理器初始化完成，设置：{passwordStrength=[lowercase, number], passwordExpireDays=90, sessionTimeout=60, maxLoginAttempts=5, accountLockTime=30, passwordMinLength=8, enableCaptcha=true}
2025-05-12 21:28:56.585  INFO 31100 --- [main] com.soical.server.util.FileUtil          : 启用阿里云OSS存储服务
2025-05-12 21:28:57.153  WARN 31100 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 6f91dabd-3915-4c8b-b7df-875afb0b7592

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-05-12 21:28:57.301  INFO 31100 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7827d7b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@646cb2e, org.springframework.security.web.context.SecurityContextPersistenceFilter@75a9cc24, org.springframework.security.web.header.HeaderWriterFilter@131c0b6f, org.springframework.web.filter.CorsFilter@798256c5, org.springframework.security.web.authentication.logout.LogoutFilter@1d806de6, org.springframework.web.filter.CorsFilter@798256c5, com.soical.server.config.JwtAuthenticationFilter@3a2e9f5b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@da5d5e1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7df3da0b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2e7a9db7, org.springframework.security.web.session.SessionManagementFilter@6814262d, org.springframework.security.web.access.ExceptionTranslationFilter@25464154, org.springframework.security.web.access.intercept.AuthorizationFilter@2ec0ca83]
2025-05-12 21:28:57.350  INFO 31100 --- [main] c.soical.server.config.WebSocketConfig   : 注册WebSocket处理器: 路径=/ws/chat
2025-05-12 21:28:57.353  INFO 31100 --- [main] c.soical.server.config.WebSocketConfig   : WebSocket处理器注册完成
2025-05-12 21:28:57.389  INFO 31100 --- [main] c.soical.server.config.WebSocketConfig   : 配置WebSocket容器参数
2025-05-12 21:28:57.846  INFO 31100 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2025-05-12 21:29:00.728  INFO 31100 --- [main] c.soical.server.SoicalServerApplication  : Started SoicalServerApplication in 25.211 seconds (JVM running for 26.07)
2025-05-12 21:29:00.734  INFO 31100 --- [main] c.s.server.config.DatabaseInitializer    : 检查和修复数据库表结构...
2025-05-12 21:29:00.734  INFO 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL修复脚本...
2025-05-12 21:29:00.736  INFO 31100 --- [main] c.s.server.config.DatabaseInitializer    : 找到SQL修复脚本，开始执行...
2025-05-12 21:29:00.743 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 聊天消息表结构修复脚本
-- 创建于 2023-09-10
-- 修改聊天消息表字段名称和添加缺失字段

-- 检查并添加receiver_id字段
SET @column_exists = 0...
2025-05-12 21:29:00.751 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @column_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mess...
2025-05-12 21:29:00.752 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@column_exists = 0, 
    'ALTER TABLE t_chat_message ADD COLUMN receiver_id BIGINT NOT...
2025-05-12 21:29:00.754 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 21:29:00.755 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 21:29:00.756 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 21:29:00.769 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 更新null或0的receiver_id
UPDATE t_chat_message m 
JOIN t_conversation c ON m.conversation_id = c.conv...
2025-05-12 21:29:00.770 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并重命名type字段为message_type
SET @type_exists = 0...
2025-05-12 21:29:00.770 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @message_type_exists = 0...
2025-05-12 21:29:00.773 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @type_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_messag...
2025-05-12 21:29:00.775 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @message_type_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_cha...
2025-05-12 21:29:00.776 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@type_exists > 0 AND @message_type_exists = 0, 
    'ALTER TABLE t_chat_message CHANGE...
2025-05-12 21:29:00.776 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 21:29:00.777 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 21:29:00.777 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 21:29:00.777 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并重命名status字段为is_read
SET @status_exists = 0...
2025-05-12 21:29:00.779 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @is_read_exists = 0...
2025-05-12 21:29:00.781 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @status_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mess...
2025-05-12 21:29:00.782 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @is_read_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mes...
2025-05-12 21:29:00.783 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@status_exists > 0 AND @is_read_exists = 0, 
    'ALTER TABLE t_chat_message CHANGE CO...
2025-05-12 21:29:00.784 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 21:29:00.784 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 21:29:00.784 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 21:29:00.786 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 修复NULL值的message_type
UPDATE t_chat_message SET message_type = 1 WHERE message_type IS NULL...
2025-05-12 21:29:00.787 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 修复NULL值的is_read
UPDATE t_chat_message SET is_read = 0 WHERE is_read IS NULL...
2025-05-12 21:29:00.796 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 用户资料表结构修复脚本

-- 检查用户资料表中是否有重复用户ID
CREATE TEMPORARY TABLE IF NOT EXISTS temp_duplicate_profiles AS...
2025-05-12 21:29:00.797 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 保留最新的用户资料记录，删除旧的记录
DELETE p FROM t_user_profile p
JOIN temp_duplicate_profiles t ON p.user_id = t...
2025-05-12 21:29:00.798 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并添加t_conversation表的unread_count字段
SET @column_exists = 0...
2025-05-12 21:29:00.799 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @column_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_conversat...
2025-05-12 21:29:00.799 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@column_exists = 0, 
    'ALTER TABLE t_conversation ADD COLUMN unread_count INT DEFAU...
2025-05-12 21:29:00.800 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 21:29:00.800 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 21:29:00.801 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 21:29:00.803 DEBUG 31100 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 更新会话表的未读消息数量
UPDATE t_conversation c
SET c.unread_count = (
    SELECT COUNT(*) FROM t_chat_messa...
2025-05-12 21:29:00.803  INFO 31100 --- [main] c.s.server.config.DatabaseInitializer    : SQL修复脚本执行完成，共执行 34 条SQL语句
2025-05-12 21:29:00.803  INFO 31100 --- [main] c.s.server.config.DatabaseInitializer    : 检查t_chat_message表结构...
2025-05-12 21:29:00.827  INFO 31100 --- [main] c.s.server.config.DatabaseInitializer    : 列已存在: t_chat_message.receiver_id
2025-05-12 21:29:00.834  INFO 31100 --- [main] c.s.server.config.DatabaseInitializer    : t_chat_message表结构检查完成
2025-05-12 21:29:00.835  INFO 31100 --- [main] c.s.server.config.DatabaseInitializer    : 检查用户资料表中是否有重复用户ID...
2025-05-12 21:29:00.836  INFO 31100 --- [main] c.s.server.config.DatabaseInitializer    : 用户资料表中没有重复的用户ID
2025-05-12 21:29:00.836  INFO 31100 --- [main] c.s.server.config.DatabaseInitializer    : 数据库初始化完成
2025-05-12 21:29:00.836  INFO 31100 --- [main] c.s.s.c.RedisSubscriptionInitializer     : 应用启动，初始化Redis消息订阅...
2025-05-12 21:29:00.836  INFO 31100 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 启动Redis消息订阅，订阅通道模式: soical:chat:user:*
2025-05-12 21:29:00.839  INFO 31100 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已成功启动
2025-05-12 21:29:00.839  INFO 31100 --- [main] c.s.s.c.RedisSubscriptionInitializer     : Redis消息订阅初始化完成
2025-05-12 21:29:00.847 DEBUG 31100 --- [main] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserProfileServiceImpl.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 21:29:00.847 DEBUG 31100 --- [main] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@411756754 wrapping com.mysql.cj.jdbc.ConnectionImpl@57c69937] for JDBC transaction
2025-05-12 21:29:00.851 DEBUG 31100 --- [main] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@411756754 wrapping com.mysql.cj.jdbc.ConnectionImpl@57c69937] to manual commit
2025-05-12 21:29:00.864  INFO 31100 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 开始检查并创建缺失的用户资料...
2025-05-12 21:29:00.898  INFO 31100 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 所有用户都已有资料
2025-05-12 21:29:00.898  INFO 31100 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 用户资料检查完成
2025-05-12 21:29:00.899 DEBUG 31100 --- [main] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 21:29:00.899 DEBUG 31100 --- [main] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@411756754 wrapping com.mysql.cj.jdbc.ConnectionImpl@57c69937]
2025-05-12 21:29:00.902 DEBUG 31100 --- [main] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@411756754 wrapping com.mysql.cj.jdbc.ConnectionImpl@57c69937] after transaction
2025-05-12 21:38:47.712  INFO 31100 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-12 21:38:47.713  INFO 31100 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-12 21:38:47.722  INFO 31100 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 9 ms
2025-05-12 21:38:47.787 DEBUG 31100 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/reports/reasons
2025-05-12 21:38:51.163 DEBUG 31100 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/reports/reasons
2025-05-12 21:42:04.677 DEBUG 31100 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 21:42:11.652 DEBUG 31100 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 21:42:31.779 DEBUG 31100 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 21:42:42.051 DEBUG 31100 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 21:43:35.873 DEBUG 31100 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 21:45:03.165  INFO 31100 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-12 21:45:03.177  INFO 31100 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-12 21:45:11.018  INFO 59296 --- [main] c.soical.server.SoicalServerApplication  : Starting SoicalServerApplication using Java 1.8.0_202 on DESKTOP-GE4J95N with PID 59296 (E:\Code\NewProject\Soical-Server\target\classes started by Administrator in E:\Code\NewProject\Soical-Server)
2025-05-12 21:45:11.022 DEBUG 59296 --- [main] c.soical.server.SoicalServerApplication  : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-12 21:45:11.023  INFO 59296 --- [main] c.soical.server.SoicalServerApplication  : The following 1 profile is active: "dev"
2025-05-12 21:45:12.831  INFO 59296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2025-05-12 21:45:12.840  INFO 59296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-12 21:45:12.942  INFO 59296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 66 ms. Found 0 Redis repository interfaces.
2025-05-12 21:45:14.593  INFO 59296 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-05-12 21:45:14.608  INFO 59296 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-12 21:45:14.608  INFO 59296 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-12 21:45:14.855  INFO 59296 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-12 21:45:14.855  INFO 59296 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3750 ms
2025-05-12 21:45:14.983 DEBUG 59296 --- [main] c.s.s.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-05-12 21:45:15.776  INFO 59296 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 初始化Redis消息订阅...
2025-05-12 21:45:15.776  INFO 59296 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 启动Redis消息订阅，订阅通道模式: soical:chat:user:*
2025-05-12 21:45:15.782  INFO 59296 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已成功启动
2025-05-12 21:45:15.783  INFO 59296 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已初始化
2025-05-12 21:45:16.397 ERROR 59296 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.getMessagesBetweenUsers] is ignored, because it exists, maybe from xml file
2025-05-12 21:45:16.400 ERROR 59296 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.markConversationMessagesAsRead] is ignored, because it exists, maybe from xml file
2025-05-12 21:45:16.401 ERROR 59296 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.markAsRead] is ignored, because it exists, maybe from xml file
2025-05-12 21:45:16.734 ERROR 59296 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.incrementLikeCount] is ignored, because it exists, maybe from xml file
2025-05-12 21:45:16.735 ERROR 59296 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.decrementLikeCount] is ignored, because it exists, maybe from xml file
2025-05-12 21:45:16.736 ERROR 59296 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.incrementShareCount] is ignored, because it exists, maybe from xml file
2025-05-12 21:45:16.736 ERROR 59296 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.updateHotScore] is ignored, because it exists, maybe from xml file
2025-05-12 21:45:17.806  INFO 59296 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-12 21:45:18.059  INFO 59296 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-12 21:45:18.169 ERROR 59296 --- [main] c.s.s.config.SecuritySettingsManager     : 解析passwordStrength失败

com.fasterxml.jackson.databind.JsonMappingException: Unrecognized token 'lowercase': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"[lowercase, number]"; line: 1, column: 11] (through reference chain: java.util.ArrayList[0])
	at com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:392) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:363) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:221) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:182) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4674) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3629) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3612) ~[jackson-databind-2.13.3.jar:2.13.3]
	at com.soical.server.config.SecuritySettingsManager.loadSettingsFromDatabase(SecuritySettingsManager.java:68) [classes/:na]
	at com.soical.server.config.SecuritySettingsManager.init(SecuritySettingsManager.java:42) [classes/:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:389) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:333) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:157) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:440) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1796) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) [spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.0.jar:2.7.0]
	at com.soical.server.SoicalServerApplication.main(SoicalServerApplication.java:17) ~[classes/:na]
Caused by: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'lowercase': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"[lowercase, number]"; line: 1, column: 11]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2391) ~[jackson-core-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:745) ~[jackson-core-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:2961) ~[jackson-core-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._handleOddValue(ReaderBasedJsonParser.java:2002) ~[jackson-core-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:802) ~[jackson-core-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextTextValue(ReaderBasedJsonParser.java:1218) ~[jackson-core-2.13.3.jar:2.13.3]
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:201) ~[jackson-databind-2.13.3.jar:2.13.3]
	... 33 common frames omitted

2025-05-12 21:45:18.169  INFO 59296 --- [main] c.s.s.config.SecuritySettingsManager     : 从数据库加载了 7 条安全设置
2025-05-12 21:45:18.170  INFO 59296 --- [main] c.s.s.config.SecuritySettingsManager     : 安全设置管理器初始化完成，设置：{passwordStrength=[lowercase, number], passwordExpireDays=90, sessionTimeout=60, maxLoginAttempts=5, accountLockTime=30, passwordMinLength=8, enableCaptcha=true}
2025-05-12 21:45:20.166  INFO 59296 --- [main] com.soical.server.util.FileUtil          : 启用阿里云OSS存储服务
2025-05-12 21:45:20.826  WARN 59296 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 230bf6fb-a49a-42c1-a4e6-e11acb47ca25

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-05-12 21:45:20.994  INFO 59296 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6be50b35, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ce2eaa7, org.springframework.security.web.context.SecurityContextPersistenceFilter@30fa8a6b, org.springframework.security.web.header.HeaderWriterFilter@495da9a7, org.springframework.web.filter.CorsFilter@67022ea, org.springframework.security.web.authentication.logout.LogoutFilter@6ea3a513, org.springframework.web.filter.CorsFilter@67022ea, com.soical.server.config.JwtAuthenticationFilter@57ad1178, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@342723a3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4c8d45cf, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2166c48a, org.springframework.security.web.session.SessionManagementFilter@3cb04dd, org.springframework.security.web.access.ExceptionTranslationFilter@1f48fa72, org.springframework.security.web.access.intercept.AuthorizationFilter@68d8ae27]
2025-05-12 21:45:21.043  INFO 59296 --- [main] c.soical.server.config.WebSocketConfig   : 注册WebSocket处理器: 路径=/ws/chat
2025-05-12 21:45:21.046  INFO 59296 --- [main] c.soical.server.config.WebSocketConfig   : WebSocket处理器注册完成
2025-05-12 21:45:21.078  INFO 59296 --- [main] c.soical.server.config.WebSocketConfig   : 配置WebSocket容器参数
2025-05-12 21:45:21.715  INFO 59296 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2025-05-12 21:45:24.377  INFO 59296 --- [main] c.soical.server.SoicalServerApplication  : Started SoicalServerApplication in 14.239 seconds (JVM running for 15.189)
2025-05-12 21:45:24.381  INFO 59296 --- [main] c.s.server.config.DatabaseInitializer    : 检查和修复数据库表结构...
2025-05-12 21:45:24.381  INFO 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL修复脚本...
2025-05-12 21:45:24.383  INFO 59296 --- [main] c.s.server.config.DatabaseInitializer    : 找到SQL修复脚本，开始执行...
2025-05-12 21:45:24.390 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 聊天消息表结构修复脚本
-- 创建于 2023-09-10
-- 修改聊天消息表字段名称和添加缺失字段

-- 检查并添加receiver_id字段
SET @column_exists = 0...
2025-05-12 21:45:24.393 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @column_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mess...
2025-05-12 21:45:24.394 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@column_exists = 0, 
    'ALTER TABLE t_chat_message ADD COLUMN receiver_id BIGINT NOT...
2025-05-12 21:45:24.395 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 21:45:24.396 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 21:45:24.396 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 21:45:24.397 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 更新null或0的receiver_id
UPDATE t_chat_message m 
JOIN t_conversation c ON m.conversation_id = c.conv...
2025-05-12 21:45:24.398 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并重命名type字段为message_type
SET @type_exists = 0...
2025-05-12 21:45:24.398 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @message_type_exists = 0...
2025-05-12 21:45:24.399 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @type_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_messag...
2025-05-12 21:45:24.401 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @message_type_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_cha...
2025-05-12 21:45:24.401 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@type_exists > 0 AND @message_type_exists = 0, 
    'ALTER TABLE t_chat_message CHANGE...
2025-05-12 21:45:24.402 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 21:45:24.402 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 21:45:24.402 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 21:45:24.402 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并重命名status字段为is_read
SET @status_exists = 0...
2025-05-12 21:45:24.403 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @is_read_exists = 0...
2025-05-12 21:45:24.403 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @status_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mess...
2025-05-12 21:45:24.404 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @is_read_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mes...
2025-05-12 21:45:24.405 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@status_exists > 0 AND @is_read_exists = 0, 
    'ALTER TABLE t_chat_message CHANGE CO...
2025-05-12 21:45:24.405 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 21:45:24.405 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 21:45:24.405 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 21:45:24.406 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 修复NULL值的message_type
UPDATE t_chat_message SET message_type = 1 WHERE message_type IS NULL...
2025-05-12 21:45:24.406 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 修复NULL值的is_read
UPDATE t_chat_message SET is_read = 0 WHERE is_read IS NULL...
2025-05-12 21:45:24.408 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 用户资料表结构修复脚本

-- 检查用户资料表中是否有重复用户ID
CREATE TEMPORARY TABLE IF NOT EXISTS temp_duplicate_profiles AS...
2025-05-12 21:45:24.409 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 保留最新的用户资料记录，删除旧的记录
DELETE p FROM t_user_profile p
JOIN temp_duplicate_profiles t ON p.user_id = t...
2025-05-12 21:45:24.409 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并添加t_conversation表的unread_count字段
SET @column_exists = 0...
2025-05-12 21:45:24.410 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @column_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_conversat...
2025-05-12 21:45:24.410 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@column_exists = 0, 
    'ALTER TABLE t_conversation ADD COLUMN unread_count INT DEFAU...
2025-05-12 21:45:24.410 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 21:45:24.410 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 21:45:24.411 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 21:45:24.411 DEBUG 59296 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 更新会话表的未读消息数量
UPDATE t_conversation c
SET c.unread_count = (
    SELECT COUNT(*) FROM t_chat_messa...
2025-05-12 21:45:24.411  INFO 59296 --- [main] c.s.server.config.DatabaseInitializer    : SQL修复脚本执行完成，共执行 34 条SQL语句
2025-05-12 21:45:24.411  INFO 59296 --- [main] c.s.server.config.DatabaseInitializer    : 检查t_chat_message表结构...
2025-05-12 21:45:24.423  INFO 59296 --- [main] c.s.server.config.DatabaseInitializer    : 列已存在: t_chat_message.receiver_id
2025-05-12 21:45:24.427  INFO 59296 --- [main] c.s.server.config.DatabaseInitializer    : t_chat_message表结构检查完成
2025-05-12 21:45:24.427  INFO 59296 --- [main] c.s.server.config.DatabaseInitializer    : 检查用户资料表中是否有重复用户ID...
2025-05-12 21:45:24.428  INFO 59296 --- [main] c.s.server.config.DatabaseInitializer    : 用户资料表中没有重复的用户ID
2025-05-12 21:45:24.428  INFO 59296 --- [main] c.s.server.config.DatabaseInitializer    : 数据库初始化完成
2025-05-12 21:45:24.428  INFO 59296 --- [main] c.s.s.c.RedisSubscriptionInitializer     : 应用启动，初始化Redis消息订阅...
2025-05-12 21:45:24.428  INFO 59296 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 启动Redis消息订阅，订阅通道模式: soical:chat:user:*
2025-05-12 21:45:24.430  INFO 59296 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已成功启动
2025-05-12 21:45:24.430  INFO 59296 --- [main] c.s.s.c.RedisSubscriptionInitializer     : Redis消息订阅初始化完成
2025-05-12 21:45:24.437 DEBUG 59296 --- [main] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserProfileServiceImpl.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 21:45:24.437 DEBUG 59296 --- [main] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1821205386 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 21:45:24.440 DEBUG 59296 --- [main] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1821205386 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 21:45:24.450  INFO 59296 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 开始检查并创建缺失的用户资料...
2025-05-12 21:45:24.454  INFO 59296 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 所有用户都已有资料
2025-05-12 21:45:24.454  INFO 59296 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 用户资料检查完成
2025-05-12 21:45:24.455 DEBUG 59296 --- [main] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 21:45:24.456 DEBUG 59296 --- [main] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1821205386 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 21:45:24.459 DEBUG 59296 --- [main] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1821205386 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 21:45:30.928  INFO 59296 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-12 21:45:30.928  INFO 59296 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-12 21:45:30.937  INFO 59296 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 9 ms
2025-05-12 21:45:30.983 DEBUG 59296 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 21:45:56.895 DEBUG 59296 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/register
2025-05-12 21:45:56.936 DEBUG 59296 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.register]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 21:45:56.936 DEBUG 59296 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@159800166 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 21:45:56.937 DEBUG 59296 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@159800166 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 21:45:57.010 DEBUG 59296 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction rollback
2025-05-12 21:45:57.010 DEBUG 59296 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Rolling back JDBC transaction on Connection [HikariProxyConnection@159800166 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 21:45:57.010 DEBUG 59296 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@159800166 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 21:45:57.015 ERROR 59296 --- [http-nio-8080-exec-6] c.s.s.common.GlobalExceptionHandler      : 业务异常

com.soical.server.common.BusinessException: 密码必须包含小写字母
	at com.soical.server.service.impl.UserServiceImpl.validatePasswordStrength(UserServiceImpl.java:133) ~[classes/:na]
	at com.soical.server.service.impl.UserServiceImpl.register(UserServiceImpl.java:62) ~[classes/:na]
	at com.soical.server.service.impl.UserServiceImpl$$FastClassBySpringCGLIB$$b707a460.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.20.jar:5.3.20]
	at com.soical.server.service.impl.UserServiceImpl$$EnhancerBySpringCGLIB$$28c47c4b.register(<generated>) ~[classes/:na]
	at com.soical.server.controller.AuthController.register(AuthController.java:33) ~[classes/:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilterInternal(AuthorizationFilter.java:73) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at com.soical.server.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:92) [classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.lang.Thread.run(Thread.java:748) [na:1.8.0_202]

2025-05-12 21:45:57.031 DEBUG 59296 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/login
2025-05-12 21:45:57.042 DEBUG 59296 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Should roll back transaction but cannot - no transaction available
2025-05-12 21:45:57.044 ERROR 59296 --- [http-nio-8080-exec-10] c.s.s.common.GlobalExceptionHandler      : 业务异常

com.soical.server.common.BusinessException: 用户不存在
	at com.soical.server.service.impl.UserServiceImpl.login(UserServiceImpl.java:157) ~[classes/:na]
	at com.soical.server.service.impl.UserServiceImpl$$FastClassBySpringCGLIB$$b707a460.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.20.jar:5.3.20]
	at com.soical.server.service.impl.UserServiceImpl$$EnhancerBySpringCGLIB$$28c47c4b.login(<generated>) ~[classes/:na]
	at com.soical.server.controller.AuthController.login(AuthController.java:43) ~[classes/:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilterInternal(AuthorizationFilter.java:73) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at com.soical.server.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:92) [classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.lang.Thread.run(Thread.java:748) [na:1.8.0_202]

2025-05-12 21:45:57.052 DEBUG 59296 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/login
2025-05-12 21:45:57.055 DEBUG 59296 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Should roll back transaction but cannot - no transaction available
2025-05-12 21:45:57.057 ERROR 59296 --- [http-nio-8080-exec-1] c.s.s.common.GlobalExceptionHandler      : 业务异常

com.soical.server.common.BusinessException: 用户不存在
	at com.soical.server.service.impl.UserServiceImpl.login(UserServiceImpl.java:157) ~[classes/:na]
	at com.soical.server.service.impl.UserServiceImpl$$FastClassBySpringCGLIB$$b707a460.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.20.jar:5.3.20]
	at com.soical.server.service.impl.UserServiceImpl$$EnhancerBySpringCGLIB$$28c47c4b.login(<generated>) ~[classes/:na]
	at com.soical.server.controller.AuthController.login(AuthController.java:43) ~[classes/:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilterInternal(AuthorizationFilter.java:73) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at com.soical.server.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:92) [classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.lang.Thread.run(Thread.java:748) [na:1.8.0_202]

2025-05-12 21:47:57.823 DEBUG 59296 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 21:48:13.342 DEBUG 59296 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 21:48:20.927 DEBUG 59296 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 21:48:38.972 DEBUG 59296 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/register
2025-05-12 21:48:38.974 DEBUG 59296 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.register]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 21:48:38.975 DEBUG 59296 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@485276191 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 21:48:38.975 DEBUG 59296 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@485276191 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 21:48:38.984 DEBUG 59296 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction rollback
2025-05-12 21:48:38.984 DEBUG 59296 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Rolling back JDBC transaction on Connection [HikariProxyConnection@485276191 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 21:48:38.985 DEBUG 59296 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@485276191 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 21:48:38.986 ERROR 59296 --- [http-nio-8080-exec-2] c.s.s.common.GlobalExceptionHandler      : 业务异常

com.soical.server.common.BusinessException: 密码必须包含小写字母
	at com.soical.server.service.impl.UserServiceImpl.validatePasswordStrength(UserServiceImpl.java:133) ~[classes/:na]
	at com.soical.server.service.impl.UserServiceImpl.register(UserServiceImpl.java:62) ~[classes/:na]
	at com.soical.server.service.impl.UserServiceImpl$$FastClassBySpringCGLIB$$b707a460.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.20.jar:5.3.20]
	at com.soical.server.service.impl.UserServiceImpl$$EnhancerBySpringCGLIB$$28c47c4b.register(<generated>) ~[classes/:na]
	at com.soical.server.controller.AuthController.register(AuthController.java:33) ~[classes/:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilterInternal(AuthorizationFilter.java:73) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at com.soical.server.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:92) [classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.lang.Thread.run(Thread.java:748) [na:1.8.0_202]

2025-05-12 21:51:40.914  INFO 59296 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-12 21:51:40.928  INFO 59296 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-12 21:54:22.680  INFO 42564 --- [main] c.soical.server.SoicalServerApplication  : Starting SoicalServerApplication using Java 1.8.0_202 on DESKTOP-GE4J95N with PID 42564 (E:\Code\NewProject\Soical-Server\target\classes started by Administrator in E:\Code\NewProject\Soical-Server)
2025-05-12 21:54:22.684 DEBUG 42564 --- [main] c.soical.server.SoicalServerApplication  : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-12 21:54:22.684  INFO 42564 --- [main] c.soical.server.SoicalServerApplication  : The following 1 profile is active: "dev"
2025-05-12 21:54:24.315  INFO 42564 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2025-05-12 21:54:24.320  INFO 42564 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-12 21:54:24.371  INFO 42564 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 33 ms. Found 0 Redis repository interfaces.
2025-05-12 21:54:25.766  INFO 42564 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-05-12 21:54:25.779  INFO 42564 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-12 21:54:25.779  INFO 42564 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-12 21:54:25.985  INFO 42564 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-12 21:54:25.986  INFO 42564 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3143 ms
2025-05-12 21:54:26.113 DEBUG 42564 --- [main] c.s.s.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-05-12 21:54:26.698  INFO 42564 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 初始化Redis消息订阅...
2025-05-12 21:54:26.698  INFO 42564 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 启动Redis消息订阅，订阅通道模式: soical:chat:user:*
2025-05-12 21:54:26.703  INFO 42564 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已成功启动
2025-05-12 21:54:26.703  INFO 42564 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已初始化
2025-05-12 21:54:27.246 ERROR 42564 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.markConversationMessagesAsRead] is ignored, because it exists, maybe from xml file
2025-05-12 21:54:27.250 ERROR 42564 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.getMessagesBetweenUsers] is ignored, because it exists, maybe from xml file
2025-05-12 21:54:27.250 ERROR 42564 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.markAsRead] is ignored, because it exists, maybe from xml file
2025-05-12 21:54:27.618 ERROR 42564 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.incrementLikeCount] is ignored, because it exists, maybe from xml file
2025-05-12 21:54:27.619 ERROR 42564 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.decrementLikeCount] is ignored, because it exists, maybe from xml file
2025-05-12 21:54:27.619 ERROR 42564 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.incrementShareCount] is ignored, because it exists, maybe from xml file
2025-05-12 21:54:27.621 ERROR 42564 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.updateHotScore] is ignored, because it exists, maybe from xml file
2025-05-12 21:54:28.575  INFO 42564 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-12 21:54:28.763  INFO 42564 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-12 21:54:28.834  INFO 42564 --- [main] c.s.s.config.SecuritySettingsManager     : 从数据库加载了 7 条安全设置
2025-05-12 21:54:28.835  INFO 42564 --- [main] c.s.s.config.SecuritySettingsManager     : 安全设置管理器初始化完成，设置：{passwordStrength=[lowercase, number], passwordExpireDays=90, sessionTimeout=60, maxLoginAttempts=5, accountLockTime=30, passwordMinLength=8, enableCaptcha=true}
2025-05-12 21:54:30.496  INFO 42564 --- [main] com.soical.server.util.FileUtil          : 启用阿里云OSS存储服务
2025-05-12 21:54:31.419  WARN 42564 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 2af1a259-499f-4b9e-b854-10ff78039341

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-05-12 21:54:31.555  INFO 42564 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7aa15a80, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4d065e1a, org.springframework.security.web.context.SecurityContextPersistenceFilter@33a71d23, org.springframework.security.web.header.HeaderWriterFilter@60844992, org.springframework.web.filter.CorsFilter@67022ea, org.springframework.security.web.authentication.logout.LogoutFilter@22899683, org.springframework.web.filter.CorsFilter@67022ea, com.soical.server.config.JwtAuthenticationFilter@57ad1178, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@12166229, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@794d28a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7c4ca87c, org.springframework.security.web.session.SessionManagementFilter@4f6fd101, org.springframework.security.web.access.ExceptionTranslationFilter@42503099, org.springframework.security.web.access.intercept.AuthorizationFilter@5ddd84d2]
2025-05-12 21:54:31.592  INFO 42564 --- [main] c.soical.server.config.WebSocketConfig   : 注册WebSocket处理器: 路径=/ws/chat
2025-05-12 21:54:31.595  INFO 42564 --- [main] c.soical.server.config.WebSocketConfig   : WebSocket处理器注册完成
2025-05-12 21:54:31.621  INFO 42564 --- [main] c.soical.server.config.WebSocketConfig   : 配置WebSocket容器参数
2025-05-12 21:54:32.146  INFO 42564 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2025-05-12 21:54:34.838  INFO 42564 --- [main] c.soical.server.SoicalServerApplication  : Started SoicalServerApplication in 12.986 seconds (JVM running for 13.87)
2025-05-12 21:54:34.842  INFO 42564 --- [main] c.s.server.config.DatabaseInitializer    : 检查和修复数据库表结构...
2025-05-12 21:54:34.843  INFO 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL修复脚本...
2025-05-12 21:54:34.845  INFO 42564 --- [main] c.s.server.config.DatabaseInitializer    : 找到SQL修复脚本，开始执行...
2025-05-12 21:54:34.853 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 聊天消息表结构修复脚本
-- 创建于 2023-09-10
-- 修改聊天消息表字段名称和添加缺失字段

-- 检查并添加receiver_id字段
SET @column_exists = 0...
2025-05-12 21:54:34.856 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @column_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mess...
2025-05-12 21:54:34.857 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@column_exists = 0, 
    'ALTER TABLE t_chat_message ADD COLUMN receiver_id BIGINT NOT...
2025-05-12 21:54:34.858 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 21:54:34.859 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 21:54:34.859 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 21:54:34.860 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 更新null或0的receiver_id
UPDATE t_chat_message m 
JOIN t_conversation c ON m.conversation_id = c.conv...
2025-05-12 21:54:34.861 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并重命名type字段为message_type
SET @type_exists = 0...
2025-05-12 21:54:34.862 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @message_type_exists = 0...
2025-05-12 21:54:34.865 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @type_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_messag...
2025-05-12 21:54:34.866 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @message_type_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_cha...
2025-05-12 21:54:34.867 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@type_exists > 0 AND @message_type_exists = 0, 
    'ALTER TABLE t_chat_message CHANGE...
2025-05-12 21:54:34.868 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 21:54:34.868 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 21:54:34.868 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 21:54:34.868 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并重命名status字段为is_read
SET @status_exists = 0...
2025-05-12 21:54:34.869 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @is_read_exists = 0...
2025-05-12 21:54:34.870 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @status_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mess...
2025-05-12 21:54:34.871 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @is_read_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mes...
2025-05-12 21:54:34.872 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@status_exists > 0 AND @is_read_exists = 0, 
    'ALTER TABLE t_chat_message CHANGE CO...
2025-05-12 21:54:34.872 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 21:54:34.873 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 21:54:34.873 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 21:54:34.874 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 修复NULL值的message_type
UPDATE t_chat_message SET message_type = 1 WHERE message_type IS NULL...
2025-05-12 21:54:34.875 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 修复NULL值的is_read
UPDATE t_chat_message SET is_read = 0 WHERE is_read IS NULL...
2025-05-12 21:54:34.877 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 用户资料表结构修复脚本

-- 检查用户资料表中是否有重复用户ID
CREATE TEMPORARY TABLE IF NOT EXISTS temp_duplicate_profiles AS...
2025-05-12 21:54:34.879 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 保留最新的用户资料记录，删除旧的记录
DELETE p FROM t_user_profile p
JOIN temp_duplicate_profiles t ON p.user_id = t...
2025-05-12 21:54:34.879 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并添加t_conversation表的unread_count字段
SET @column_exists = 0...
2025-05-12 21:54:34.881 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @column_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_conversat...
2025-05-12 21:54:34.881 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@column_exists = 0, 
    'ALTER TABLE t_conversation ADD COLUMN unread_count INT DEFAU...
2025-05-12 21:54:34.882 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 21:54:34.882 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 21:54:34.882 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 21:54:34.883 DEBUG 42564 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 更新会话表的未读消息数量
UPDATE t_conversation c
SET c.unread_count = (
    SELECT COUNT(*) FROM t_chat_messa...
2025-05-12 21:54:34.883  INFO 42564 --- [main] c.s.server.config.DatabaseInitializer    : SQL修复脚本执行完成，共执行 34 条SQL语句
2025-05-12 21:54:34.884  INFO 42564 --- [main] c.s.server.config.DatabaseInitializer    : 检查t_chat_message表结构...
2025-05-12 21:54:34.898  INFO 42564 --- [main] c.s.server.config.DatabaseInitializer    : 列已存在: t_chat_message.receiver_id
2025-05-12 21:54:34.905  INFO 42564 --- [main] c.s.server.config.DatabaseInitializer    : t_chat_message表结构检查完成
2025-05-12 21:54:34.906  INFO 42564 --- [main] c.s.server.config.DatabaseInitializer    : 检查用户资料表中是否有重复用户ID...
2025-05-12 21:54:34.909  INFO 42564 --- [main] c.s.server.config.DatabaseInitializer    : 用户资料表中没有重复的用户ID
2025-05-12 21:54:34.909  INFO 42564 --- [main] c.s.server.config.DatabaseInitializer    : 数据库初始化完成
2025-05-12 21:54:34.909  INFO 42564 --- [main] c.s.s.c.RedisSubscriptionInitializer     : 应用启动，初始化Redis消息订阅...
2025-05-12 21:54:34.909  INFO 42564 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 启动Redis消息订阅，订阅通道模式: soical:chat:user:*
2025-05-12 21:54:34.913  INFO 42564 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已成功启动
2025-05-12 21:54:34.913  INFO 42564 --- [main] c.s.s.c.RedisSubscriptionInitializer     : Redis消息订阅初始化完成
2025-05-12 21:54:34.922 DEBUG 42564 --- [main] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserProfileServiceImpl.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 21:54:34.923 DEBUG 42564 --- [main] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1464018925 wrapping com.mysql.cj.jdbc.ConnectionImpl@685d7ba5] for JDBC transaction
2025-05-12 21:54:34.930 DEBUG 42564 --- [main] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1464018925 wrapping com.mysql.cj.jdbc.ConnectionImpl@685d7ba5] to manual commit
2025-05-12 21:54:34.944  INFO 42564 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 开始检查并创建缺失的用户资料...
2025-05-12 21:54:34.948  INFO 42564 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 所有用户都已有资料
2025-05-12 21:54:34.948  INFO 42564 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 用户资料检查完成
2025-05-12 21:54:34.950 DEBUG 42564 --- [main] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 21:54:34.950 DEBUG 42564 --- [main] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1464018925 wrapping com.mysql.cj.jdbc.ConnectionImpl@685d7ba5]
2025-05-12 21:54:34.951 DEBUG 42564 --- [main] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1464018925 wrapping com.mysql.cj.jdbc.ConnectionImpl@685d7ba5] after transaction
2025-05-12 21:55:18.738  INFO 42564 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-12 21:55:18.739  INFO 42564 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-12 21:55:18.742  INFO 42564 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-12 21:55:18.786 DEBUG 42564 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 21:55:29.779 DEBUG 42564 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/login
2025-05-12 21:55:29.926 ERROR 42564 --- [http-nio-8080-exec-3] c.s.s.common.GlobalExceptionHandler      : 业务异常

com.soical.server.common.BusinessException: 用户名或密码错误
	at com.soical.server.service.impl.AdminServiceImpl.login(AdminServiceImpl.java:39) ~[classes/:na]
	at com.soical.server.service.impl.AdminServiceImpl$$FastClassBySpringCGLIB$$13bff3b0.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.20.jar:5.3.20]
	at com.soical.server.service.impl.AdminServiceImpl$$EnhancerBySpringCGLIB$$11b17c3b.login(<generated>) ~[classes/:na]
	at com.soical.server.controller.AdminController.login(AdminController.java:54) ~[classes/:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilterInternal(AuthorizationFilter.java:73) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at com.soical.server.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:92) [classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.lang.Thread.run(Thread.java:748) [na:1.8.0_202]

2025-05-12 21:55:32.909 DEBUG 42564 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/login
2025-05-12 21:55:32.982 ERROR 42564 --- [http-nio-8080-exec-4] c.s.s.common.GlobalExceptionHandler      : 业务异常

com.soical.server.common.BusinessException: 用户名或密码错误
	at com.soical.server.service.impl.AdminServiceImpl.login(AdminServiceImpl.java:39) ~[classes/:na]
	at com.soical.server.service.impl.AdminServiceImpl$$FastClassBySpringCGLIB$$13bff3b0.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.20.jar:5.3.20]
	at com.soical.server.service.impl.AdminServiceImpl$$EnhancerBySpringCGLIB$$11b17c3b.login(<generated>) ~[classes/:na]
	at com.soical.server.controller.AdminController.login(AdminController.java:54) ~[classes/:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilterInternal(AuthorizationFilter.java:73) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at com.soical.server.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:92) [classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.lang.Thread.run(Thread.java:748) [na:1.8.0_202]

2025-05-12 21:56:14.145 DEBUG 42564 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/login
2025-05-12 21:56:14.276 DEBUG 42564 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/current
2025-05-12 21:56:14.299 DEBUG 42564 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 21:56:14.302 DEBUG 42564 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 21:56:14.905 DEBUG 42564 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/users
2025-05-12 21:56:14.905 DEBUG 42564 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/content-trend
2025-05-12 21:56:14.907 DEBUG 42564 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/user-growth
2025-05-12 21:56:14.907 DEBUG 42564 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 21:56:14.907 DEBUG 42564 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/match-trend
2025-05-12 21:56:14.907 DEBUG 42564 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/system
2025-05-12 21:56:14.907 DEBUG 42564 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/user-gender
2025-05-12 21:56:14.909 DEBUG 42564 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 21:56:14.908 DEBUG 42564 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 21:56:14.909 DEBUG 42564 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 21:56:14.909 DEBUG 42564 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 21:56:14.908 DEBUG 42564 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 21:56:14.911 DEBUG 42564 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 21:56:14.911 DEBUG 42564 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 21:56:14.912 DEBUG 42564 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 21:56:14.913 DEBUG 42564 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 21:56:14.907 DEBUG 42564 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 21:56:14.923 DEBUG 42564 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 21:56:15.087 DEBUG 42564 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/content
2025-05-12 21:56:15.090 DEBUG 42564 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 21:56:15.092 DEBUG 42564 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 21:56:15.158 DEBUG 42564 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/match-stats
2025-05-12 21:56:15.160 DEBUG 42564 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 21:56:15.162 DEBUG 42564 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 21:56:19.348 DEBUG 42564 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/current
2025-05-12 21:56:19.350 DEBUG 42564 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 21:56:19.351 DEBUG 42564 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 21:56:29.900 DEBUG 42564 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/ai-config
2025-05-12 21:56:29.900 DEBUG 42564 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 21:56:29.902 DEBUG 42564 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 21:56:29.902 DEBUG 42564 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 21:56:29.903 DEBUG 42564 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 21:56:29.903 DEBUG 42564 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 21:56:43.376 DEBUG 42564 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 21:56:43.380 DEBUG 42564 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 21:56:43.381 DEBUG 42564 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 21:56:43.384 DEBUG 42564 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.SystemSettingsServiceImpl.saveOrUpdateSettings]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 21:56:43.384 DEBUG 42564 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@70686726 wrapping com.mysql.cj.jdbc.ConnectionImpl@685d7ba5] for JDBC transaction
2025-05-12 21:56:43.385 DEBUG 42564 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@70686726 wrapping com.mysql.cj.jdbc.ConnectionImpl@685d7ba5] to manual commit
2025-05-12 21:56:43.462 DEBUG 42564 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 21:56:43.462 DEBUG 42564 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@70686726 wrapping com.mysql.cj.jdbc.ConnectionImpl@685d7ba5]
2025-05-12 21:56:43.470 DEBUG 42564 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@70686726 wrapping com.mysql.cj.jdbc.ConnectionImpl@685d7ba5] after transaction
2025-05-12 21:56:46.766 DEBUG 42564 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 21:57:06.717 DEBUG 42564 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/register
2025-05-12 21:57:06.725  INFO 42564 --- [http-nio-8080-exec-10] c.s.server.controller.AuthController     : 开始处理用户注册请求: 测试用户1234
2025-05-12 21:57:06.725 DEBUG 42564 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.register]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 21:57:06.726 DEBUG 42564 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1090626204 wrapping com.mysql.cj.jdbc.ConnectionImpl@685d7ba5] for JDBC transaction
2025-05-12 21:57:06.726 DEBUG 42564 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1090626204 wrapping com.mysql.cj.jdbc.ConnectionImpl@685d7ba5] to manual commit
2025-05-12 21:57:06.748 DEBUG 42564 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction rollback
2025-05-12 21:57:06.749 DEBUG 42564 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Rolling back JDBC transaction on Connection [HikariProxyConnection@1090626204 wrapping com.mysql.cj.jdbc.ConnectionImpl@685d7ba5]
2025-05-12 21:57:06.749 DEBUG 42564 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1090626204 wrapping com.mysql.cj.jdbc.ConnectionImpl@685d7ba5] after transaction
2025-05-12 21:57:06.753 ERROR 42564 --- [http-nio-8080-exec-10] c.s.server.controller.AuthController     : 用户注册失败: 测试用户1234, 错误: 密码长度不能少于8位

com.soical.server.common.BusinessException: 密码长度不能少于8位
	at com.soical.server.service.impl.UserServiceImpl.validatePasswordStrength(UserServiceImpl.java:93) ~[classes/:na]
	at com.soical.server.service.impl.UserServiceImpl.register(UserServiceImpl.java:62) ~[classes/:na]
	at com.soical.server.service.impl.UserServiceImpl$$FastClassBySpringCGLIB$$b707a460.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.20.jar:5.3.20]
	at com.soical.server.service.impl.UserServiceImpl$$EnhancerBySpringCGLIB$$28c47c4b.register(<generated>) ~[classes/:na]
	at com.soical.server.controller.AuthController.register(AuthController.java:37) ~[classes/:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilterInternal(AuthorizationFilter.java:73) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at com.soical.server.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:92) [classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.lang.Thread.run(Thread.java:748) [na:1.8.0_202]

2025-05-12 21:58:18.230 DEBUG 42564 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/register
2025-05-12 21:58:18.231  INFO 42564 --- [http-nio-8080-exec-8] c.s.server.controller.AuthController     : 开始处理用户注册请求: 测试用户1234
2025-05-12 21:58:18.232 DEBUG 42564 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.register]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 21:58:18.232 DEBUG 42564 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@41096350 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a78255a] for JDBC transaction
2025-05-12 21:58:18.233 DEBUG 42564 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@41096350 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a78255a] to manual commit
2025-05-12 21:58:18.240 DEBUG 42564 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction rollback
2025-05-12 21:58:18.240 DEBUG 42564 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Rolling back JDBC transaction on Connection [HikariProxyConnection@41096350 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a78255a]
2025-05-12 21:58:18.241 DEBUG 42564 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@41096350 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a78255a] after transaction
2025-05-12 21:58:18.242 ERROR 42564 --- [http-nio-8080-exec-8] c.s.server.controller.AuthController     : 用户注册失败: 测试用户1234, 错误: 密码长度不能少于8位

com.soical.server.common.BusinessException: 密码长度不能少于8位
	at com.soical.server.service.impl.UserServiceImpl.validatePasswordStrength(UserServiceImpl.java:93) ~[classes/:na]
	at com.soical.server.service.impl.UserServiceImpl.register(UserServiceImpl.java:62) ~[classes/:na]
	at com.soical.server.service.impl.UserServiceImpl$$FastClassBySpringCGLIB$$b707a460.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.20.jar:5.3.20]
	at com.soical.server.service.impl.UserServiceImpl$$EnhancerBySpringCGLIB$$28c47c4b.register(<generated>) ~[classes/:na]
	at com.soical.server.controller.AuthController.register(AuthController.java:37) ~[classes/:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilterInternal(AuthorizationFilter.java:73) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at com.soical.server.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:92) [classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.lang.Thread.run(Thread.java:748) [na:1.8.0_202]

2025-05-12 21:58:59.653 DEBUG 42564 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 22:00:02.876  INFO 42564 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-12 22:00:02.889  INFO 42564 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-12 22:00:13.145  INFO 47168 --- [main] c.soical.server.SoicalServerApplication  : Starting SoicalServerApplication using Java 1.8.0_202 on DESKTOP-GE4J95N with PID 47168 (E:\Code\NewProject\Soical-Server\target\classes started by Administrator in E:\Code\NewProject\Soical-Server)
2025-05-12 22:00:13.148 DEBUG 47168 --- [main] c.soical.server.SoicalServerApplication  : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-12 22:00:13.149  INFO 47168 --- [main] c.soical.server.SoicalServerApplication  : The following 1 profile is active: "dev"
2025-05-12 22:00:14.838  INFO 47168 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2025-05-12 22:00:14.843  INFO 47168 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-12 22:00:14.921  INFO 47168 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 49 ms. Found 0 Redis repository interfaces.
2025-05-12 22:00:16.496  INFO 47168 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-05-12 22:00:16.510  INFO 47168 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-12 22:00:16.510  INFO 47168 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-12 22:00:16.739  INFO 47168 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-12 22:00:16.740  INFO 47168 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3506 ms
2025-05-12 22:00:16.892 DEBUG 47168 --- [main] c.s.s.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-05-12 22:00:17.790  INFO 47168 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 初始化Redis消息订阅...
2025-05-12 22:00:17.791  INFO 47168 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 启动Redis消息订阅，订阅通道模式: soical:chat:user:*
2025-05-12 22:00:17.798  INFO 47168 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已成功启动
2025-05-12 22:00:17.798  INFO 47168 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已初始化
2025-05-12 22:00:18.330 ERROR 47168 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.getMessagesBetweenUsers] is ignored, because it exists, maybe from xml file
2025-05-12 22:00:18.334 ERROR 47168 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.markAsRead] is ignored, because it exists, maybe from xml file
2025-05-12 22:00:18.334 ERROR 47168 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.markConversationMessagesAsRead] is ignored, because it exists, maybe from xml file
2025-05-12 22:00:18.824 ERROR 47168 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.incrementShareCount] is ignored, because it exists, maybe from xml file
2025-05-12 22:00:18.826 ERROR 47168 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.incrementLikeCount] is ignored, because it exists, maybe from xml file
2025-05-12 22:00:18.827 ERROR 47168 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.decrementLikeCount] is ignored, because it exists, maybe from xml file
2025-05-12 22:00:18.830 ERROR 47168 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.updateHotScore] is ignored, because it exists, maybe from xml file
2025-05-12 22:00:20.097  INFO 47168 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-12 22:00:20.292  INFO 47168 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-12 22:00:20.374  INFO 47168 --- [main] c.s.s.config.SecuritySettingsManager     : 从数据库加载了 7 条安全设置
2025-05-12 22:00:20.375  INFO 47168 --- [main] c.s.s.config.SecuritySettingsManager     : 安全设置管理器初始化完成，设置：{passwordStrength=[number], passwordExpireDays=90, sessionTimeout=60, maxLoginAttempts=5, accountLockTime=30, passwordMinLength=6, enableCaptcha=true}
2025-05-12 22:00:21.984  INFO 47168 --- [main] com.soical.server.util.FileUtil          : 启用阿里云OSS存储服务
2025-05-12 22:00:22.749  WARN 47168 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 392a8418-a92a-4235-bc67-62a562977f57

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-05-12 22:00:22.887  INFO 47168 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3fd5d679, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7aa15a80, org.springframework.security.web.context.SecurityContextPersistenceFilter@106459d9, org.springframework.security.web.header.HeaderWriterFilter@39dda56f, org.springframework.web.filter.CorsFilter@7327a447, org.springframework.security.web.authentication.logout.LogoutFilter@1a3b1f7e, org.springframework.web.filter.CorsFilter@7327a447, com.soical.server.config.JwtAuthenticationFilter@479111ba, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@23c05889, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2b4829aa, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4d065e1a, org.springframework.security.web.session.SessionManagementFilter@135064ea, org.springframework.security.web.access.ExceptionTranslationFilter@61c5fd78, org.springframework.security.web.access.intercept.AuthorizationFilter@428eb3d5]
2025-05-12 22:00:22.935  INFO 47168 --- [main] c.soical.server.config.WebSocketConfig   : 注册WebSocket处理器: 路径=/ws/chat
2025-05-12 22:00:22.938  INFO 47168 --- [main] c.soical.server.config.WebSocketConfig   : WebSocket处理器注册完成
2025-05-12 22:00:22.966  INFO 47168 --- [main] c.soical.server.config.WebSocketConfig   : 配置WebSocket容器参数
2025-05-12 22:00:23.466  INFO 47168 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2025-05-12 22:00:26.210  INFO 47168 --- [main] c.soical.server.SoicalServerApplication  : Started SoicalServerApplication in 13.915 seconds (JVM running for 14.687)
2025-05-12 22:00:26.212  INFO 47168 --- [main] c.s.server.config.DatabaseInitializer    : 检查和修复数据库表结构...
2025-05-12 22:00:26.212  INFO 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL修复脚本...
2025-05-12 22:00:26.214  INFO 47168 --- [main] c.s.server.config.DatabaseInitializer    : 找到SQL修复脚本，开始执行...
2025-05-12 22:00:26.218 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 聊天消息表结构修复脚本
-- 创建于 2023-09-10
-- 修改聊天消息表字段名称和添加缺失字段

-- 检查并添加receiver_id字段
SET @column_exists = 0...
2025-05-12 22:00:26.219 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @column_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mess...
2025-05-12 22:00:26.220 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@column_exists = 0, 
    'ALTER TABLE t_chat_message ADD COLUMN receiver_id BIGINT NOT...
2025-05-12 22:00:26.220 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 22:00:26.221 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 22:00:26.221 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 22:00:26.222 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 更新null或0的receiver_id
UPDATE t_chat_message m 
JOIN t_conversation c ON m.conversation_id = c.conv...
2025-05-12 22:00:26.223 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并重命名type字段为message_type
SET @type_exists = 0...
2025-05-12 22:00:26.223 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @message_type_exists = 0...
2025-05-12 22:00:26.224 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @type_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_messag...
2025-05-12 22:00:26.226 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @message_type_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_cha...
2025-05-12 22:00:26.226 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@type_exists > 0 AND @message_type_exists = 0, 
    'ALTER TABLE t_chat_message CHANGE...
2025-05-12 22:00:26.226 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 22:00:26.226 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 22:00:26.227 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 22:00:26.227 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并重命名status字段为is_read
SET @status_exists = 0...
2025-05-12 22:00:26.227 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @is_read_exists = 0...
2025-05-12 22:00:26.228 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @status_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mess...
2025-05-12 22:00:26.229 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @is_read_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mes...
2025-05-12 22:00:26.230 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@status_exists > 0 AND @is_read_exists = 0, 
    'ALTER TABLE t_chat_message CHANGE CO...
2025-05-12 22:00:26.230 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 22:00:26.230 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 22:00:26.230 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 22:00:26.231 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 修复NULL值的message_type
UPDATE t_chat_message SET message_type = 1 WHERE message_type IS NULL...
2025-05-12 22:00:26.232 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 修复NULL值的is_read
UPDATE t_chat_message SET is_read = 0 WHERE is_read IS NULL...
2025-05-12 22:00:26.238 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 用户资料表结构修复脚本

-- 检查用户资料表中是否有重复用户ID
CREATE TEMPORARY TABLE IF NOT EXISTS temp_duplicate_profiles AS...
2025-05-12 22:00:26.239 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 保留最新的用户资料记录，删除旧的记录
DELETE p FROM t_user_profile p
JOIN temp_duplicate_profiles t ON p.user_id = t...
2025-05-12 22:00:26.239 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并添加t_conversation表的unread_count字段
SET @column_exists = 0...
2025-05-12 22:00:26.240 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @column_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_conversat...
2025-05-12 22:00:26.241 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@column_exists = 0, 
    'ALTER TABLE t_conversation ADD COLUMN unread_count INT DEFAU...
2025-05-12 22:00:26.241 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 22:00:26.241 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 22:00:26.241 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 22:00:26.242 DEBUG 47168 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 更新会话表的未读消息数量
UPDATE t_conversation c
SET c.unread_count = (
    SELECT COUNT(*) FROM t_chat_messa...
2025-05-12 22:00:26.242  INFO 47168 --- [main] c.s.server.config.DatabaseInitializer    : SQL修复脚本执行完成，共执行 34 条SQL语句
2025-05-12 22:00:26.242  INFO 47168 --- [main] c.s.server.config.DatabaseInitializer    : 检查t_chat_message表结构...
2025-05-12 22:00:26.254  INFO 47168 --- [main] c.s.server.config.DatabaseInitializer    : 列已存在: t_chat_message.receiver_id
2025-05-12 22:00:26.260  INFO 47168 --- [main] c.s.server.config.DatabaseInitializer    : t_chat_message表结构检查完成
2025-05-12 22:00:26.260  INFO 47168 --- [main] c.s.server.config.DatabaseInitializer    : 检查用户资料表中是否有重复用户ID...
2025-05-12 22:00:26.261  INFO 47168 --- [main] c.s.server.config.DatabaseInitializer    : 用户资料表中没有重复的用户ID
2025-05-12 22:00:26.262  INFO 47168 --- [main] c.s.server.config.DatabaseInitializer    : 数据库初始化完成
2025-05-12 22:00:26.262  INFO 47168 --- [main] c.s.s.c.RedisSubscriptionInitializer     : 应用启动，初始化Redis消息订阅...
2025-05-12 22:00:26.262  INFO 47168 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 启动Redis消息订阅，订阅通道模式: soical:chat:user:*
2025-05-12 22:00:26.264  INFO 47168 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已成功启动
2025-05-12 22:00:26.265  INFO 47168 --- [main] c.s.s.c.RedisSubscriptionInitializer     : Redis消息订阅初始化完成
2025-05-12 22:00:26.273 DEBUG 47168 --- [main] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserProfileServiceImpl.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:00:26.273 DEBUG 47168 --- [main] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1464018925 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:00:26.275 DEBUG 47168 --- [main] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1464018925 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:00:26.288  INFO 47168 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 开始检查并创建缺失的用户资料...
2025-05-12 22:00:26.292  INFO 47168 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 所有用户都已有资料
2025-05-12 22:00:26.293  INFO 47168 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 用户资料检查完成
2025-05-12 22:00:26.294 DEBUG 47168 --- [main] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:00:26.294 DEBUG 47168 --- [main] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1464018925 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:00:26.295 DEBUG 47168 --- [main] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1464018925 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:00:41.110  INFO 47168 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-12 22:00:41.110  INFO 47168 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-12 22:00:41.114  INFO 47168 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2025-05-12 22:00:41.166 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 22:00:57.561 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/register
2025-05-12 22:00:57.624  INFO 47168 --- [http-nio-8080-exec-3] c.s.server.controller.AuthController     : 开始处理用户注册请求: 测试用户1234
2025-05-12 22:00:57.625 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.register]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:00:57.625 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1708986106 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:00:57.626 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1708986106 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:00:57.783 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:00:57.783 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1708986106 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:00:57.786 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1708986106 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:00:57.787  INFO 47168 --- [http-nio-8080-exec-3] c.s.server.controller.AuthController     : 用户注册成功: 测试用户1234, userId: 56
2025-05-12 22:00:57.803 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/login
2025-05-12 22:00:57.806  INFO 47168 --- [http-nio-8080-exec-1] c.s.server.controller.AuthController     : 开始处理用户登录请求: 测试用户1234
2025-05-12 22:00:57.992  INFO 47168 --- [http-nio-8080-exec-1] c.s.server.controller.AuthController     : 用户登录成功: 测试用户1234
2025-05-12 22:00:58.007 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:00:58.030 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:00:58.031 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:00:58.032 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:00:58.033 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1741663244 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:00:58.033 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1741663244 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:00:58.035 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:00:58.035 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1741663244 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:00:58.036 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1741663244 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:00:58.053 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/basic
2025-05-12 22:00:58.057 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:00:58.058 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:00:58.062 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.updateUserBasicInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-12 22:00:58.062 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@200842825 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:00:58.062 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@200842825 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:00:58.066 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:00:58.068 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:00:58.069 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:00:58.078 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:00:58.091 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:00:58.092 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@200842825 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:00:58.094 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@200842825 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:00:58.102 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:00:58.109  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56, Path=/ws/chat
2025-05-12 22:00:58.109  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56
2025-05-12 22:00:58.109 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ
2025-05-12 22:00:58.109 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 56
2025-05-12 22:00:58.109  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=56, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ}
2025-05-12 22:00:58.110  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=56
2025-05-12 22:00:58.110  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:00:58.110  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 56
2025-05-12 22:00:58.110 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:00:58.111 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747663257, userId=56}
2025-05-12 22:00:58.111 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 56
2025-05-12 22:00:58.111 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 56
2025-05-12 22:00:58.111  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 56
2025-05-12 22:00:58.112 ERROR 47168 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:00:58.113  WARN 47168 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:00:58.117  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 56
2025-05-12 22:00:58.186  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: 67800eed-5092-d110-6dcb-b47fe4ebd077, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56
2025-05-12 22:00:58.186  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 56
2025-05-12 22:00:58.186  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已建立
2025-05-12 22:00:58.186  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 已注册WebSocket会话: 67800eed-5092-d110-6dcb-b47fe4ebd077
2025-05-12 22:00:58.191  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ","userId":56}
2025-05-12 22:00:58.193  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:00:58.194 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:00:58.551 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:00:58.555 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:00:58.556 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:00:58.557  INFO 47168 --- [http-nio-8080-exec-3] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:00:58.816 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:00:58.819 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:00:58.821 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:15.323  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已关闭: CloseStatus[code=1001, reason=null]
2025-05-12 22:01:15.555 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:01:15.557 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:15.558 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:15.558 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:01:15.559 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@2076919386 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:01:15.559 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@2076919386 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:01:15.563 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:01:15.563 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@2076919386 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:01:15.564 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@2076919386 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:01:15.641 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:01:15.643 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:15.644 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:15.774 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:01:15.776 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:15.787 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:15.794  INFO 47168 --- [http-nio-8080-exec-9] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:01:16.030 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:01:16.035 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:16.037 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:16.038  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 会话已断开或状态超时，清除过期的在线状态
2025-05-12 22:01:20.580 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:01:20.580 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:01:20.584 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:20.585 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:20.587 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:20.589 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:20.591 DEBUG 47168 --- [http-nio-8080-exec-4] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:01:20.591 DEBUG 47168 --- [http-nio-8080-exec-4] com.soical.server.util.UserUtils         : principal是Long类型: 56
2025-05-12 22:01:20.602  INFO 47168 --- [http-nio-8080-exec-4] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 56
2025-05-12 22:01:20.610  INFO 47168 --- [http-nio-8080-exec-4] c.s.s.s.impl.ConversationServiceImpl     : 用户 56 没有会话
2025-05-12 22:01:20.633 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:01:20.637  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56, Path=/ws/chat
2025-05-12 22:01:20.637  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56
2025-05-12 22:01:20.637 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ
2025-05-12 22:01:20.637 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 56
2025-05-12 22:01:20.637  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=56, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ}
2025-05-12 22:01:20.637  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=56
2025-05-12 22:01:20.637  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:01:20.637  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 56
2025-05-12 22:01:20.637 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:01:20.639 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747663257, userId=56}
2025-05-12 22:01:20.639 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 56
2025-05-12 22:01:20.639 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 56
2025-05-12 22:01:20.639  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 56
2025-05-12 22:01:20.640 ERROR 47168 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:01:20.640  WARN 47168 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:01:20.644  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 56
2025-05-12 22:01:20.646  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: 86f2b333-9b46-1967-e54f-7d589d834c7c, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56
2025-05-12 22:01:20.646  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 56
2025-05-12 22:01:20.646  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已建立
2025-05-12 22:01:20.646  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 已注册WebSocket会话: 86f2b333-9b46-1967-e54f-7d589d834c7c
2025-05-12 22:01:20.649  INFO 47168 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ","userId":56}
2025-05-12 22:01:20.649  INFO 47168 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:01:20.649 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:01:22.933 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/reports/reasons
2025-05-12 22:01:22.933 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/list/community
2025-05-12 22:01:22.934 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:22.935 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:22.935 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:22.936 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:22.940 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getCommunityPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:01:22.941 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1065245450 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:01:22.941 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1065245450 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:01:23.011 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.022 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.028 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.035 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.043 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.049 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.058 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.065 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.073 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.079 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.085 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.090 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.095 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.104 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.120 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.126 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.129 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.131 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.136 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.139 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.141 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.143 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.146 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.149 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.152 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.155 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:01:23.158 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:01:23.158 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1065245450 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:01:23.161 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1065245450 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:01:24.479 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:01:24.482 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:24.484 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:24.518 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:01:24.522 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:24.524 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:24.525 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:01:24.525 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1317090939 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:01:24.525 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1317090939 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:01:24.527 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:01:24.528 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1317090939 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:01:24.529 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1317090939 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:01:24.539 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:01:24.541 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:01:24.541 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:24.542 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:24.543 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:24.543 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:24.564 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:01:24.567 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:24.568 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:24.587 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:01:24.589 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:24.591 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:24.592 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:01:24.592 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1808199633 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:01:24.593 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1808199633 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:01:24.597 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:01:24.597 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1808199633 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:01:24.597 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1808199633 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:01:24.598 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:01:24.598 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1558672294 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:01:24.599 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1558672294 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:01:24.615 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:01:24.616 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1558672294 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:01:24.617 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1558672294 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:01:24.617 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:01:24.617 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@829651226 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:01:24.618 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@829651226 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:01:24.620 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:01:24.621 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@829651226 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:01:24.622 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@829651226 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:01:24.641 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:01:24.643 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:24.644 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:29.692 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:01:29.694 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:01:29.695 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:01:51.036  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:01:51.037  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:01:51.037 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:02:21.030  INFO 47168 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:02:21.031  INFO 47168 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:02:21.031 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:02:51.023  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:02:51.024  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:02:51.025 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:03:21.035  INFO 47168 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:03:21.037  INFO 47168 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:03:21.037 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:03:51.022  INFO 47168 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:03:51.023  INFO 47168 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:03:51.024 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:04:07.963  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已关闭: CloseStatus[code=1001, reason=null]
2025-05-12 22:04:08.201 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:04:08.202 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:08.204 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:08.206 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:04:08.207 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@759354541 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:08.208 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@759354541 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:08.211 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:08.211 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@759354541 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:08.213 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@759354541 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:04:08.373 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:04:08.375 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:08.375 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:08.516 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:04:08.521 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:08.523 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:08.602 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:04:08.605 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:08.606 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:08.607 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:04:08.607 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@2074414785 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:08.608 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@2074414785 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:08.611 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:08.611 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@2074414785 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:08.613 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@2074414785 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:04:08.629 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:04:08.632 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:04:08.634 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:08.634 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:08.637 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:08.639 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:08.661 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:04:08.663 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:08.664 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:08.680 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:04:08.684 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:08.686 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:08.686 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:04:08.686 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1959174791 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:08.687 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1959174791 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:08.689 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:08.689 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1959174791 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:08.690 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1959174791 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:04:08.690 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:04:08.690 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1879950770 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:08.690 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1879950770 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:08.693 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:08.693 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1879950770 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:08.694 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1879950770 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:04:08.694 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:04:08.694 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1118345378 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:08.695 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1118345378 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:08.696 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:08.696 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1118345378 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:08.697 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1118345378 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:04:08.704 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:04:08.706 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:08.707 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:10.114 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:04:10.117 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:10.117 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:10.117  INFO 47168 --- [http-nio-8080-exec-9] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:04:10.288 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:04:10.291 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:10.291 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:10.292  INFO 47168 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 会话已断开或状态超时，清除过期的在线状态
2025-05-12 22:04:13.747 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:04:13.750 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:13.754 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:22.556 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:04:22.559 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:22.560 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:22.561 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:04:22.561 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@887292752 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:22.561 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@887292752 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:22.568 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:22.568 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@887292752 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:22.569 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@887292752 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:04:22.726 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:04:22.728 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:22.729 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:29.599 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:04:29.600 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:29.601 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:29.602 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:04:29.602 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1663994069 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:29.602 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1663994069 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:29.604 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:29.604 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1663994069 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:29.605 DEBUG 47168 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1663994069 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:04:29.716 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:04:29.718 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:29.719 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:29.784 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:04:29.785 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:29.786 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:29.786  INFO 47168 --- [http-nio-8080-exec-9] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:04:29.978 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:04:29.982 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:29.984 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:31.699 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:04:31.699 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:04:31.701 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:31.702 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:31.701 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:31.706 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:31.708 DEBUG 47168 --- [http-nio-8080-exec-3] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:04:31.708 DEBUG 47168 --- [http-nio-8080-exec-3] com.soical.server.util.UserUtils         : principal是Long类型: 56
2025-05-12 22:04:31.709  INFO 47168 --- [http-nio-8080-exec-3] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 56
2025-05-12 22:04:31.713  INFO 47168 --- [http-nio-8080-exec-3] c.s.s.s.impl.ConversationServiceImpl     : 用户 56 没有会话
2025-05-12 22:04:31.750 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:04:31.756  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56, Path=/ws/chat
2025-05-12 22:04:31.756  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56
2025-05-12 22:04:31.756 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ
2025-05-12 22:04:31.756 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 56
2025-05-12 22:04:31.757  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=56, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ}
2025-05-12 22:04:31.757  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=56
2025-05-12 22:04:31.757  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:04:31.765  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 56
2025-05-12 22:04:31.766 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:04:31.767 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747663257, userId=56}
2025-05-12 22:04:31.767 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 56
2025-05-12 22:04:31.768 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 56
2025-05-12 22:04:31.768  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 56
2025-05-12 22:04:31.770 ERROR 47168 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:04:31.771  WARN 47168 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:04:31.774  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 56
2025-05-12 22:04:31.775  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: 5fcade06-1aab-36a6-d4e2-834974a15f32, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56
2025-05-12 22:04:31.775  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 56
2025-05-12 22:04:31.775  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已建立
2025-05-12 22:04:31.775  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 已注册WebSocket会话: 5fcade06-1aab-36a6-d4e2-834974a15f32
2025-05-12 22:04:31.790  INFO 47168 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ","userId":56}
2025-05-12 22:04:31.791  INFO 47168 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:04:31.791 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:04:32.654 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:04:32.655 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:32.656 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:32.685 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:04:32.685 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:32.686 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:32.687 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:04:32.687 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@2086838463 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:32.687 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@2086838463 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:32.689 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:32.689 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@2086838463 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:32.690 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@2086838463 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:04:32.704 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:04:32.706 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:32.706 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:32.712 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:04:32.715 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:32.716 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:32.736 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:04:32.738 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:32.739 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:32.765 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:04:32.767 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:32.768 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:32.768 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:04:32.768 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1959996114 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:32.769 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1959996114 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:32.774 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:32.775 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1959996114 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:32.777 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1959996114 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:04:32.777 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:04:32.777 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1133187717 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:32.777 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1133187717 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:32.780 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:32.780 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1133187717 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:32.781 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1133187717 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:04:32.781 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:04:32.781 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@2064312004 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:32.782 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@2064312004 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:32.783 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:32.783 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@2064312004 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:32.784 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@2064312004 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:04:32.802 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:04:32.803 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:32.803 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:35.168 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:04:35.170 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:35.171 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:35.247 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/common/occupations
2025-05-12 22:04:35.249 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:35.250 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:35.252 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.CommonServiceImpl.getAllOccupations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:04:35.252 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@407146678 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:35.252 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@407146678 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:35.360 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:35.360 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@407146678 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:35.361 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@407146678 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:04:37.849 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:04:37.851 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:37.853 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:41.572 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/avatar
2025-05-12 22:04:41.574 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:41.574 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:41.641 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.updateAvatar]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-12 22:04:41.641 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1760173222 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:41.642 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1760173222 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:42.338 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:04:42.342 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:42.342 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1760173222 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:42.343 DEBUG 47168 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1760173222 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:04:42.355 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/basic
2025-05-12 22:04:42.356 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:04:42.356 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:04:42.358 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.updateUserBasicInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-12 22:04:42.358 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@702208637 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:04:42.358 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@702208637 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:04:42.366 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:04:42.373 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:04:42.373 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@702208637 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:04:42.374 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@702208637 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:05:01.794  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:05:01.794  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:05:01.794 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:05:03.589 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:05:03.592 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:03.593 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:03.598 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserProfileServiceImpl.updateUserProfile]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-12 22:05:03.598 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@442785104 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:05:03.598 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@442785104 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:05:03.605  INFO 47168 --- [http-nio-8080-exec-5] c.s.s.s.impl.UserProfileServiceImpl      : 更新现有用户资料: userId=56
2025-05-12 22:05:03.605 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.s.impl.UserProfileServiceImpl      : 更新前资料: UserProfile(profileId=42, userId=56, nickname=测试用户1234, avatar=https://image-0620.oss-cn-shenzhen.aliyuncs.com/images/2025/05/12/916a6a092ae043ce842e58400ec512ba.png, education=0, occupation=, occupationCode=null, location=, city=, cityCode=null, provinceCode=null, gender=null, birthday=null, selfIntro=null, hobbies=null, photos=null, createTime=Mon May 12 22:00:57 CST 2025, updateTime=Mon May 12 22:00:57 CST 2025)
2025-05-12 22:05:03.605 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.s.impl.UserProfileServiceImpl      : 传入DTO: UserProfileDTO(userId=56, nickname=测试用户1234, education=0, occupation=, occupationCode=null, location=null, city=北京, cityCode=北京, provinceCode=北京, gender=1, birthday=, selfIntro=, hobbies=摄影,跑步,瑜伽, avatar=https://image-0620.oss-cn-shenzhen.aliyuncs.com/images/2025/05/12/916a6a092ae043ce842e58400ec512ba.png, followerCount=null, followingCount=null, isFollowing=null)
2025-05-12 22:05:03.615  INFO 47168 --- [http-nio-8080-exec-5] c.s.s.s.impl.UserProfileServiceImpl      : 用户资料已存在，执行更新操作: userId=56, profileId=42
2025-05-12 22:05:03.619  INFO 47168 --- [http-nio-8080-exec-5] c.s.s.s.impl.UserProfileServiceImpl      : 用户资料保存结果: true
2025-05-12 22:05:03.620 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:03.620 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@442785104 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:05:03.625 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@442785104 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:05:03.640 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:05:03.641 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:03.642 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:03.642 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:03.643 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1975619457 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:05:03.643 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1975619457 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:05:03.646 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:03.646 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1975619457 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:05:03.646 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1975619457 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:05:03.673 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:05:03.674 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:03.675 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:05.178 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:05:05.180 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:05.181 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:05.196 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:05:05.197 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:05.198 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:05.198 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:05.198 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@144376964 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:05:05.199 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@144376964 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:05:05.201 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:05.202 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@144376964 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:05:05.202 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@144376964 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:05:05.216 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:05:05.217 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:05.218 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:05:05.218 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:05.218 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:05.219 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:05.234 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:05:05.236 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:05.236 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:05.250 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:05:05.251 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:05.252 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:05.253 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:05.254 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1993304560 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:05:05.254 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1993304560 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:05:05.257 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:05.257 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1993304560 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:05:05.257 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1993304560 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:05:05.257 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:05.257 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@519571737 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:05:05.257 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@519571737 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:05:05.259 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:05.259 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@519571737 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:05:05.259 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@519571737 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:05:05.259 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:05.259 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1342534222 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:05:05.260 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1342534222 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:05:05.261 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:05.262 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1342534222 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:05:05.262 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1342534222 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:05:05.267 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:05:05.268 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:05.268 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:07.445 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:05:07.445 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:05:07.447 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:07.447 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:07.448  INFO 47168 --- [http-nio-8080-exec-7] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:05:07.447 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:07.451 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:07.671 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:05:07.676 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:07.677 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:10.063 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:05:10.064 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:10.065 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:10.092 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:05:10.095 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:10.096 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:10.097 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:10.097 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@629769279 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:05:10.098 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@629769279 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:05:10.100 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:10.100 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@629769279 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:05:10.101 DEBUG 47168 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@629769279 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:05:10.125 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:05:10.127 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:10.127 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:10.128 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:05:10.129 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:10.130 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:10.153 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:05:10.154 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:10.154 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:10.168 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:05:10.169 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:10.169 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:10.169 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:10.170 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1313647335 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:05:10.170 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1313647335 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:05:10.174 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:10.174 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1313647335 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:05:10.175 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1313647335 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:05:10.175 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:10.175 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@431137483 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:05:10.176 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@431137483 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:05:10.178 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:10.178 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@431137483 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:05:10.178 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@431137483 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:05:10.179 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:10.179 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@459548437 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:05:10.179 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@459548437 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:05:10.180 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:10.180 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@459548437 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:05:10.181 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@459548437 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:05:10.187 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:05:10.187 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:10.188 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:10.296 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:05:10.298 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:10.299 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:11.012 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/reports/reasons
2025-05-12 22:05:11.013 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/list/community
2025-05-12 22:05:11.014 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:11.014 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:11.014 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:11.014 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:11.015 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getCommunityPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:11.020 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@274236896 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:05:11.024 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@274236896 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:05:11.038 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.043 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.053 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.060 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.067 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.071 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.076 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.080 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.083 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.087 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.092 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.096 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.101 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.105 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.108 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.111 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.113 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.115 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.116 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.118 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.121 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.123 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.126 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.128 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.130 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.132 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:11.133 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:11.133 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@274236896 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:05:11.134 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@274236896 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:05:13.578 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:05:13.578 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:05:13.584 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:13.584 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:13.585 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:13.585 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:13.585 DEBUG 47168 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:05:13.585 DEBUG 47168 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : principal是Long类型: 56
2025-05-12 22:05:13.594  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 56
2025-05-12 22:05:13.597  INFO 47168 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 用户 56 没有会话
2025-05-12 22:05:15.131 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/reports/reasons
2025-05-12 22:05:15.133 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:15.134 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:15.135 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/list/community
2025-05-12 22:05:15.137 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:15.138 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:15.139 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getCommunityPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:15.141 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@10302129 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:05:15.143 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@10302129 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:05:15.151 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.157 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.164 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.169 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.174 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.180 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.184 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.189 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.195 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.199 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.203 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.210 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.217 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.220 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.222 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:05:15.222 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.226 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.227 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:15.227 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:15.227 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.229 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.230 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.233 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.235 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.237 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.239 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.241 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.244 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.245 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:05:15.247 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:15.247 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@10302129 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:05:15.247 DEBUG 47168 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@10302129 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:05:17.128 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:05:17.130 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:17.130 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:17.149 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:05:17.151 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:17.152 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:17.153 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:17.153 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@979670509 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:05:17.153 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@979670509 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:05:17.155 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:17.156 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@979670509 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:05:17.156 DEBUG 47168 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@979670509 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:05:17.166 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:05:17.167 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:17.167 DEBUG 47168 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:17.168 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:05:17.168 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:17.168 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:17.181 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:05:17.182 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:17.183 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:17.195 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:05:17.196 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:17.196 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:17.196 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:17.197 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@794575 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:05:17.197 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@794575 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:05:17.199 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:17.199 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@794575 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:05:17.200 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@794575 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:05:17.200 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:17.200 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1849376438 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:05:17.201 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1849376438 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:05:17.202 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:17.203 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1849376438 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:05:17.203 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1849376438 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:05:17.204 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:17.204 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1161551451 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:05:17.205 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1161551451 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:05:17.207 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:17.207 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1161551451 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:05:17.208 DEBUG 47168 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1161551451 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:05:17.217 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:05:17.218 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:17.219 DEBUG 47168 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:19.471 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:05:19.473 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:19.473 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:22.268 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:05:22.269 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:22.269 DEBUG 47168 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:28.005  INFO 47168 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已关闭: CloseStatus[code=1001, reason=null]
2025-05-12 22:05:28.118 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:05:28.118 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:28.118 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:05:28.119 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:05:28.119 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@331849443 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:05:28.119 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@331849443 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:05:28.121 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:05:28.121 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@331849443 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:05:28.122 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@331849443 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:05:28.209 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:05:28.210 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:05:28.211 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:06:49.103 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:06:49.104 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:06:49.105 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:06:49.105 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:06:49.106 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@76179501 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:06:49.106 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@76179501 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:06:49.109 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:06:49.109 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@76179501 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:06:49.110 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@76179501 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:06:49.223 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:06:49.226 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:06:49.227 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:06:49.306 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:06:49.306 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:06:49.307 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:06:49.347 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:06:49.353 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:06:49.353 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:06:49.355 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:06:49.355 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1198691605 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:06:49.356 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1198691605 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:06:49.359 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:06:49.359 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1198691605 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:06:49.362 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1198691605 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:06:49.362 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:06:49.362 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@2020972265 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:06:49.363 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@2020972265 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:06:49.367 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:06:49.367 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@2020972265 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:06:49.368 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@2020972265 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:06:49.369 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:06:49.369 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@840249594 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:06:49.370 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@840249594 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:06:49.373 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:06:49.373 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@840249594 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:06:49.374 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@840249594 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:06:52.853 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:06:52.855 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:06:52.855 DEBUG 47168 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:06:52.857  INFO 47168 --- [http-nio-8080-exec-8] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:06:53.032 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:06:53.034 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:06:53.034 DEBUG 47168 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:06:53.035  INFO 47168 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 会话已断开或状态超时，清除过期的在线状态
2025-05-12 22:06:54.445 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:06:54.447 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:06:54.447 DEBUG 47168 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:06:54.460 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:06:54.461 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:06:54.462 DEBUG 47168 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:06:54.464 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:06:54.464 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@745173837 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:06:54.465 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@745173837 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:06:54.467 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:06:54.467 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@745173837 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:06:54.468 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@745173837 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:06:54.469 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:06:54.469 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@336316455 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:06:54.469 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@336316455 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:06:54.472 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:06:54.472 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@336316455 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:06:54.473 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@336316455 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:06:54.473 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:06:54.473 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@790749753 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] for JDBC transaction
2025-05-12 22:06:54.474 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@790749753 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] to manual commit
2025-05-12 22:06:54.476 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:06:54.476 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@790749753 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725]
2025-05-12 22:06:54.476 DEBUG 47168 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@790749753 wrapping com.mysql.cj.jdbc.ConnectionImpl@16d41725] after transaction
2025-05-12 22:07:43.908 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:07:43.910 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:07:43.910 DEBUG 47168 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:07:43.974 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:07:43.976 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:07:43.977 DEBUG 47168 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:07:43.979 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:07:43.979 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1016262674 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:07:43.980 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1016262674 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:07:43.983 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:07:43.983 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1016262674 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:07:43.984 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1016262674 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:07:43.985 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:07:43.985 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1834715208 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:07:43.986 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1834715208 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:07:43.988 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:07:43.988 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1834715208 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:07:43.989 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1834715208 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:07:43.989 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:07:43.989 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@169797019 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:07:43.989 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@169797019 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:07:43.991 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:07:43.991 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@169797019 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:07:43.991 DEBUG 47168 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@169797019 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:07:44.013 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/follow/status/11
2025-05-12 22:07:44.013 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:07:44.014 DEBUG 47168 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:07:44.016 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.isFollowing]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:07:44.017 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@331573325 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] for JDBC transaction
2025-05-12 22:07:44.018 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@331573325 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] to manual commit
2025-05-12 22:07:44.026 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:07:44.027 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@331573325 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3]
2025-05-12 22:07:44.027 DEBUG 47168 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@331573325 wrapping com.mysql.cj.jdbc.ConnectionImpl@443c18f3] after transaction
2025-05-12 22:08:28.727  INFO 47168 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-12 22:08:28.736  INFO 47168 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-12 22:10:44.995  INFO 55640 --- [main] c.soical.server.SoicalServerApplication  : Starting SoicalServerApplication using Java 1.8.0_202 on DESKTOP-GE4J95N with PID 55640 (E:\Code\NewProject\Soical-Server\target\classes started by Administrator in E:\Code\NewProject\Soical-Server)
2025-05-12 22:10:44.998 DEBUG 55640 --- [main] c.soical.server.SoicalServerApplication  : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-12 22:10:44.998  INFO 55640 --- [main] c.soical.server.SoicalServerApplication  : The following 1 profile is active: "dev"
2025-05-12 22:10:46.598  INFO 55640 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2025-05-12 22:10:46.602  INFO 55640 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-12 22:10:46.660  INFO 55640 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 39 ms. Found 0 Redis repository interfaces.
2025-05-12 22:10:48.089  INFO 55640 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-05-12 22:10:48.102  INFO 55640 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-12 22:10:48.102  INFO 55640 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-12 22:10:48.287  INFO 55640 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-12 22:10:48.287  INFO 55640 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3197 ms
2025-05-12 22:10:48.428 DEBUG 55640 --- [main] c.s.s.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-05-12 22:10:49.058  INFO 55640 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 初始化Redis消息订阅...
2025-05-12 22:10:49.058  INFO 55640 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 启动Redis消息订阅，订阅通道模式: soical:chat:user:*
2025-05-12 22:10:49.064  INFO 55640 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已成功启动
2025-05-12 22:10:49.065  INFO 55640 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已初始化
2025-05-12 22:10:49.437 ERROR 55640 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.markConversationMessagesAsRead] is ignored, because it exists, maybe from xml file
2025-05-12 22:10:49.438 ERROR 55640 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.markAsRead] is ignored, because it exists, maybe from xml file
2025-05-12 22:10:49.442 ERROR 55640 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.ChatMessageMapper.getMessagesBetweenUsers] is ignored, because it exists, maybe from xml file
2025-05-12 22:10:49.808 ERROR 55640 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.incrementLikeCount] is ignored, because it exists, maybe from xml file
2025-05-12 22:10:49.809 ERROR 55640 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.decrementLikeCount] is ignored, because it exists, maybe from xml file
2025-05-12 22:10:49.810 ERROR 55640 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.incrementShareCount] is ignored, because it exists, maybe from xml file
2025-05-12 22:10:49.811 ERROR 55640 --- [main] c.b.m.core.MybatisConfiguration          : mapper[com.soical.server.mapper.PostMapper.updateHotScore] is ignored, because it exists, maybe from xml file
2025-05-12 22:10:50.790  INFO 55640 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-12 22:10:51.069  INFO 55640 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-12 22:10:51.152  INFO 55640 --- [main] c.s.s.config.SecuritySettingsManager     : 从数据库加载了 7 条安全设置
2025-05-12 22:10:51.152  INFO 55640 --- [main] c.s.s.config.SecuritySettingsManager     : 安全设置管理器初始化完成，设置：{passwordStrength=[number], passwordExpireDays=90, sessionTimeout=60, maxLoginAttempts=5, accountLockTime=30, passwordMinLength=6, enableCaptcha=true}
2025-05-12 22:11:04.226  INFO 55640 --- [main] com.soical.server.util.FileUtil          : 启用阿里云OSS存储服务
2025-05-12 22:11:05.373  WARN 55640 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 0a279573-8243-4468-ab08-255a282fb46a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-05-12 22:11:05.592  INFO 55640 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1dbeedff, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@62b786dc, org.springframework.security.web.context.SecurityContextPersistenceFilter@2bcb1414, org.springframework.security.web.header.HeaderWriterFilter@7bdb4f17, org.springframework.web.filter.CorsFilter@67022ea, org.springframework.security.web.authentication.logout.LogoutFilter@636fccb0, org.springframework.web.filter.CorsFilter@67022ea, com.soical.server.config.JwtAuthenticationFilter@57ad1178, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2b4829aa, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@a99c42c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7ba1cdbe, org.springframework.security.web.session.SessionManagementFilter@12166229, org.springframework.security.web.access.ExceptionTranslationFilter@6df37f7a, org.springframework.security.web.access.intercept.AuthorizationFilter@7c4ca87c]
2025-05-12 22:11:05.655  INFO 55640 --- [main] c.soical.server.config.WebSocketConfig   : 注册WebSocket处理器: 路径=/ws/chat
2025-05-12 22:11:05.658  INFO 55640 --- [main] c.soical.server.config.WebSocketConfig   : WebSocket处理器注册完成
2025-05-12 22:11:05.725  INFO 55640 --- [main] c.soical.server.config.WebSocketConfig   : 配置WebSocket容器参数
2025-05-12 22:11:06.337  INFO 55640 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2025-05-12 22:11:09.625  INFO 55640 --- [main] c.soical.server.SoicalServerApplication  : Started SoicalServerApplication in 25.423 seconds (JVM running for 26.22)
2025-05-12 22:11:09.630  INFO 55640 --- [main] c.s.server.config.DatabaseInitializer    : 检查和修复数据库表结构...
2025-05-12 22:11:09.630  INFO 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL修复脚本...
2025-05-12 22:11:09.632  INFO 55640 --- [main] c.s.server.config.DatabaseInitializer    : 找到SQL修复脚本，开始执行...
2025-05-12 22:11:09.638 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 聊天消息表结构修复脚本
-- 创建于 2023-09-10
-- 修改聊天消息表字段名称和添加缺失字段

-- 检查并添加receiver_id字段
SET @column_exists = 0...
2025-05-12 22:11:09.641 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @column_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mess...
2025-05-12 22:11:09.645 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@column_exists = 0, 
    'ALTER TABLE t_chat_message ADD COLUMN receiver_id BIGINT NOT...
2025-05-12 22:11:09.645 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 22:11:09.646 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 22:11:09.647 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 22:11:09.648 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 更新null或0的receiver_id
UPDATE t_chat_message m 
JOIN t_conversation c ON m.conversation_id = c.conv...
2025-05-12 22:11:09.650 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并重命名type字段为message_type
SET @type_exists = 0...
2025-05-12 22:11:09.651 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @message_type_exists = 0...
2025-05-12 22:11:09.652 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @type_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_messag...
2025-05-12 22:11:09.654 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @message_type_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_cha...
2025-05-12 22:11:09.655 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@type_exists > 0 AND @message_type_exists = 0, 
    'ALTER TABLE t_chat_message CHANGE...
2025-05-12 22:11:09.655 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 22:11:09.656 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 22:11:09.656 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 22:11:09.658 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并重命名status字段为is_read
SET @status_exists = 0...
2025-05-12 22:11:09.659 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @is_read_exists = 0...
2025-05-12 22:11:09.661 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @status_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mess...
2025-05-12 22:11:09.663 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @is_read_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_chat_mes...
2025-05-12 22:11:09.664 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@status_exists > 0 AND @is_read_exists = 0, 
    'ALTER TABLE t_chat_message CHANGE CO...
2025-05-12 22:11:09.665 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 22:11:09.666 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 22:11:09.666 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 22:11:09.667 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 修复NULL值的message_type
UPDATE t_chat_message SET message_type = 1 WHERE message_type IS NULL...
2025-05-12 22:11:09.668 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 修复NULL值的is_read
UPDATE t_chat_message SET is_read = 0 WHERE is_read IS NULL...
2025-05-12 22:11:09.675 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 用户资料表结构修复脚本

-- 检查用户资料表中是否有重复用户ID
CREATE TEMPORARY TABLE IF NOT EXISTS temp_duplicate_profiles AS...
2025-05-12 22:11:09.677 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 保留最新的用户资料记录，删除旧的记录
DELETE p FROM t_user_profile p
JOIN temp_duplicate_profiles t ON p.user_id = t...
2025-05-12 22:11:09.677 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 检查并添加t_conversation表的unread_count字段
SET @column_exists = 0...
2025-05-12 22:11:09.679 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SELECT COUNT(*) INTO @column_exists FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 't_conversat...
2025-05-12 22:11:09.681 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: SET @sql = IF(@column_exists = 0, 
    'ALTER TABLE t_conversation ADD COLUMN unread_count INT DEFAU...
2025-05-12 22:11:09.682 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: PREPARE stmt FROM @sql...
2025-05-12 22:11:09.682 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: EXECUTE stmt...
2025-05-12 22:11:09.682 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: DEALLOCATE PREPARE stmt...
2025-05-12 22:11:09.683 DEBUG 55640 --- [main] c.s.server.config.DatabaseInitializer    : 执行SQL语句成功: -- 更新会话表的未读消息数量
UPDATE t_conversation c
SET c.unread_count = (
    SELECT COUNT(*) FROM t_chat_messa...
2025-05-12 22:11:09.684  INFO 55640 --- [main] c.s.server.config.DatabaseInitializer    : SQL修复脚本执行完成，共执行 34 条SQL语句
2025-05-12 22:11:09.684  INFO 55640 --- [main] c.s.server.config.DatabaseInitializer    : 检查t_chat_message表结构...
2025-05-12 22:11:09.698  INFO 55640 --- [main] c.s.server.config.DatabaseInitializer    : 列已存在: t_chat_message.receiver_id
2025-05-12 22:11:09.708  INFO 55640 --- [main] c.s.server.config.DatabaseInitializer    : t_chat_message表结构检查完成
2025-05-12 22:11:09.708  INFO 55640 --- [main] c.s.server.config.DatabaseInitializer    : 检查用户资料表中是否有重复用户ID...
2025-05-12 22:11:09.710  INFO 55640 --- [main] c.s.server.config.DatabaseInitializer    : 用户资料表中没有重复的用户ID
2025-05-12 22:11:09.711  INFO 55640 --- [main] c.s.server.config.DatabaseInitializer    : 数据库初始化完成
2025-05-12 22:11:09.711  INFO 55640 --- [main] c.s.s.c.RedisSubscriptionInitializer     : 应用启动，初始化Redis消息订阅...
2025-05-12 22:11:09.711  INFO 55640 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : 启动Redis消息订阅，订阅通道模式: soical:chat:user:*
2025-05-12 22:11:09.714  INFO 55640 --- [main] c.s.s.s.i.ChatMessageQueueServiceImpl    : Redis消息订阅已成功启动
2025-05-12 22:11:09.715  INFO 55640 --- [main] c.s.s.c.RedisSubscriptionInitializer     : Redis消息订阅初始化完成
2025-05-12 22:11:09.725 DEBUG 55640 --- [main] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserProfileServiceImpl.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:11:09.727 DEBUG 55640 --- [main] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1464018925 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:11:09.729 DEBUG 55640 --- [main] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1464018925 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:11:09.744  INFO 55640 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 开始检查并创建缺失的用户资料...
2025-05-12 22:11:09.750  INFO 55640 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 所有用户都已有资料
2025-05-12 22:11:09.750  INFO 55640 --- [main] c.s.s.s.impl.UserProfileServiceImpl      : 用户资料检查完成
2025-05-12 22:11:09.751 DEBUG 55640 --- [main] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:11:09.751 DEBUG 55640 --- [main] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1464018925 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:11:09.752 DEBUG 55640 --- [main] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1464018925 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:11:15.744  INFO 55640 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-12 22:11:15.752  INFO 55640 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-12 22:11:15.760  INFO 55640 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 7 ms
2025-05-12 22:11:15.868 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:11:16.044 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/api/user/current
2025-05-12 22:11:16.240 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:16.240 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:16.241 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:16.243 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:16.293  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:11:16.414 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/api/user/current
2025-05-12 22:11:16.417 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:16.424 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:16.927 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/api/user/online-status
2025-05-12 22:11:16.935 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:16.937 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:23.429 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:11:23.431 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:23.433 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:23.435 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:11:23.436 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@260953170 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:11:23.436 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@260953170 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:11:23.447 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:11:23.447 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@260953170 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:11:23.448 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@260953170 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:11:23.952 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:11:23.957 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:23.959 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:23.994 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:11:23.996 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:23.999 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:24.000 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:11:24.000 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@533077811 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:11:24.002 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@533077811 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:11:24.006 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:11:24.007 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@533077811 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:11:24.008 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@533077811 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:11:24.176 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:11:24.169 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:11:24.178 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:11:24.179 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:24.180 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:24.181 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:24.188 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:24.189 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:24.191  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:11:24.185 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:24.213  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:11:24.728 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:11:24.737 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:24.743 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:25.201 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:11:25.203 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:25.204 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:26.038 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:11:26.042  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56, Path=/ws/chat
2025-05-12 22:11:26.043  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56
2025-05-12 22:11:26.043 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ
2025-05-12 22:11:26.043 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 56
2025-05-12 22:11:26.043  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=56, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ}
2025-05-12 22:11:26.044  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=56
2025-05-12 22:11:26.044  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:11:26.044  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 56
2025-05-12 22:11:26.044 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:11:26.045 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747663257, userId=56}
2025-05-12 22:11:26.046 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 56
2025-05-12 22:11:26.046 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 56
2025-05-12 22:11:26.046  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 56
2025-05-12 22:11:26.047 ERROR 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:11:26.047  WARN 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:11:26.050  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 56
2025-05-12 22:11:26.122  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: da7dde54-31d0-a64d-6787-11f81ee05e69, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56
2025-05-12 22:11:26.123  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 56
2025-05-12 22:11:26.123  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已建立
2025-05-12 22:11:26.123  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 已注册WebSocket会话: da7dde54-31d0-a64d-6787-11f81ee05e69
2025-05-12 22:11:26.126  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ","userId":56}
2025-05-12 22:11:26.127  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:11:26.127 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:11:27.228 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:11:27.230 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:27.232 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:27.265 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:11:27.268 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:27.270 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:27.275 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:11:27.275 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@984291848 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:11:27.276 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@984291848 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:11:27.297 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:11:27.298 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@984291848 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:11:27.298 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@984291848 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:11:27.298 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:11:27.299 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@128606973 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:11:27.299 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@128606973 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:11:27.312 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:11:27.313 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@128606973 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:11:27.313 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@128606973 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:11:27.314 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:11:27.314 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1730766097 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:11:27.314 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1730766097 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:11:27.316 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:11:27.316 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1730766097 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:11:27.317 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1730766097 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:11:56.039 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:11:56.040 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:11:56.041 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:11:57.035  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:11:57.036  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:11:57.036 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:12:26.038 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:12:26.042 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:12:26.044 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:12:27.031  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:12:27.032  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:12:27.032 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:12:35.216 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:12:35.218 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:12:35.219 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:12:35.286 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:12:35.288 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:12:35.289 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:12:35.341 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:12:35.343 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:12:35.345 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:12:35.388 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:12:35.390 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:12:35.392 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:12:35.394 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:12:35.395 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1906667541 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:12:35.396 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1906667541 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:12:35.399 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:12:35.400 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1906667541 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:12:35.401 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1906667541 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:12:35.401 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:12:35.401 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@87268845 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:12:35.402 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@87268845 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:12:35.404 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:12:35.404 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@87268845 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:12:35.405 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@87268845 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:12:35.405 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:12:35.406 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@2095279100 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:12:35.406 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@2095279100 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:12:35.408 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:12:35.408 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@2095279100 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:12:35.410 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@2095279100 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:12:56.028 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:12:56.029 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:12:56.030 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:12:57.025  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:12:57.026  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:12:57.026 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:13:02.072  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已关闭: CloseStatus[code=1001, reason=null]
2025-05-12 22:13:02.606 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:13:02.608 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:13:02.609 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:13:02.610 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:13:02.610 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@351299820 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:13:02.613 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@351299820 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:13:02.616 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:13:02.616 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@351299820 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:13:02.617 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@351299820 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:13:02.681 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:13:02.683 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:13:02.684 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:13:02.685 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:13:02.687 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@852543822 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:13:02.689 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@852543822 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:13:02.692 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:13:02.692 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@852543822 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:13:02.693 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@852543822 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:13:03.012 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:13:03.013 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:13:03.014 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:13:03.051 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:13:03.053 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:13:03.054 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:13:03.230 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:13:03.231 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:13:03.232 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:13:03.233  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:13:03.500 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:13:03.506 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:13:03.507 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:13:03.508  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 会话已断开或状态超时，清除过期的在线状态
2025-05-12 22:13:03.548 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:13:03.553 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:13:03.554 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:13:03.595 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:13:03.596 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:13:03.598 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:13:03.609 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:13:03.610 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:13:03.610 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:13:03.636 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:13:03.643 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:13:03.644 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:13:03.646 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:13:03.646 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1875999478 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:13:03.647 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1875999478 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:13:03.651 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:13:03.651 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1875999478 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:13:03.652 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1875999478 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:13:03.652 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:13:03.652 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@572544817 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:13:03.652 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@572544817 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:13:03.654 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:13:03.654 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@572544817 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:13:03.666 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@572544817 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:13:03.666 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:13:03.667 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1675531715 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:13:03.667 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1675531715 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:13:03.668 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:13:03.668 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1675531715 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:13:03.669 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1675531715 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:13:34.042 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:13:34.045 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:13:34.046 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:14:04.048 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:14:04.050 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:14:04.050 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:14:15.849 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:14:15.851 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:14:15.852 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:14:15.942 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:14:15.944 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:14:15.945 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:14:15.946 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:14:15.946 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@2076420656 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:14:15.946 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@2076420656 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:14:15.954 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:14:15.954 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@2076420656 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:14:15.955 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@2076420656 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:14:15.955 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:14:15.955 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@14064908 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:14:15.955 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@14064908 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:14:15.956 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:14:15.956 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@14064908 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:14:15.959 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@14064908 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:14:15.959 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:14:15.959 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1897544801 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:14:15.959 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1897544801 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:14:15.961 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:14:15.961 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1897544801 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:14:15.961 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1897544801 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:14:17.446 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:14:17.448 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:14:17.449 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:14:17.449 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:14:17.450 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1130639292 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:14:17.450 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1130639292 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:14:17.452 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:14:17.452 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1130639292 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:14:17.452 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1130639292 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:14:17.503 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:14:17.505 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:14:17.505 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:14:17.506 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:14:17.506 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1295966301 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:14:17.506 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1295966301 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:14:17.508 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:14:17.508 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1295966301 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:14:17.509 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1295966301 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:14:17.528 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:14:17.529 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:14:17.530 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:14:17.727 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:14:17.728 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:14:17.729 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:14:17.872 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:14:17.873 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:14:17.874 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:14:18.029 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:14:18.030 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:14:18.036 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:14:18.037  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:14:18.059 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:14:18.061 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:14:18.062 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:14:18.064 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:14:18.064 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@983717729 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] for JDBC transaction
2025-05-12 22:14:18.064 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@983717729 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] to manual commit
2025-05-12 22:14:18.068 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:14:18.068 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@983717729 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac]
2025-05-12 22:14:18.068 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@983717729 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] after transaction
2025-05-12 22:14:18.069 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:14:18.069 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@494943145 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] for JDBC transaction
2025-05-12 22:14:18.069 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@494943145 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] to manual commit
2025-05-12 22:14:18.072 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:14:18.072 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@494943145 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac]
2025-05-12 22:14:18.073 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@494943145 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] after transaction
2025-05-12 22:14:18.073 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:14:18.073 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1006193310 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] for JDBC transaction
2025-05-12 22:14:18.073 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1006193310 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] to manual commit
2025-05-12 22:14:18.075 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:14:18.075 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1006193310 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac]
2025-05-12 22:14:18.075 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1006193310 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] after transaction
2025-05-12 22:14:18.277 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:14:18.278 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:14:18.279 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:14:49.035 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:14:49.036 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:14:49.037 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:15:19.048 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:15:19.051 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:15:19.052 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:15:30.880 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:15:30.882 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:15:30.883 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:15:30.919 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:15:30.921 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:15:30.922 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:15:30.939 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:15:30.940 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:15:30.940 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:15:30.953 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:15:30.954 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:15:30.956 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:15:30.958 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:15:30.958 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@517393230 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] for JDBC transaction
2025-05-12 22:15:30.958 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@517393230 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] to manual commit
2025-05-12 22:15:30.962 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:15:30.962 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@517393230 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac]
2025-05-12 22:15:30.962 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@517393230 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] after transaction
2025-05-12 22:15:30.963 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:15:30.963 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@693833011 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] for JDBC transaction
2025-05-12 22:15:30.963 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@693833011 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] to manual commit
2025-05-12 22:15:30.965 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:15:30.965 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@693833011 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac]
2025-05-12 22:15:30.965 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@693833011 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] after transaction
2025-05-12 22:15:30.965 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:15:30.965 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1375764122 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] for JDBC transaction
2025-05-12 22:15:30.966 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1375764122 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] to manual commit
2025-05-12 22:15:30.967 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:15:30.967 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1375764122 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac]
2025-05-12 22:15:30.968 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1375764122 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] after transaction
2025-05-12 22:15:49.031 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:15:49.032 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:15:49.033 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:15:50.120 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:15:50.121 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:15:50.122 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:15:50.125 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:15:50.126 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@877594402 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:15:50.126 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@877594402 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:15:50.128 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:15:50.129 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@877594402 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:15:50.131 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@877594402 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:15:50.234 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:15:50.236 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:15:50.237 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:15:50.442 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:15:50.444 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:15:50.445 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:15:50.481 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:15:50.482 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:15:50.482 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:15:50.498 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:15:50.500 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:15:50.502 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:15:50.516 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:15:50.519 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:15:50.520 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:15:50.522 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:15:50.522 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1755803375 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:15:50.522 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1755803375 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:15:50.527 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:15:50.527 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1755803375 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:15:50.527 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1755803375 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:15:50.528 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:15:50.528 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1174822236 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:15:50.528 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1174822236 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:15:50.530 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:15:50.530 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1174822236 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:15:50.531 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1174822236 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:15:50.532 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:15:50.532 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@389225613 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:15:50.532 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@389225613 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:15:50.534 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:15:50.534 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@389225613 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:15:50.535 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@389225613 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:16:19.036 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:16:19.038 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:16:19.038 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:16:42.977 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:16:42.979 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:16:42.980 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:16:43.019 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:16:43.020 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:16:43.020 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:16:43.033 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:16:43.034 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:16:43.035 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:16:43.049 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:16:43.050 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:16:43.051 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:16:43.052 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:16:43.053 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1047259906 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:16:43.053 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1047259906 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:16:43.057 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:16:43.058 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1047259906 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:16:43.059 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1047259906 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:16:43.059 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:16:43.059 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@82074212 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:16:43.060 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@82074212 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:16:43.061 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:16:43.061 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@82074212 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:16:43.062 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@82074212 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:16:43.062 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:16:43.063 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1603202836 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:16:43.064 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1603202836 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:16:43.065 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:16:43.065 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1603202836 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:16:43.066 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1603202836 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:16:43.117 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/user/11
2025-05-12 22:16:43.119 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:16:43.119 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:16:43.122 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getUserPostList]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:16:43.122 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@76467021 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:16:43.122 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@76467021 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:16:43.150 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:16:43.151 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@76467021 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:16:43.152 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@76467021 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:16:43.230 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/follow/status/11
2025-05-12 22:16:43.231 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:16:43.232 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:16:43.234 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.isFollowing]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:16:43.234 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@812250176 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:16:43.234 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@812250176 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:16:43.238 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:16:43.238 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@812250176 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:16:43.239 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@812250176 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:16:49.039 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:16:49.041 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:16:49.041 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:00.444 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:17:00.446 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:00.446 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:00.447 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:17:00.448 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@981761077 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:17:00.448 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@981761077 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:17:00.450 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:17:00.450 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@981761077 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:17:00.450 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@981761077 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:17:00.586 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:17:00.588 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:00.593 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:00.757 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:17:00.758 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:00.759 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:00.816 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:17:00.821 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:00.821 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:00.840 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:17:00.848 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:00.851 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:00.868 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:17:00.868 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:00.869 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:00.870 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:17:00.871 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1828350883 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:17:00.871 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1828350883 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:17:00.874 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:17:00.874 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1828350883 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:17:00.875 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1828350883 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:17:00.875 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:17:00.875 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1971594014 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:17:00.875 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1971594014 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:17:00.879 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:17:00.879 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1971594014 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:17:00.880 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1971594014 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:17:00.881 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:17:00.881 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1369176869 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:17:00.881 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1369176869 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:17:00.883 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:17:00.883 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1369176869 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:17:00.884 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1369176869 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:17:00.892 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/user/11
2025-05-12 22:17:00.894 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:00.896 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:00.898 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getUserPostList]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:17:00.898 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1899802564 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:17:00.935 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1899802564 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:17:00.940 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:17:00.940 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1899802564 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:17:00.940 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1899802564 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:17:00.950 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/follow/status/11
2025-05-12 22:17:00.951 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:00.951 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:00.952 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.isFollowing]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:17:00.952 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@849527298 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:17:00.953 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@849527298 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:17:00.957 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:17:00.957 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@849527298 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:17:00.958 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@849527298 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:17:07.097 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:17:07.100 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:07.101 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:07.102  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:17:07.311 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:17:07.312 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:07.313 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:09.438 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:17:09.439 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:09.440 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:09.442 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:17:09.442 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:17:09.443 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : principal是Long类型: 56
2025-05-12 22:17:09.444 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:09.445 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:09.456  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 56
2025-05-12 22:17:09.462  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 用户 56 没有会话
2025-05-12 22:17:09.485 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:17:09.487  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56, Path=/ws/chat
2025-05-12 22:17:09.487  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56
2025-05-12 22:17:09.487 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ
2025-05-12 22:17:09.487 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 56
2025-05-12 22:17:09.487  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=56, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ}
2025-05-12 22:17:09.488  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=56
2025-05-12 22:17:09.488  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:17:09.488  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 56
2025-05-12 22:17:09.488 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:17:09.488 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747663257, userId=56}
2025-05-12 22:17:09.489 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 56
2025-05-12 22:17:09.489 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 56
2025-05-12 22:17:09.489  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 56
2025-05-12 22:17:09.489 ERROR 55640 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:17:09.489  WARN 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:17:09.492  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 56
2025-05-12 22:17:09.494  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: 6f06f329-d92c-f4a9-5ba0-74ec263207d9, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ&userId=56
2025-05-12 22:17:09.494  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 56
2025-05-12 22:17:09.503  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已建立
2025-05-12 22:17:09.503  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 已注册WebSocket会话: 6f06f329-d92c-f4a9-5ba0-74ec263207d9
2025-05-12 22:17:09.503  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2MzI1NywidXNlcklkIjo1Nn0.xMMTuI6J_jmEQPi3122qiL32_N8diHkpaNfkANCN_g7iB9FmlTr4rF-4Za_PpaF2ngmP2Yi4ARCnp-emsiKrzQ","userId":56}
2025-05-12 22:17:09.504  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:17:09.504 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:17:11.169 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:17:11.171 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:11.171 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:11.201 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/ai/history
2025-05-12 22:17:11.202 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:11.202 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:12.815 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/ai/chat
2025-05-12 22:17:12.816 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:12.817 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:12.871 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.AiChatServiceImpl.sendMessage]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:17:12.871 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@437387169 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:17:12.871 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@437387169 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:17:19.038 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:17:19.041 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:19.044 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:36.398  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.client.DeepSeekApiClient      : DeepSeek API调用成功: prompt_tokens=29, completion_tokens=113, total_tokens=142
2025-05-12 22:17:36.402 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:17:36.402 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@437387169 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:17:36.408 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@437387169 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:17:40.032  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:17:40.034  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:17:40.034 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:17:49.042 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:17:49.044 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:49.044 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:58.339 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/ai/chat
2025-05-12 22:17:58.340 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:17:58.341 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:17:58.343 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.AiChatServiceImpl.sendMessage]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:17:58.343 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1610750566 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:17:58.343 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1610750566 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:18:06.658  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.client.DeepSeekApiClient      : DeepSeek API调用成功: prompt_tokens=147, completion_tokens=111, total_tokens=258
2025-05-12 22:18:06.662 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:18:06.662 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1610750566 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:18:06.668 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1610750566 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:18:10.026  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:18:10.027  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:18:10.027 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:18:40.025  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:18:40.026  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:18:40.027 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:19:04.037 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:19:04.039 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:19:04.039 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:19:10.023  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:19:10.024  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:19:10.024 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:19:40.033  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:19:40.034  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:19:40.034 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:20:04.071 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:20:04.074 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:04.075 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:10.029  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:20:10.030  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:20:10.030 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:20:34.553 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:20:34.554 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:34.556 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:36.768 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:20:36.769 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:36.770 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:36.772 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:20:36.772 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:20:36.772 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : principal是Long类型: 56
2025-05-12 22:20:36.772  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 56
2025-05-12 22:20:36.772 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:36.773 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:36.774  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 用户 56 没有会话
2025-05-12 22:20:37.039 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:20:37.041 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:37.042 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:37.043 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:20:37.043 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : principal是Long类型: 56
2025-05-12 22:20:37.043  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 56
2025-05-12 22:20:37.049  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ConversationServiceImpl     : 用户 56 没有会话
2025-05-12 22:20:38.311 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/reports/reasons
2025-05-12 22:20:38.312 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:38.313 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:38.313 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/list/community
2025-05-12 22:20:38.314 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:38.314 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:38.319 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getCommunityPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:20:38.320 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@189615845 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:20:38.320 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@189615845 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:20:38.339 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.346 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.351 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.356 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.361 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.366 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.369 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.374 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.377 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.385 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.389 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.392 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.400 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.403 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.416 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.418 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.419 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.421 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.422 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.423 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.424 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.425 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.426 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.429 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.433 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.437 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:20:38.438 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:20:38.439 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@189615845 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:20:38.439 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@189615845 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:20:39.507  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:20:39.508  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:20:39.508 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:20:39.633 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:20:39.633 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:39.634 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:39.655 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:20:39.656 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:39.657 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:39.658 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:20:39.659 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@731893202 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:20:39.659 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@731893202 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:20:39.661 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:20:39.661 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@731893202 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:20:39.664 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@731893202 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:20:39.693 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:20:39.694 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:20:39.695 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:39.695 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:39.695 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:39.695 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:39.713 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:20:39.714 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:39.714 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:39.726 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:20:39.727 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:39.727 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:39.727 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:20:39.728 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1450277027 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:20:39.728 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1450277027 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:20:39.732 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:20:39.732 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1450277027 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:20:39.733 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1450277027 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:20:39.733 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:20:39.733 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1719296041 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:20:39.733 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1719296041 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:20:39.735 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:20:39.735 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1719296041 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:20:39.736 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1719296041 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:20:39.737 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:20:39.737 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@751406375 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:20:39.737 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@751406375 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:20:39.739 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:20:39.739 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@751406375 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:20:39.740 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@751406375 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:20:39.746 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:20:39.748 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:39.749 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:43.158 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:20:43.161 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:43.161 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:44.332 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:20:44.336 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:44.337 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:44.353 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:20:44.354 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:44.354 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:44.354 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:20:44.354 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@870305049 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:20:44.355 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@870305049 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:20:44.356 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:20:44.356 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@870305049 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:20:44.357 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@870305049 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:20:44.365 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:20:44.367 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:20:44.367 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:44.367 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:44.368 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:44.368 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:44.377 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:20:44.378 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:44.378 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:44.388 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:20:44.388 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:44.389 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:44.389 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:20:44.389 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1362250358 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:20:44.390 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1362250358 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:20:44.393 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:20:44.393 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1362250358 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:20:44.394 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1362250358 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:20:44.394 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:20:44.394 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@701715213 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:20:44.394 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@701715213 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:20:44.395 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:20:44.395 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@701715213 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:20:44.395 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@701715213 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:20:44.396 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:20:44.396 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@48881926 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:20:44.396 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@48881926 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:20:44.397 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:20:44.397 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@48881926 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:20:44.398 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@48881926 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:20:44.404 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:20:44.404 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:44.404 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:44.796 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:20:44.797 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:44.798 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:49.188 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:20:49.189 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:49.190 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:49.425 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:20:49.429 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:20:49.429 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:20:53.826  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已关闭: CloseStatus[code=1000, reason=User logout]
2025-05-12 22:21:08.535 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:21:08.566 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:21:08.575 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:21:08.581 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:21:08.588 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:21:08.597 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:21:10.319 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:21:10.320 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:21:10.321 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:21:10.321 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:21:10.322  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:21:10.474 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:21:13.612 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:26:08.699 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 22:26:25.054 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/register
2025-05-12 22:26:25.069  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.AuthController     : 开始处理用户注册请求: 测试用户123456
2025-05-12 22:26:25.069 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.register]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:26:25.069 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1149886927 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] for JDBC transaction
2025-05-12 22:26:25.070 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1149886927 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] to manual commit
2025-05-12 22:26:25.190 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:26:25.190 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1149886927 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac]
2025-05-12 22:26:25.196 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1149886927 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] after transaction
2025-05-12 22:26:25.197  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.AuthController     : 用户注册成功: 测试用户123456, userId: 57
2025-05-12 22:26:25.206 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/login
2025-05-12 22:26:25.207  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.AuthController     : 开始处理用户登录请求: 测试用户123456
2025-05-12 22:26:25.309  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.AuthController     : 用户登录成功: 测试用户123456
2025-05-12 22:26:25.331 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:26:25.333 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:26:25.333 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:26:25.334 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:26:25.334 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1810676190 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:26:25.334 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1810676190 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:26:25.336 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:26:25.336 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1810676190 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:26:25.337 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1810676190 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:26:25.371 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/basic
2025-05-12 22:26:25.373 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:26:25.373 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:26:25.376 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.updateUserBasicInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-12 22:26:25.376 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@986451384 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:26:25.376 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@986451384 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:26:25.386 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:26:25.386 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:26:25.386 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:26:25.387 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:26:25.399 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:26:25.401 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@986451384 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:26:25.401 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@986451384 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:26:25.416 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:26:25.418  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg&userId=57, Path=/ws/chat
2025-05-12 22:26:25.419  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg&userId=57
2025-05-12 22:26:25.419 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg
2025-05-12 22:26:25.419 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 57
2025-05-12 22:26:25.419  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=57, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg}
2025-05-12 22:26:25.419  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=57
2025-05-12 22:26:25.419  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:26:25.419  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 57
2025-05-12 22:26:25.419 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:26:25.420 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747664785, userId=57}
2025-05-12 22:26:25.420 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 57
2025-05-12 22:26:25.420 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 57
2025-05-12 22:26:25.420  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 57
2025-05-12 22:26:25.420 ERROR 55640 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:26:25.420  WARN 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:26:25.423  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 57
2025-05-12 22:26:25.425  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: 1d7d594d-4bdb-e48a-581b-e03f4f4b1c40, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg&userId=57
2025-05-12 22:26:25.425  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 57
2025-05-12 22:26:25.425  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 用户 57 的WebSocket连接已建立
2025-05-12 22:26:25.425  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 用户 57 已注册WebSocket会话: 1d7d594d-4bdb-e48a-581b-e03f4f4b1c40
2025-05-12 22:26:25.462  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg","userId":57}
2025-05-12 22:26:25.462  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:26:25.462 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:26:25.502 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:26:25.503 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:26:25.503 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:26:25.504 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:26:25.504  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 会话已断开或状态超时，清除过期的在线状态
2025-05-12 22:26:25.504 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:26:25.505 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:26:25.506  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.controller.UserMatchController     : 用户 57 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:26:25.750 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:26:25.751 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:26:25.752 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:26:36.946 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:26:36.946 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:26:36.947 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:26:36.947 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:26:36.947 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:26:36.948 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:26:36.948 DEBUG 55640 --- [http-nio-8080-exec-4] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:26:36.959 DEBUG 55640 --- [http-nio-8080-exec-4] com.soical.server.util.UserUtils         : principal是Long类型: 57
2025-05-12 22:26:36.959  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 57
2025-05-12 22:26:36.965  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.impl.ConversationServiceImpl     : 用户 57 没有会话
2025-05-12 22:26:55.431  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:26:55.432  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:26:55.432 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:27:00.886 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:27:00.887 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:27:00.887 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:27:00.888 DEBUG 55640 --- [http-nio-8080-exec-10] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:27:00.888 DEBUG 55640 --- [http-nio-8080-exec-10] com.soical.server.util.UserUtils         : principal是Long类型: 57
2025-05-12 22:27:00.888  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 57
2025-05-12 22:27:00.890  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.impl.ConversationServiceImpl     : 用户 57 没有会话
2025-05-12 22:27:00.890 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:27:00.910 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:27:00.910 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:27:01.158 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:27:01.161 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:27:01.161 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:27:01.163 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:27:01.163 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : principal是Long类型: 57
2025-05-12 22:27:01.163  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 57
2025-05-12 22:27:01.165  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 用户 57 没有会话
2025-05-12 22:27:02.080 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:27:02.081 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:27:02.081 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:27:02.137 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:27:02.138 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:27:02.138 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:27:02.139 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:27:02.140 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1323189763 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] for JDBC transaction
2025-05-12 22:27:02.141 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1323189763 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] to manual commit
2025-05-12 22:27:02.143 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:27:02.143 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1323189763 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac]
2025-05-12 22:27:02.144 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1323189763 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] after transaction
2025-05-12 22:27:02.166 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:27:02.167 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:27:02.167 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:27:02.172 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:27:02.174 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:27:02.175 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:27:02.214 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:27:02.216 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:27:02.216 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:27:02.231 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:27:02.232 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:27:02.232 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:27:02.233 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:27:02.233 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@368429130 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:27:02.233 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@368429130 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:27:02.235 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:27:02.235 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@368429130 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:27:02.236 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@368429130 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:27:02.237 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:27:02.237 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1040521275 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:27:02.237 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1040521275 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:27:02.239 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:27:02.239 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1040521275 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:27:02.240 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1040521275 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:27:02.240 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:27:02.240 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@912808450 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:27:02.240 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@912808450 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:27:02.242 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:27:02.242 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@912808450 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:27:02.242 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@912808450 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:27:02.256 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:27:02.257 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:27:02.257 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:27:03.285 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:27:03.286 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:27:03.287 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:27:03.285 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:27:03.304 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:27:03.305 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:27:03.305 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:27:03.305 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : principal是Long类型: 57
2025-05-12 22:27:03.305  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 57
2025-05-12 22:27:03.308  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 用户 57 没有会话
2025-05-12 22:27:07.295 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:27:07.296 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:27:07.297 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:27:26.022  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:27:26.023  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:27:26.023 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:27:56.022  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:27:56.022  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:27:56.022 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:28:26.024  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:28:26.024  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:28:26.024 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:28:56.022  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:28:56.023  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:28:56.023 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:29:26.022  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:29:26.023  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:29:26.023 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:30:04.022  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:30:04.022  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:30:04.022 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:31:04.021  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:31:04.022  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:31:04.022 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:32:04.021  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:32:04.022  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:32:04.022 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:32:16.280 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:32:16.280 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:32:16.281 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:32:16.293 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/ai/history
2025-05-12 22:32:16.294 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:32:16.294 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:33:04.024  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:33:04.025  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:33:04.025 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:34:04.035  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:34:04.037  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:34:04.037 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:34:25.436  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:34:25.437  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:34:25.437 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:34:54.531  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 用户 57 的WebSocket连接已关闭: CloseStatus[code=1001, reason=null]
2025-05-12 22:34:54.803 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:34:54.805 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:54.806 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:54.809 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:34:54.809 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1014484409 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:34:54.810 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1014484409 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:34:54.819 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:34:54.819 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1014484409 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:34:54.820 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1014484409 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:34:54.927 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:34:54.929 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:54.930 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:55.014 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:34:55.016 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:55.016 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:55.039 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/ai/history
2025-05-12 22:34:55.040 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:55.041 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:56.936 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:34:56.938 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:56.942 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:56.949 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:34:56.949 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:34:56.950 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : principal是Long类型: 57
2025-05-12 22:34:56.951  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 57
2025-05-12 22:34:56.948 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:34:56.950 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:56.953 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:56.953 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:56.953 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:56.953 DEBUG 55640 --- [http-nio-8080-exec-2] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:34:56.953 DEBUG 55640 --- [http-nio-8080-exec-2] com.soical.server.util.UserUtils         : principal是Long类型: 57
2025-05-12 22:34:56.953  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 57
2025-05-12 22:34:56.956  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 用户 57 没有会话
2025-05-12 22:34:56.965  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.impl.ConversationServiceImpl     : 用户 57 没有会话
2025-05-12 22:34:56.985 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:34:56.986  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg&userId=57, Path=/ws/chat
2025-05-12 22:34:56.986  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg&userId=57
2025-05-12 22:34:56.986 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg
2025-05-12 22:34:56.986 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 57
2025-05-12 22:34:56.986  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=57, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg}
2025-05-12 22:34:56.987  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=57
2025-05-12 22:34:56.987  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:34:56.987  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 57
2025-05-12 22:34:56.987 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:34:56.987 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747664785, userId=57}
2025-05-12 22:34:56.987 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 57
2025-05-12 22:34:56.987 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 57
2025-05-12 22:34:56.987  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 57
2025-05-12 22:34:56.988 ERROR 55640 --- [http-nio-8080-exec-6] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:34:56.988  WARN 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:34:56.991  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 57
2025-05-12 22:34:56.993  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: 7bf09fff-909a-3cf7-6242-7d7f8d5ceb40, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg&userId=57
2025-05-12 22:34:56.993  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 57
2025-05-12 22:34:56.993  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 用户 57 的WebSocket连接已建立
2025-05-12 22:34:56.993  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 用户 57 已注册WebSocket会话: 7bf09fff-909a-3cf7-6242-7d7f8d5ceb40
2025-05-12 22:34:56.995  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg","userId":57}
2025-05-12 22:34:56.995  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:34:56.995 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:34:58.117 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:34:58.127 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:58.128 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:58.151 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:34:58.152 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:58.152 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:58.152 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:34:58.153 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@875820936 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] for JDBC transaction
2025-05-12 22:34:58.153 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@875820936 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] to manual commit
2025-05-12 22:34:58.156 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:34:58.156 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@875820936 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac]
2025-05-12 22:34:58.156 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@875820936 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] after transaction
2025-05-12 22:34:58.185 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:34:58.185 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:58.186 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:58.187 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:34:58.192 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:58.192 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:58.207 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:34:58.208 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:58.209 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:58.218 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:34:58.219 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:58.219 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:58.219 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:34:58.219 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1378804988 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:34:58.221 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1378804988 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:34:58.225 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:34:58.225 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1378804988 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:34:58.225 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1378804988 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:34:58.226 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:34:58.226 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1511976015 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:34:58.226 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1511976015 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:34:58.228 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:34:58.228 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1511976015 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:34:58.229 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1511976015 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:34:58.229 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:34:58.229 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1557763767 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:34:58.229 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1557763767 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:34:58.231 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:34:58.231 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1557763767 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:34:58.231 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1557763767 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:34:58.242 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:34:58.242 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:58.243 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:58.993 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:34:58.994 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:34:58.994 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:34:58.995  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.controller.UserMatchController     : 用户 57 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:35:00.493  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 用户 57 的WebSocket连接已关闭: CloseStatus[code=1001, reason=null]
2025-05-12 22:35:00.671 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:35:00.672 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:35:00.673 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:35:00.673 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:35:00.673 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@573614952 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] for JDBC transaction
2025-05-12 22:35:00.674 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@573614952 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] to manual commit
2025-05-12 22:35:00.676 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:35:00.676 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@573614952 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac]
2025-05-12 22:35:00.677 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@573614952 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] after transaction
2025-05-12 22:35:00.794 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:35:00.795 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:35:00.796 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:35:00.899 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:35:00.900 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:35:00.900 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:35:00.902  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.controller.UserMatchController     : 用户 57 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:35:27.848 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:35:27.849 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:35:27.850 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:35:27.850  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.controller.UserMatchController     : 用户 57 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:35:37.810 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:35:37.811 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:35:37.811 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:35:37.812  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.controller.UserMatchController     : 用户 57 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:35:42.424 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:35:42.427 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:35:42.436 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:35:42.437 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:35:42.437 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@678531879 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:35:42.438 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@678531879 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:35:42.439 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:35:42.440 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@678531879 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:35:42.440 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@678531879 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:35:42.583 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:35:42.583 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:35:42.584 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:35:42.718 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:35:42.719 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:35:42.719 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:35:42.720  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.controller.UserMatchController     : 用户 57 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:36:27.761 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:36:27.761 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:36:27.762 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:36:27.762  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.controller.UserMatchController     : 用户 57 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:37:00.934 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:37:00.935 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:37:00.935 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:37:00.936  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.controller.UserMatchController     : 用户 57 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:38:09.420 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:38:09.421 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:09.422 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:09.422 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:38:09.423 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@740664496 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] for JDBC transaction
2025-05-12 22:38:09.423 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@740664496 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] to manual commit
2025-05-12 22:38:09.425 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:38:09.426 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@740664496 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac]
2025-05-12 22:38:09.429 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@740664496 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] after transaction
2025-05-12 22:38:09.548 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:38:09.562 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:09.566 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:09.699 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:38:09.700 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:09.700 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:09.701  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.controller.UserMatchController     : 用户 57 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:38:09.840 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:38:09.840 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:09.841 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:09.842  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 会话已断开或状态超时，清除过期的在线状态
2025-05-12 22:38:11.854 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:38:11.854 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/dislike/11
2025-05-12 22:38:11.855 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:11.856 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:11.856 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:11.858 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:11.858  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.controller.UserMatchController     : 用户 57 不喜欢用户 11
2025-05-12 22:38:11.858 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserMatchServiceImpl.dislikeUser]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:38:11.858 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1543326199 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:38:11.859 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1543326199 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:38:11.876 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:38:11.876 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1543326199 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:38:11.878 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1543326199 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:38:11.910 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:38:11.911 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:11.911 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:13.460 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/44
2025-05-12 22:38:13.462 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:13.462 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:13.480 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:38:13.482 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:13.483 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:13.502 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:38:13.502 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:13.502 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:13.514 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/44/stats
2025-05-12 22:38:13.515 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:13.515 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:13.518 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:38:13.518 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1083254451 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:38:13.519 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1083254451 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:38:13.523 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:38:13.523 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1083254451 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:38:13.523 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1083254451 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:38:13.523 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:38:13.523 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1645946745 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:38:13.524 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1645946745 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:38:13.525 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:38:13.525 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1645946745 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:38:13.526 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1645946745 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:38:13.527 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:38:13.527 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@824126595 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:38:13.527 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@824126595 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:38:13.528 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:38:13.528 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@824126595 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:38:13.529 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@824126595 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:38:13.541 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/user/44
2025-05-12 22:38:13.542 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:13.542 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:13.543 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getUserPostList]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:38:13.543 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@445254095 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] for JDBC transaction
2025-05-12 22:38:13.544 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@445254095 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] to manual commit
2025-05-12 22:38:13.547 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:38:13.547 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@445254095 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac]
2025-05-12 22:38:13.549 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@445254095 wrapping com.mysql.cj.jdbc.ConnectionImpl@585b33ac] after transaction
2025-05-12 22:38:13.560 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/follow/status/44
2025-05-12 22:38:13.561 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:13.561 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:13.561 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.isFollowing]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:38:13.562 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@269969248 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:38:13.562 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@269969248 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:38:13.564 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:38:13.564 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@269969248 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:38:13.565 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@269969248 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:38:15.360 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:38:15.364 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:15.365 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:15.374 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:38:15.375 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:15.376 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:15.377  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.controller.UserMatchController     : 用户 57 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:38:15.482 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:38:15.483 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:15.483 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:15.638 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:38:15.639 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:15.639 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:15.639  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.controller.UserMatchController     : 用户 57 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:38:15.745 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:38:15.747 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:15.747 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:16.402 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:38:16.403 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:16.403 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:38:16.403 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:16.403 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:16.403 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:16.403 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:38:16.403 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : principal是Long类型: 57
2025-05-12 22:38:16.403  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 57
2025-05-12 22:38:16.405  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ConversationServiceImpl     : 用户 57 没有会话
2025-05-12 22:38:16.425 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:38:16.426  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg&userId=57, Path=/ws/chat
2025-05-12 22:38:16.426  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg&userId=57
2025-05-12 22:38:16.426 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg
2025-05-12 22:38:16.426 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 57
2025-05-12 22:38:16.426  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=57, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg}
2025-05-12 22:38:16.426  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=57
2025-05-12 22:38:16.426  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:38:16.426  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 57
2025-05-12 22:38:16.426 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:38:16.427 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747664785, userId=57}
2025-05-12 22:38:16.427 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 57
2025-05-12 22:38:16.427 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 57
2025-05-12 22:38:16.427  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 57
2025-05-12 22:38:16.427 ERROR 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:38:16.427  WARN 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:38:16.429  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 57
2025-05-12 22:38:16.430  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: 3277d91e-167f-976b-8899-0e68439c2a32, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg&userId=57
2025-05-12 22:38:16.431  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 57
2025-05-12 22:38:16.431  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 用户 57 的WebSocket连接已建立
2025-05-12 22:38:16.431  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 用户 57 已注册WebSocket会话: 3277d91e-167f-976b-8899-0e68439c2a32
2025-05-12 22:38:16.434  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NDc4NSwidXNlcklkIjo1N30.R5vC_-kIWS3AceKS3abKV2U6YD6INavlXF0Y70aVfadeodVK_eoS7hQ0Cc1m9onUh_YBHo4iGH0RV8g8MOanKg","userId":57}
2025-05-12 22:38:16.435  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:38:16.435 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:38:17.651 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:38:17.653 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:17.653 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:17.668 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/ai/history
2025-05-12 22:38:17.670 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:17.671 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:20.778 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/ai/chat
2025-05-12 22:38:20.779 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:20.779 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:20.780 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.AiChatServiceImpl.sendMessage]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:38:20.781 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@235614661 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:38:20.781 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@235614661 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:38:47.022  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:38:47.023  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:38:47.023 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:38:51.259  INFO 55640 --- [http-nio-8080-exec-8] c.s.server.client.DeepSeekApiClient      : DeepSeek API调用成功: prompt_tokens=30, completion_tokens=215, total_tokens=245
2025-05-12 22:38:51.261 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:38:51.261 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@235614661 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:38:51.263 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@235614661 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:38:56.072 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/ai/chat
2025-05-12 22:38:56.073 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:38:56.073 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:38:56.074 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.AiChatServiceImpl.sendMessage]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:38:56.075 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1477172998 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] for JDBC transaction
2025-05-12 22:38:56.075 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1477172998 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] to manual commit
2025-05-12 22:39:04.734  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.client.DeepSeekApiClient      : DeepSeek API调用成功: prompt_tokens=252, completion_tokens=102, total_tokens=354
2025-05-12 22:39:04.738 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:39:04.738 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1477172998 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6]
2025-05-12 22:39:04.741 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1477172998 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b6c2be6] after transaction
2025-05-12 22:39:16.437  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:39:16.438  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:39:16.438 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:39:46.437  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:39:46.438  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:39:46.438 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:40:17.020  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:40:17.021  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:40:17.021 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:40:47.021  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:40:47.022  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:40:47.022 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:41:17.020  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:41:17.020  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:41:17.021 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:42:04.071  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:42:04.071  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:42:04.071 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:43:04.022  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:43:04.022  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:43:04.022 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:44:04.023  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:44:04.024  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:44:04.024 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:44:32.750  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:44:32.751  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 设置为在线状态
2025-05-12 22:44:32.751 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户57活动状态
2025-05-12 22:44:35.139 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:44:35.140 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:44:35.141 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:44:35.141 DEBUG 55640 --- [http-nio-8080-exec-2] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:44:35.141 DEBUG 55640 --- [http-nio-8080-exec-2] com.soical.server.util.UserUtils         : principal是Long类型: 57
2025-05-12 22:44:35.141  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 57
2025-05-12 22:44:35.141 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:44:35.144 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:44:35.146 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:44:35.151  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.impl.ConversationServiceImpl     : 用户 57 没有会话
2025-05-12 22:44:35.389 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:44:35.390 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:44:35.390 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:44:35.390 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:44:35.391 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : principal是Long类型: 57
2025-05-12 22:44:35.392  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 57
2025-05-12 22:44:35.395  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 用户 57 没有会话
2025-05-12 22:44:36.394 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:44:36.395 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:44:36.395 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:44:36.407 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:44:36.408 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:44:36.408 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:44:36.409 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:44:36.409 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1786395301 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:44:36.410 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1786395301 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:44:36.412 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:44:36.412 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1786395301 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:44:36.412 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1786395301 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:44:36.427 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:44:36.427 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:44:36.428 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:44:36.428 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:44:36.428 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:44:36.428 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:44:36.445 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:44:36.447 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:44:36.449 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:44:36.465 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:44:36.466 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:44:36.466 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:44:36.467 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:44:36.467 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@875629264 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:44:36.467 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@875629264 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:44:36.469 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:44:36.469 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@875629264 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:44:36.470 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@875629264 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:44:36.470 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:44:36.470 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@594265036 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:44:36.470 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@594265036 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:44:36.471 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:44:36.471 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@594265036 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:44:36.472 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@594265036 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:44:36.472 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:44:36.472 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@458854558 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:44:36.472 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@458854558 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:44:36.478 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:44:36.478 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@458854558 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:44:36.479 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@458854558 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:44:36.500 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:44:36.502 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 57
2025-05-12 22:44:36.503 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 57
2025-05-12 22:44:38.715  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 用户 57 的WebSocket连接已关闭: CloseStatus[code=1000, reason=User logout]
2025-05-12 22:44:53.116 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/login
2025-05-12 22:44:53.117  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.AuthController     : 开始处理用户登录请求: 测试用户1234
2025-05-12 22:44:53.185  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.AuthController     : 用户登录成功: 测试用户1234
2025-05-12 22:44:53.194 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:44:53.194 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:44:53.194 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:44:53.195 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:44:53.195 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@395767619 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:44:53.195 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@395767619 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:44:53.196 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:44:53.196 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@395767619 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:44:53.196 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@395767619 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:44:53.204 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/basic
2025-05-12 22:44:53.204 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/ai/history
2025-05-12 22:44:53.205 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:44:53.205 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:44:53.205 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:44:53.205 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:44:53.205 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:44:53.206 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:44:53.206 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.updateUserBasicInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-12 22:44:53.206 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@2054056600 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:44:53.206 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:44:53.206 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@2054056600 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:44:53.213 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:44:53.218 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:44:53.218 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@2054056600 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:44:53.218 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@2054056600 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:44:53.230 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:44:53.231  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NTg5MywidXNlcklkIjo1Nn0.JpC_GcVgFVcshO0ZQSDRfhhQhL1WLkdjnxchJL6Lo_IOZaexEBAHlK6P3SZEBcROEooS4Qz72kVTtKeJcmF-bg&userId=56, Path=/ws/chat
2025-05-12 22:44:53.231  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NTg5MywidXNlcklkIjo1Nn0.JpC_GcVgFVcshO0ZQSDRfhhQhL1WLkdjnxchJL6Lo_IOZaexEBAHlK6P3SZEBcROEooS4Qz72kVTtKeJcmF-bg&userId=56
2025-05-12 22:44:53.231 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NTg5MywidXNlcklkIjo1Nn0.JpC_GcVgFVcshO0ZQSDRfhhQhL1WLkdjnxchJL6Lo_IOZaexEBAHlK6P3SZEBcROEooS4Qz72kVTtKeJcmF-bg
2025-05-12 22:44:53.231 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 56
2025-05-12 22:44:53.231  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=56, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NTg5MywidXNlcklkIjo1Nn0.JpC_GcVgFVcshO0ZQSDRfhhQhL1WLkdjnxchJL6Lo_IOZaexEBAHlK6P3SZEBcROEooS4Qz72kVTtKeJcmF-bg}
2025-05-12 22:44:53.231  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=56
2025-05-12 22:44:53.231  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:44:53.231  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 56
2025-05-12 22:44:53.231 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:44:53.231 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747665893, userId=56}
2025-05-12 22:44:53.231 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 56
2025-05-12 22:44:53.231 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 56
2025-05-12 22:44:53.231  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 56
2025-05-12 22:44:53.232 ERROR 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:44:53.232  WARN 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:44:53.233  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 56
2025-05-12 22:44:53.235  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: 3b52ae4f-d73a-f374-38ee-63c20845993b, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NTg5MywidXNlcklkIjo1Nn0.JpC_GcVgFVcshO0ZQSDRfhhQhL1WLkdjnxchJL6Lo_IOZaexEBAHlK6P3SZEBcROEooS4Qz72kVTtKeJcmF-bg&userId=56
2025-05-12 22:44:53.235  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 56
2025-05-12 22:44:53.235  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已建立
2025-05-12 22:44:53.235  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 已注册WebSocket会话: 3b52ae4f-d73a-f374-38ee-63c20845993b
2025-05-12 22:44:53.237  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NTg5MywidXNlcklkIjo1Nn0.JpC_GcVgFVcshO0ZQSDRfhhQhL1WLkdjnxchJL6Lo_IOZaexEBAHlK6P3SZEBcROEooS4Qz72kVTtKeJcmF-bg","userId":56}
2025-05-12 22:44:53.238  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:44:53.238 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:44:53.253 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:44:53.253 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:44:53.254 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:44:53.254 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:44:53.254 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:44:53.254 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:44:53.254 DEBUG 55640 --- [http-nio-8080-exec-4] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:44:53.254 DEBUG 55640 --- [http-nio-8080-exec-4] com.soical.server.util.UserUtils         : principal是Long类型: 56
2025-05-12 22:44:53.254  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 56
2025-05-12 22:44:53.256  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.impl.ConversationServiceImpl     : 用户 56 没有会话
2025-05-12 22:44:53.524 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:44:53.524 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:44:53.524 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:44:53.525 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:44:53.525 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : principal是Long类型: 56
2025-05-12 22:44:53.525  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 56
2025-05-12 22:44:53.528  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 用户 56 没有会话
2025-05-12 22:45:02.630 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:45:02.631 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:02.631 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:02.632 DEBUG 55640 --- [http-nio-8080-exec-3] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:45:02.632 DEBUG 55640 --- [http-nio-8080-exec-3] com.soical.server.util.UserUtils         : principal是Long类型: 56
2025-05-12 22:45:02.632  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 56
2025-05-12 22:45:02.632 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:45:02.633 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:02.633 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:02.634  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.impl.ConversationServiceImpl     : 用户 56 没有会话
2025-05-12 22:45:02.899 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:45:02.899 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:02.900 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:02.901 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:45:02.902 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : principal是Long类型: 56
2025-05-12 22:45:02.902  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 56
2025-05-12 22:45:02.904  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 用户 56 没有会话
2025-05-12 22:45:04.314 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:45:04.315 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:04.315 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:04.316  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 57 会话已断开或状态超时，清除过期的在线状态
2025-05-12 22:45:04.331 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:45:04.332 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:04.332 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:04.333  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.controller.UserMatchController     : 用户 56 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:45:04.510 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:45:04.511 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:04.511 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:11.035 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:11.037 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:11.037 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:11.056 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:45:11.058 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:11.058 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:11.058 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:11.058 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@30299781 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:45:11.059 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@30299781 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:45:11.060 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:11.060 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@30299781 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:45:11.060 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@30299781 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:45:11.071 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:45:11.073 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:11.074 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:11.074 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:11.075 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:11.075 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:11.103 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:11.104 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:11.105 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:11.117 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:45:11.118 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:11.118 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:11.118 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:11.118 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@651763882 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:45:11.118 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@651763882 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:45:11.120 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:11.120 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@651763882 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:45:11.120 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@651763882 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:45:11.120 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:11.120 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1087756116 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:45:11.120 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1087756116 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:45:11.121 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:11.121 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1087756116 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:45:11.121 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1087756116 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:45:11.122 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:11.122 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1410053234 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:45:11.122 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1410053234 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:45:11.123 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:11.123 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1410053234 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:45:11.124 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1410053234 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:45:11.131 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:45:11.131 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:11.131 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:12.078 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/reports/reasons
2025-05-12 22:45:12.078 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/list/community
2025-05-12 22:45:12.079 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:12.079 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:12.079 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:12.079 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:12.080 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getCommunityPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:12.081 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@805752094 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:45:12.082 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@805752094 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:45:12.093 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.097 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.105 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.108 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.111 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.114 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.119 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.122 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.126 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.129 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.133 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.136 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.140 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.143 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.145 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.147 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.149 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.150 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.151 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.153 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.153 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.154 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.155 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.156 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.157 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.158 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:45:12.159 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:12.159 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@805752094 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:45:12.160 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@805752094 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:45:13.416 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:13.417 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:13.418 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:13.434 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:45:13.434 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:13.434 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:13.435 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:13.435 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@452672253 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:45:13.435 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@452672253 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:45:13.437 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:13.437 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@452672253 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:45:13.438 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@452672253 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:45:13.458 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:13.458 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:13.459 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:45:13.459 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:13.459 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:13.459 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:13.473 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:13.474 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:13.474 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:13.488 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:45:13.489 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:13.489 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:13.489 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:13.489 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1149433178 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:45:13.490 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1149433178 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:45:13.493 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:13.493 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1149433178 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:45:13.493 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1149433178 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:45:13.493 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:13.494 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@856166354 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:45:13.494 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@856166354 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:45:13.495 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:13.495 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@856166354 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:45:13.496 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@856166354 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:45:13.496 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:13.496 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@257767644 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:45:13.497 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@257767644 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:45:13.499 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:13.499 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@257767644 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:45:13.499 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@257767644 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:45:13.518 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:45:13.519 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:13.519 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:16.157 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:16.158 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:16.159 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:18.124 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:45:18.126 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:18.126 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:18.128 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/matches
2025-05-12 22:45:18.128 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:18.129 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:18.130  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 获取用户同频匹配列表: userId=56, page=1, pageSize=10
2025-05-12 22:45:18.131  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 查询到匹配记录数: 0
2025-05-12 22:45:18.131  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 返回匹配结果: 总数=0, 当前页数据=0
2025-05-12 22:45:18.139 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:45:18.140 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:18.140 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:18.547 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:18.548 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:18.549 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:20.894 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:20.895 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:20.895 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:20.935 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:45:20.936 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:20.936 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:20.937 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:20.937 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1781825236 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:45:20.937 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1781825236 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:45:20.939 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:20.939 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1781825236 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:45:20.940 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1781825236 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:45:20.948 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:45:20.949 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:20.949 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:20.950 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:20.951 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:20.951 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:20.963 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:20.964 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:20.964 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:20.974 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:45:20.974 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:20.975 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:20.975 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:20.975 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1439475048 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:45:20.975 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1439475048 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:45:20.977 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:20.977 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1439475048 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:45:20.977 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1439475048 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:45:20.977 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:20.977 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1098464653 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:45:20.978 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1098464653 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:45:20.978 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:20.978 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1098464653 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:45:20.979 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1098464653 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:45:20.979 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:20.979 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@380022312 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:45:20.979 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@380022312 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:45:20.980 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:20.980 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@380022312 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:45:20.980 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@380022312 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:45:20.987 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:45:20.987 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:20.987 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:22.772 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:22.773 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:22.773 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:22.792 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/common/occupations
2025-05-12 22:45:22.792 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:22.793 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:22.793 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.CommonServiceImpl.getAllOccupations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:22.794 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@127625707 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:45:22.794 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@127625707 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:45:22.903 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:22.903 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@127625707 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:45:22.903 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@127625707 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:45:23.243  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:45:23.243  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:45:23.244 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:45:26.012 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:26.013 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:26.014 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:26.014 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:26.014 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:26.017 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:26.031 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:45:26.032 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:26.032 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:26.033 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:26.033 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1831547191 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:45:26.034 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1831547191 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:45:26.035 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:26.035 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1831547191 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:45:26.036 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1831547191 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:45:26.044 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:45:26.045 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:26.046 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:26.052 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:26.053 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:26.054 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:26.065 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:26.067 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:26.068 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:26.091 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:45:26.091 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:26.091 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:26.092 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:26.092 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1088231891 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:45:26.092 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1088231891 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:45:26.094 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:26.094 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1088231891 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:45:26.095 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1088231891 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:45:26.095 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:26.095 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1454105536 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:45:26.096 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1454105536 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:45:26.097 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:26.097 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1454105536 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:45:26.097 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1454105536 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:45:26.098 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:45:26.098 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@736161563 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:45:26.098 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@736161563 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:45:26.099 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:45:26.099 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@736161563 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:45:26.100 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@736161563 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:45:26.108 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:45:26.109 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:26.109 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:31.131 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:45:31.131 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 56
2025-05-12 22:45:31.132 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 56
2025-05-12 22:45:54.063  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:45:54.063  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:45:54.064 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:46:24.036  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:46:24.036  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:46:24.036 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:46:54.021  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:46:54.022  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:46:54.022 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:47:24.029  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:47:24.030  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:47:24.030 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:47:54.036  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:47:54.037  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:47:54.037 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:49:01.113  INFO 55640 --- [WebSocket background processing - stopping] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已关闭: CloseStatus[code=1006, reason=The WebSocket session [5] idle timeout expired]
2025-05-12 22:49:03.028 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:49:03.029  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NTg5MywidXNlcklkIjo1Nn0.JpC_GcVgFVcshO0ZQSDRfhhQhL1WLkdjnxchJL6Lo_IOZaexEBAHlK6P3SZEBcROEooS4Qz72kVTtKeJcmF-bg&userId=56, Path=/ws/chat
2025-05-12 22:49:03.029  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NTg5MywidXNlcklkIjo1Nn0.JpC_GcVgFVcshO0ZQSDRfhhQhL1WLkdjnxchJL6Lo_IOZaexEBAHlK6P3SZEBcROEooS4Qz72kVTtKeJcmF-bg&userId=56
2025-05-12 22:49:03.029 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NTg5MywidXNlcklkIjo1Nn0.JpC_GcVgFVcshO0ZQSDRfhhQhL1WLkdjnxchJL6Lo_IOZaexEBAHlK6P3SZEBcROEooS4Qz72kVTtKeJcmF-bg
2025-05-12 22:49:03.029 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 56
2025-05-12 22:49:03.029  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=56, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NTg5MywidXNlcklkIjo1Nn0.JpC_GcVgFVcshO0ZQSDRfhhQhL1WLkdjnxchJL6Lo_IOZaexEBAHlK6P3SZEBcROEooS4Qz72kVTtKeJcmF-bg}
2025-05-12 22:49:03.030  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=56
2025-05-12 22:49:03.030  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:49:03.030  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 56
2025-05-12 22:49:03.030 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:49:03.031 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747665893, userId=56}
2025-05-12 22:49:03.031 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 56
2025-05-12 22:49:03.031 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 56
2025-05-12 22:49:03.031  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 56
2025-05-12 22:49:03.031 ERROR 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:49:03.031  WARN 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:49:03.033  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 56
2025-05-12 22:49:03.034  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: 4c7e0fc1-ba43-c207-cf87-2fc7ad3cda81, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NTg5MywidXNlcklkIjo1Nn0.JpC_GcVgFVcshO0ZQSDRfhhQhL1WLkdjnxchJL6Lo_IOZaexEBAHlK6P3SZEBcROEooS4Qz72kVTtKeJcmF-bg&userId=56
2025-05-12 22:49:03.035  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 56
2025-05-12 22:49:03.035  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已建立
2025-05-12 22:49:03.035  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 已注册WebSocket会话: 4c7e0fc1-ba43-c207-cf87-2fc7ad3cda81
2025-05-12 22:49:03.036  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NTg5MywidXNlcklkIjo1Nn0.JpC_GcVgFVcshO0ZQSDRfhhQhL1WLkdjnxchJL6Lo_IOZaexEBAHlK6P3SZEBcROEooS4Qz72kVTtKeJcmF-bg","userId":56}
2025-05-12 22:49:03.037  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:49:03.037 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:49:34.033  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:49:34.034  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:49:34.034 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:50:04.034  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:50:04.034  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:50:04.034 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:50:34.034  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:50:34.035  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 设置为在线状态
2025-05-12 22:50:34.035 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户56活动状态
2025-05-12 22:50:54.224  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 用户 56 的WebSocket连接已关闭: CloseStatus[code=1000, reason=User logout]
2025-05-12 22:50:57.502 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/reports/reasons
2025-05-12 22:51:47.874 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 22:52:04.714 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/register
2025-05-12 22:52:04.720  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.controller.AuthController     : 开始处理用户注册请求: 测试用户321
2025-05-12 22:52:04.721 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.register]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:52:04.722 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@355421414 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:52:04.723 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@355421414 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:52:04.799 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:52:04.799 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@355421414 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:52:04.801 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@355421414 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:52:04.801  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.controller.AuthController     : 用户注册成功: 测试用户321, userId: 58
2025-05-12 22:52:04.814 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/login
2025-05-12 22:52:04.815  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.AuthController     : 开始处理用户登录请求: 测试用户321
2025-05-12 22:52:04.887  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.AuthController     : 用户登录成功: 测试用户321
2025-05-12 22:52:04.899 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:52:04.900 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:04.900 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:04.900 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:52:04.901 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@416909834 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:52:04.901 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@416909834 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:52:04.902 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:52:04.902 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@416909834 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:52:04.903 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@416909834 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:52:04.916 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/basic
2025-05-12 22:52:04.917 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:04.917 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:04.918 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.updateUserBasicInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-12 22:52:04.919 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@322489235 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:52:04.919 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@322489235 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:52:04.922 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:52:04.926 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:52:04.926 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@322489235 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:52:04.928 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@322489235 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:52:04.929 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:52:04.929 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:04.929 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:04.937 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:52:04.938  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NjMyNCwidXNlcklkIjo1OH0.Ye0ng-sfK_bjn4ZzRJSsa_TDX4mAlrhfkFfxaDXdQ6dmpB8dyl7pXm68QZe6MNNRui-RV0vd6IgwDcXVMSOa4w&userId=58, Path=/ws/chat
2025-05-12 22:52:04.938  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NjMyNCwidXNlcklkIjo1OH0.Ye0ng-sfK_bjn4ZzRJSsa_TDX4mAlrhfkFfxaDXdQ6dmpB8dyl7pXm68QZe6MNNRui-RV0vd6IgwDcXVMSOa4w&userId=58
2025-05-12 22:52:04.938 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NjMyNCwidXNlcklkIjo1OH0.Ye0ng-sfK_bjn4ZzRJSsa_TDX4mAlrhfkFfxaDXdQ6dmpB8dyl7pXm68QZe6MNNRui-RV0vd6IgwDcXVMSOa4w
2025-05-12 22:52:04.938 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 58
2025-05-12 22:52:04.938  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=58, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NjMyNCwidXNlcklkIjo1OH0.Ye0ng-sfK_bjn4ZzRJSsa_TDX4mAlrhfkFfxaDXdQ6dmpB8dyl7pXm68QZe6MNNRui-RV0vd6IgwDcXVMSOa4w}
2025-05-12 22:52:04.938  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=58
2025-05-12 22:52:04.938  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:52:04.938  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 58
2025-05-12 22:52:04.938 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:52:04.939 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747666324, userId=58}
2025-05-12 22:52:04.939 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 58
2025-05-12 22:52:04.939 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 58
2025-05-12 22:52:04.939  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 58
2025-05-12 22:52:04.941 ERROR 55640 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:52:04.941  WARN 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:52:04.942  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 58
2025-05-12 22:52:04.946  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: 8f680dba-397c-a078-704d-a5027fa7a3c4, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NjMyNCwidXNlcklkIjo1OH0.Ye0ng-sfK_bjn4ZzRJSsa_TDX4mAlrhfkFfxaDXdQ6dmpB8dyl7pXm68QZe6MNNRui-RV0vd6IgwDcXVMSOa4w&userId=58
2025-05-12 22:52:04.946  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 58
2025-05-12 22:52:04.946  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 用户 58 的WebSocket连接已建立
2025-05-12 22:52:04.946  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 用户 58 已注册WebSocket会话: 8f680dba-397c-a078-704d-a5027fa7a3c4
2025-05-12 22:52:04.948  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NjMyNCwidXNlcklkIjo1OH0.Ye0ng-sfK_bjn4ZzRJSsa_TDX4mAlrhfkFfxaDXdQ6dmpB8dyl7pXm68QZe6MNNRui-RV0vd6IgwDcXVMSOa4w","userId":58}
2025-05-12 22:52:04.948  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:52:04.948 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:52:05.009 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:52:05.010 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:05.011 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:05.012  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.controller.UserMatchController     : 用户 58 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:52:05.105 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:52:05.106 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:05.107 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:05.108  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 56 会话已断开或状态超时，清除过期的在线状态
2025-05-12 22:52:05.259 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:52:05.260 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:05.260 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:05.261  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.controller.UserMatchController     : 用户 58 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:52:05.378 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:52:05.378 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:05.379 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:19.849 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:52:19.849 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:19.850 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:19.850  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.controller.UserMatchController     : 用户 58 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:52:19.963 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:52:19.964 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:19.964 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:29.502 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:52:29.503 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:29.504 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:29.521 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:52:29.522 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:29.522 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:29.531 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:52:29.531 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:29.531 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:29.543 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:52:29.543 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:29.543 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:29.544 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:52:29.544 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1409955462 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] for JDBC transaction
2025-05-12 22:52:29.545 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1409955462 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] to manual commit
2025-05-12 22:52:29.548 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:52:29.548 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1409955462 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd]
2025-05-12 22:52:29.548 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1409955462 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] after transaction
2025-05-12 22:52:29.548 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:52:29.548 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@2103194254 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] for JDBC transaction
2025-05-12 22:52:29.548 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@2103194254 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] to manual commit
2025-05-12 22:52:29.549 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:52:29.549 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@2103194254 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd]
2025-05-12 22:52:29.550 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@2103194254 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] after transaction
2025-05-12 22:52:29.550 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:52:29.550 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1631290969 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] for JDBC transaction
2025-05-12 22:52:29.550 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1631290969 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] to manual commit
2025-05-12 22:52:29.551 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:52:29.551 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1631290969 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd]
2025-05-12 22:52:29.552 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1631290969 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] after transaction
2025-05-12 22:52:29.559 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/user/11
2025-05-12 22:52:29.559 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:29.559 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:29.560 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getUserPostList]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:52:29.560 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1947533197 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:52:29.560 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1947533197 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:52:29.563 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:52:29.563 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1947533197 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:52:29.563 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1947533197 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:52:29.570 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/follow/status/11
2025-05-12 22:52:29.570 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:52:29.570 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:52:29.571 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.isFollowing]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:52:29.571 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@414167513 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:52:29.571 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@414167513 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:52:29.572 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:52:29.572 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@414167513 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:52:29.572 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@414167513 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:52:34.952  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:52:34.952  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:52:34.952 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:53:05.026  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:53:05.026  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:53:05.026 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:53:35.022  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:53:35.022  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:53:35.022 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:53:45.330 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:53:45.331 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:53:45.331 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:53:45.381 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:53:45.381 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:53:45.381 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:53:45.387 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:53:45.388 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:53:45.388 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:53:45.396 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:53:45.396 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:53:45.397 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:53:45.397 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:53:45.397 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@702963451 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:53:45.398 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@702963451 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:53:45.399 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:53:45.399 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@702963451 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:53:45.399 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@702963451 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:53:45.399 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:53:45.399 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1742140047 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:53:45.400 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1742140047 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:53:45.401 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:53:45.401 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1742140047 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:53:45.401 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1742140047 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:53:45.401 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:53:45.401 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1459178936 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:53:45.402 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1459178936 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:53:45.402 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:53:45.402 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1459178936 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:53:45.403 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1459178936 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:53:45.411 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/user/11
2025-05-12 22:53:45.412 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:53:45.413 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:53:45.413 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getUserPostList]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:53:45.413 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@728151075 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:53:45.414 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@728151075 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:53:45.416 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:53:45.417 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@728151075 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:53:45.417 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@728151075 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:53:45.424 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/follow/status/11
2025-05-12 22:53:45.425 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:53:45.425 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:53:45.426 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.isFollowing]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:53:45.426 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@275310751 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:53:45.427 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@275310751 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:53:45.430 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:53:45.430 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@275310751 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:53:45.431 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@275310751 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:54:05.021  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:54:05.022  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:54:05.022 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:54:12.887  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 用户 58 的WebSocket连接已关闭: CloseStatus[code=1001, reason=null]
2025-05-12 22:54:13.107 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:54:13.108 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:13.108 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:13.109 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:54:13.109 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@565176774 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:54:13.109 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@565176774 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:54:13.110 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:54:13.110 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@565176774 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:54:13.110 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@565176774 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:54:13.200 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:54:13.202 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:13.202 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:13.389 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/11
2025-05-12 22:54:13.390 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:13.390 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:13.419 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:54:13.421 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:13.421 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:13.435 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/check
2025-05-12 22:54:13.435 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:13.435 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:13.476 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/11/stats
2025-05-12 22:54:13.476 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:13.477 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:13.477 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:54:13.477 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1071951088 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:54:13.478 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1071951088 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:54:13.479 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:54:13.479 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1071951088 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:54:13.479 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1071951088 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:54:13.479 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:54:13.480 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@453417661 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:54:13.480 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@453417661 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:54:13.481 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:54:13.481 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@453417661 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:54:13.482 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@453417661 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:54:13.482 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:54:13.482 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1673696006 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:54:13.482 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1673696006 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:54:13.484 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:54:13.484 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1673696006 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:54:13.485 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1673696006 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:54:13.494 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/user/11
2025-05-12 22:54:13.494 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:13.495 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:13.496 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getUserPostList]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:54:13.496 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1561786283 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:54:13.497 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1561786283 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:54:13.500 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:54:13.501 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1561786283 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:54:13.502 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1561786283 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:54:13.510 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/follow/status/11
2025-05-12 22:54:13.511 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:13.511 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:13.512 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.isFollowing]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:54:13.512 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1726980960 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:54:13.512 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1726980960 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:54:13.513 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:54:13.513 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1726980960 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:54:13.513 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1726980960 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:54:14.876 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/follow/11
2025-05-12 22:54:14.877 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:14.877 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:14.879 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.followUser]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:54:14.879 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1379019359 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:54:14.880 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1379019359 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:54:14.888 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:54:14.889 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1379019359 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:54:14.891 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1379019359 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:54:15.740 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/follow/11
2025-05-12 22:54:15.741 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:15.741 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:15.742 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.unfollowUser]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:54:15.742 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@326070889 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] for JDBC transaction
2025-05-12 22:54:15.742 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@326070889 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] to manual commit
2025-05-12 22:54:15.745 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:54:15.745 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@326070889 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd]
2025-05-12 22:54:15.746 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@326070889 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] after transaction
2025-05-12 22:54:25.147 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/follow/11
2025-05-12 22:54:25.148 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:25.148 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:25.149 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.followUser]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:54:25.149 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@2020159596 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:54:25.149 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@2020159596 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:54:25.156 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:54:25.156 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@2020159596 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:54:25.179 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@2020159596 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:54:27.678 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/follow/11
2025-05-12 22:54:27.678 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:27.679 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:27.680 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.unfollowUser]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:54:27.680 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1483628445 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:54:27.680 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1483628445 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:54:27.683 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:54:27.683 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1483628445 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:54:27.684 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1483628445 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:54:32.112 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:54:32.112 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:32.113 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:32.113  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.controller.UserMatchController     : 用户 58 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:54:32.189 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:54:32.190 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:32.190 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:32.190  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 会话已断开或状态超时，清除过期的在线状态
2025-05-12 22:54:33.919 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:54:33.921 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:33.922 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:33.923 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:54:33.923 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : principal是Long类型: 58
2025-05-12 22:54:33.923  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 58
2025-05-12 22:54:33.928 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:54:33.929 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:33.929 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:33.930  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 用户 58 没有会话
2025-05-12 22:54:33.951 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:54:33.962  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NjMyNCwidXNlcklkIjo1OH0.Ye0ng-sfK_bjn4ZzRJSsa_TDX4mAlrhfkFfxaDXdQ6dmpB8dyl7pXm68QZe6MNNRui-RV0vd6IgwDcXVMSOa4w&userId=58, Path=/ws/chat
2025-05-12 22:54:33.963  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NjMyNCwidXNlcklkIjo1OH0.Ye0ng-sfK_bjn4ZzRJSsa_TDX4mAlrhfkFfxaDXdQ6dmpB8dyl7pXm68QZe6MNNRui-RV0vd6IgwDcXVMSOa4w&userId=58
2025-05-12 22:54:33.963 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NjMyNCwidXNlcklkIjo1OH0.Ye0ng-sfK_bjn4ZzRJSsa_TDX4mAlrhfkFfxaDXdQ6dmpB8dyl7pXm68QZe6MNNRui-RV0vd6IgwDcXVMSOa4w
2025-05-12 22:54:33.963 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 58
2025-05-12 22:54:33.963  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=58, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NjMyNCwidXNlcklkIjo1OH0.Ye0ng-sfK_bjn4ZzRJSsa_TDX4mAlrhfkFfxaDXdQ6dmpB8dyl7pXm68QZe6MNNRui-RV0vd6IgwDcXVMSOa4w}
2025-05-12 22:54:33.963  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=58
2025-05-12 22:54:33.963  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:54:33.963  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 58
2025-05-12 22:54:33.963 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:54:33.964 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747666324, userId=58}
2025-05-12 22:54:33.964 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 58
2025-05-12 22:54:33.964 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 58
2025-05-12 22:54:33.964  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 58
2025-05-12 22:54:33.965 ERROR 55640 --- [http-nio-8080-exec-8] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:54:33.965  WARN 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:54:33.967  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 58
2025-05-12 22:54:33.969  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: 95ba186d-4342-1743-16f5-858dc9eb3d73, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NjMyNCwidXNlcklkIjo1OH0.Ye0ng-sfK_bjn4ZzRJSsa_TDX4mAlrhfkFfxaDXdQ6dmpB8dyl7pXm68QZe6MNNRui-RV0vd6IgwDcXVMSOa4w&userId=58
2025-05-12 22:54:33.969  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 58
2025-05-12 22:54:33.969  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 用户 58 的WebSocket连接已建立
2025-05-12 22:54:33.969  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 用户 58 已注册WebSocket会话: 95ba186d-4342-1743-16f5-858dc9eb3d73
2025-05-12 22:54:33.983  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NjMyNCwidXNlcklkIjo1OH0.Ye0ng-sfK_bjn4ZzRJSsa_TDX4mAlrhfkFfxaDXdQ6dmpB8dyl7pXm68QZe6MNNRui-RV0vd6IgwDcXVMSOa4w","userId":58}
2025-05-12 22:54:33.983  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:54:33.983 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:54:46.762 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:54:46.763 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:46.763 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:46.773 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/ai/history
2025-05-12 22:54:46.773 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:46.773 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:51.986 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/ai/chat
2025-05-12 22:54:51.987 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:54:51.987 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:54:51.988 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.AiChatServiceImpl.sendMessage]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:54:51.990 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1703520086 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:54:51.990 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1703520086 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:55:03.983  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:55:03.984  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:55:03.984 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:55:10.712 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/ai/chat
2025-05-12 22:55:10.712 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:10.713 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:10.714 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.AiChatServiceImpl.sendMessage]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:55:10.714 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@359878520 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:55:10.714 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@359878520 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:55:11.183  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.client.DeepSeekApiClient      : DeepSeek API调用成功: prompt_tokens=29, completion_tokens=84, total_tokens=113
2025-05-12 22:55:11.186 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:55:11.186 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1703520086 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:55:11.189 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1703520086 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:55:17.081  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.client.DeepSeekApiClient      : DeepSeek API调用成功: prompt_tokens=27, completion_tokens=18, total_tokens=45
2025-05-12 22:55:17.084 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:55:17.084 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@359878520 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:55:17.086 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@359878520 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:55:23.242 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:55:23.243 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:55:23.243 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:23.244 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:23.244 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:23.244 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:23.246 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:55:23.246 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : principal是Long类型: 58
2025-05-12 22:55:23.246  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 58
2025-05-12 22:55:23.248  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 用户 58 没有会话
2025-05-12 22:55:23.521 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:55:23.521 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:23.521 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:23.522 DEBUG 55640 --- [http-nio-8080-exec-8] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:55:23.522 DEBUG 55640 --- [http-nio-8080-exec-8] com.soical.server.util.UserUtils         : principal是Long类型: 58
2025-05-12 22:55:23.522  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 58
2025-05-12 22:55:23.523  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.impl.ConversationServiceImpl     : 用户 58 没有会话
2025-05-12 22:55:25.705 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:55:25.706 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:25.706 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:25.717 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:55:25.718 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:25.718 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:25.720 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:55:25.720 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : principal是Long类型: 58
2025-05-12 22:55:25.720  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 58
2025-05-12 22:55:25.751  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 用户 58 没有会话
2025-05-12 22:55:25.938 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:55:25.938 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:25.938 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:25.939 DEBUG 55640 --- [http-nio-8080-exec-2] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:55:25.939 DEBUG 55640 --- [http-nio-8080-exec-2] com.soical.server.util.UserUtils         : principal是Long类型: 58
2025-05-12 22:55:25.939  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 58
2025-05-12 22:55:25.940  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.impl.ConversationServiceImpl     : 用户 58 没有会话
2025-05-12 22:55:27.003 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/reports/reasons
2025-05-12 22:55:27.003 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/list/community
2025-05-12 22:55:27.004 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:27.004 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:27.005 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:27.005 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:27.006 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getCommunityPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:55:27.006 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@430537030 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:55:27.007 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@430537030 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:55:27.015 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.019 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.023 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.028 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.031 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.036 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.047 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.051 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.054 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.058 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.062 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.066 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.069 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.071 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.073 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.075 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.076 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.078 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.080 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.082 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.083 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.084 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.087 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.088 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.090 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.091 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:27.093 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:55:27.093 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@430537030 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:55:27.094 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@430537030 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:55:33.984  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:55:33.984  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:55:33.985 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:55:35.139 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/like/16
2025-05-12 22:55:35.140 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:35.140 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:35.141 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostLikeServiceImpl.likePost]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:55:35.141 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@329147672 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:55:35.141 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@329147672 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:55:35.148 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:35.154 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:55:35.154 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@329147672 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:55:35.156 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@329147672 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:55:36.688 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/16
2025-05-12 22:55:36.689 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:36.689 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:36.690 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getPostDetail]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:55:36.690 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@146785220 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:55:36.691 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@146785220 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:55:36.694 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:36.696 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:55:36.697 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@146785220 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:55:36.697 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@146785220 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:55:36.717 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/comment/list/16
2025-05-12 22:55:36.718 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:36.718 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:36.720 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.CommentServiceImpl.getCommentList]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:55:36.721 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1471307223 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:55:36.721 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1471307223 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:55:36.737 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:55:36.737 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1471307223 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:55:36.738 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1471307223 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:55:40.220 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/comment/add
2025-05-12 22:55:40.220 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:40.221 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:40.227 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.CommentServiceImpl.addComment]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:55:40.228 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1417912884 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:55:40.228 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1417912884 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:55:40.238 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:40.241 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:55:40.241 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1417912884 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:55:40.412 DEBUG 55640 --- [http-nio-8080-exec-9] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1417912884 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:55:40.425 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/comment/list/16
2025-05-12 22:55:40.426 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:40.426 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:40.426 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/16
2025-05-12 22:55:40.427 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.CommentServiceImpl.getCommentList]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:55:40.427 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@686001785 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:55:40.427 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:40.427 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@686001785 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:55:40.428 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:40.428 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getPostDetail]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:55:40.429 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1332321745 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:55:40.429 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1332321745 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:55:40.434 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:40.437 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:55:40.437 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1332321745 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:55:40.438 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1332321745 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:55:40.443 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:40.445 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:55:40.445 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@686001785 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:55:40.445 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@686001785 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:55:40.451 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/comment/list/16
2025-05-12 22:55:40.452 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:40.452 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:40.453 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.CommentServiceImpl.getCommentList]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:55:40.453 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1559094677 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:55:40.453 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1559094677 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:55:40.457 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:40.486 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:55:40.486 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1559094677 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:55:40.488 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1559094677 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:55:43.247 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/reports/reasons
2025-05-12 22:55:43.248 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:43.248 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:43.249 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/list/community
2025-05-12 22:55:43.250 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:43.250 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:43.250 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getCommunityPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:55:43.251 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1646236428 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:55:43.251 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1646236428 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:55:43.258 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.262 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.265 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.269 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.274 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.278 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.281 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.289 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.293 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.297 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.301 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.304 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.308 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.310 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.312 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.313 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.314 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.316 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.317 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.319 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.322 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.323 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.324 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.326 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.327 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.329 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:55:43.330 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:55:43.330 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1646236428 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:55:43.331 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1646236428 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:55:59.845 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/create
2025-05-12 22:55:59.846 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:55:59.846 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:55:59.903 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.createPost]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:55:59.904 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1839103174 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] for JDBC transaction
2025-05-12 22:55:59.904 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1839103174 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] to manual commit
2025-05-12 22:56:03.983  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:56:03.983  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:56:03.984 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:56:11.650 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:11.657 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:11.657 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1839103174 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd]
2025-05-12 22:56:11.660 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1839103174 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] after transaction
2025-05-12 22:56:13.204 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/reports/reasons
2025-05-12 22:56:13.205 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:13.205 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:13.208 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/list/community
2025-05-12 22:56:13.208 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:13.209 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:13.209 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getCommunityPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:13.210 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1707212434 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:56:13.211 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1707212434 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:56:13.217 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.221 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.224 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.229 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.234 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.242 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.249 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.254 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.257 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.264 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.269 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.272 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.275 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.279 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.281 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.283 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.284 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.286 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.287 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.289 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.290 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.292 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.293 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.294 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.295 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.297 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.299 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.300 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:13.302 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:13.302 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1707212434 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:56:13.302 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1707212434 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:56:17.683 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:17.684 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:17.685 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:17.702 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:56:17.703 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:17.703 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:17.704 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:17.704 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1689319601 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:56:17.705 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1689319601 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:56:17.706 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:17.706 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1689319601 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:56:17.707 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1689319601 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:56:17.716 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:56:17.718 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:17.719 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:17.721 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:17.722 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:17.722 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:17.734 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:17.735 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:17.735 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:17.745 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:56:17.746 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:17.746 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:17.747 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:17.747 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1129179863 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:56:17.747 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1129179863 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:56:17.749 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:17.749 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1129179863 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:56:17.750 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1129179863 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:56:17.750 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:17.750 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1174816280 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:56:17.751 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1174816280 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:56:17.752 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:17.752 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1174816280 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:56:17.752 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1174816280 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:56:17.752 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:17.752 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1284243447 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:56:17.753 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1284243447 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:56:17.753 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:17.754 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1284243447 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:56:17.754 DEBUG 55640 --- [http-nio-8080-exec-4] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1284243447 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:56:17.765 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:56:17.767 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:17.767 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:19.455 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:19.455 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:19.456 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:19.484 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/common/occupations
2025-05-12 22:56:19.484 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:19.484 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:19.485 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.CommonServiceImpl.getAllOccupations]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:19.485 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1777326501 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:56:19.485 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1777326501 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:56:19.488 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:19.488 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1777326501 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:56:19.489 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1777326501 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:56:22.647 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/avatar
2025-05-12 22:56:22.647 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:22.648 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:22.656 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.updateAvatar]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-12 22:56:22.657 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@905315851 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:56:22.658 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@905315851 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:56:22.772 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:22.777 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:22.777 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@905315851 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:56:22.779 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@905315851 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:56:22.791 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:22.792 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:22.792 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:22.797 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/basic
2025-05-12 22:56:22.797 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:22.797 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:22.798 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.updateUserBasicInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-12 22:56:22.798 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1969264969 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] for JDBC transaction
2025-05-12 22:56:22.798 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1969264969 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] to manual commit
2025-05-12 22:56:22.802 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:56:22.805 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:22.805 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1969264969 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd]
2025-05-12 22:56:22.806 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1969264969 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] after transaction
2025-05-12 22:56:33.397 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:56:33.397 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:33.397 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:33.985  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:56:33.985  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:56:33.985 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:56:36.684 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:36.685 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:36.685 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:36.687 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserProfileServiceImpl.updateUserProfile]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-12 22:56:36.688 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1145897310 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:56:36.688 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1145897310 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:56:36.690  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.impl.UserProfileServiceImpl      : 更新现有用户资料: userId=58
2025-05-12 22:56:36.690 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.s.impl.UserProfileServiceImpl      : 更新前资料: UserProfile(profileId=44, userId=58, nickname=测试用户321, avatar=https://image-0620.oss-cn-shenzhen.aliyuncs.com/images/2025/05/12/b049edbfc3334c39a726440909fd9a01.png, education=0, occupation=, occupationCode=null, location=, city=, cityCode=null, provinceCode=null, gender=null, birthday=null, selfIntro=null, hobbies=null, photos=null, createTime=Mon May 12 22:52:04 CST 2025, updateTime=Mon May 12 22:52:04 CST 2025)
2025-05-12 22:56:36.691 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.s.impl.UserProfileServiceImpl      : 传入DTO: UserProfileDTO(userId=58, nickname=测试用户321, education=0, occupation=, occupationCode=null, location=null, city=北京, cityCode=北京, provinceCode=北京, gender=1, birthday=, selfIntro=, hobbies=编程,跑步,写作, avatar=https://image-0620.oss-cn-shenzhen.aliyuncs.com/images/2025/05/12/b049edbfc3334c39a726440909fd9a01.png, followerCount=null, followingCount=null, isFollowing=null)
2025-05-12 22:56:36.701  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.impl.UserProfileServiceImpl      : 用户资料已存在，执行更新操作: userId=58, profileId=44
2025-05-12 22:56:36.702  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.impl.UserProfileServiceImpl      : 用户资料保存结果: true
2025-05-12 22:56:36.703 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:36.703 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1145897310 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:56:36.704 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1145897310 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:56:36.725 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:56:36.725 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:36.726 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:36.726 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:36.726 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@398703954 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:56:36.727 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@398703954 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:56:36.728 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:36.728 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@398703954 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:56:36.729 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@398703954 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:56:36.738 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:56:36.740 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:36.740 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:38.249 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:38.250 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:38.250 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:38.262 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:56:38.263 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:38.263 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:38.263 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:38.264 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1918212900 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] for JDBC transaction
2025-05-12 22:56:38.264 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1918212900 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] to manual commit
2025-05-12 22:56:38.266 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:38.266 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1918212900 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd]
2025-05-12 22:56:38.267 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1918212900 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] after transaction
2025-05-12 22:56:38.276 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:56:38.276 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:38.277 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:38.277 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:38.277 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:38.277 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:38.289 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:38.290 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:38.290 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:38.300 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:56:38.300 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:38.300 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:38.300 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:38.300 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@231120982 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:56:38.301 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@231120982 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:56:38.304 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:38.304 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@231120982 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:56:38.304 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@231120982 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:56:38.305 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:38.305 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@2069230279 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:56:38.305 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@2069230279 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:56:38.306 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:38.306 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@2069230279 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:56:38.306 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@2069230279 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:56:38.307 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:38.307 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1567225208 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:56:38.307 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1567225208 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:56:38.308 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:38.308 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1567225208 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:56:38.309 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1567225208 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:56:38.322 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:56:38.323 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:38.323 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:43.342 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:43.343 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:43.343 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:51.569 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:51.569 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:51.569 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:51.593 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:56:51.593 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:51.594 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:51.594 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:51.597 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@874188953 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:56:51.598 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@874188953 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:56:51.600 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:51.600 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@874188953 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:56:51.600 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@874188953 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:56:51.611 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:51.611 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:56:51.612 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:51.612 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:51.612 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:51.612 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:51.628 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:51.629 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:51.629 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:51.652 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:56:51.652 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:51.652 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:51.652 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:51.652 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1212604418 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:56:51.653 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1212604418 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:56:51.654 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:51.654 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1212604418 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:56:51.655 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1212604418 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:56:51.655 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:51.655 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1622755930 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:56:51.655 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1622755930 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:56:51.657 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:51.657 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1622755930 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:56:51.657 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1622755930 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:56:51.657 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:56:51.657 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1006030981 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:56:51.657 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1006030981 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:56:51.658 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:56:51.658 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1006030981 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:56:51.659 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1006030981 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:56:51.664 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:56:51.665 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:51.665 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:56:56.683 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:56:56.683 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:56:56.684 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:00.097 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/list/liked
2025-05-12 22:57:00.098 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:00.098 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:00.102 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getLikedPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:57:00.103 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1908138815 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:57:00.103 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1908138815 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:57:00.114 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:57:00.121 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:57:00.121 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1908138815 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:57:00.121 DEBUG 55640 --- [http-nio-8080-exec-1] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1908138815 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:57:03.982  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:57:03.983  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:57:03.983 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:57:04.381 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:57:04.381 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:04.381 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:04.402 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:57:04.402 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:04.402 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:04.403 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:57:04.403 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@121365560 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:57:04.404 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@121365560 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:57:04.405 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:57:04.405 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@121365560 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:57:04.406 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@121365560 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:57:04.417 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:57:04.417 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:57:04.417 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:04.417 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:04.417 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:04.417 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:04.428 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:57:04.430 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:04.430 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:04.440 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:57:04.441 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:04.441 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:04.441 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:57:04.441 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1637442591 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:57:04.441 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1637442591 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:57:04.443 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:57:04.443 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1637442591 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:57:04.443 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1637442591 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:57:04.443 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:57:04.443 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1565667446 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:57:04.443 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1565667446 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:57:04.444 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:57:04.444 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1565667446 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:57:04.445 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1565667446 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:57:04.445 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:57:04.445 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1971917619 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:57:04.445 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1971917619 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:57:04.446 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:57:04.446 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1971917619 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:57:04.447 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1971917619 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:57:04.452 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:57:04.453 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:04.453 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:05.989 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/likes-given
2025-05-12 22:57:05.990 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:05.990 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:05.990 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/likes-received
2025-05-12 22:57:05.991  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.controller.UserMatchController     : 用户 58 请求获取已喜欢的用户列表
2025-05-12 22:57:05.991 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:05.991 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:05.992  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.controller.UserMatchController     : 用户 58 请求获取喜欢当前用户的用户列表
2025-05-12 22:57:09.058 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:57:09.059 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:09.060 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:09.075 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:57:09.075 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:09.075 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:09.076 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:57:09.077 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1345873306 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:57:09.077 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1345873306 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:57:09.078 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:57:09.078 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1345873306 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:57:09.078 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1345873306 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:57:09.090 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:57:09.091 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:09.091 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:09.091 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:57:09.091 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:09.092 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:09.104 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:57:09.105 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:09.105 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:09.120 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:57:09.121 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:09.122 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:09.122 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:57:09.122 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1651169121 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:57:09.123 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1651169121 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:57:09.125 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:57:09.125 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1651169121 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:57:09.125 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1651169121 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:57:09.125 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:57:09.125 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@486140744 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:57:09.125 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@486140744 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:57:09.127 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:57:09.127 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@486140744 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:57:09.127 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@486140744 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:57:09.127 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:57:09.127 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1183962147 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:57:09.128 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1183962147 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:57:09.130 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:57:09.130 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1183962147 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:57:09.131 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1183962147 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:57:09.139 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:57:09.140 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:09.140 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:09.494 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:57:09.496 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:09.496 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:14.163 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:57:14.163 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:14.163 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:14.661 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:57:14.662 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:14.662 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:14.677 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:57:14.677 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:14.677 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:14.678 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:57:14.678 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1136799667 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] for JDBC transaction
2025-05-12 22:57:14.678 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1136799667 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] to manual commit
2025-05-12 22:57:14.679 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:57:14.679 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1136799667 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b]
2025-05-12 22:57:14.680 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1136799667 wrapping com.mysql.cj.jdbc.ConnectionImpl@75c5188b] after transaction
2025-05-12 22:57:14.688 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:57:14.688 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:57:14.689 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:14.689 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:14.689 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:14.689 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:14.700 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:57:14.701 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:14.701 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:14.709 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 22:57:14.709 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:14.709 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:14.710 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:57:14.710 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1923428202 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] for JDBC transaction
2025-05-12 22:57:14.711 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1923428202 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] to manual commit
2025-05-12 22:57:14.712 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:57:14.713 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1923428202 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd]
2025-05-12 22:57:14.713 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1923428202 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] after transaction
2025-05-12 22:57:14.713 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:57:14.714 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@178204926 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] for JDBC transaction
2025-05-12 22:57:14.714 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@178204926 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] to manual commit
2025-05-12 22:57:14.715 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:57:14.715 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@178204926 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd]
2025-05-12 22:57:14.717 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@178204926 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] after transaction
2025-05-12 22:57:14.717 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:57:14.717 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1849668911 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] for JDBC transaction
2025-05-12 22:57:14.718 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1849668911 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] to manual commit
2025-05-12 22:57:14.719 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:57:14.719 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1849668911 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd]
2025-05-12 22:57:14.719 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1849668911 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] after transaction
2025-05-12 22:57:14.723 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 22:57:14.724 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:14.724 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:19.741 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 22:57:19.741 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 58
2025-05-12 22:57:19.742 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 58
2025-05-12 22:57:26.246 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/login
2025-05-12 22:57:26.347 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/current
2025-05-12 22:57:26.348 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:26.348 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:26.526 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/users
2025-05-12 22:57:26.526 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:26.527 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:26.530 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/match-trend
2025-05-12 22:57:26.531 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/system
2025-05-12 22:57:26.533 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:26.531 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/content-trend
2025-05-12 22:57:26.533 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:26.533 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:26.533 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:26.533 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:26.533 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:26.532 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/user-gender
2025-05-12 22:57:26.532 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/user-growth
2025-05-12 22:57:26.534 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:26.534 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:26.534 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:26.534 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:26.653 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/content
2025-05-12 22:57:26.653 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:26.653 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:26.711 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/match-stats
2025-05-12 22:57:26.712 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:26.713 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:34.021  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:57:34.021  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:57:34.022 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:57:38.071 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/user/list
2025-05-12 22:57:38.071 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:38.071 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:42.934 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/user/58
2025-05-12 22:57:42.934 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:42.935 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:50.300 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts
2025-05-12 22:57:50.300 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/stats
2025-05-12 22:57:50.301 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:50.302 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:50.302 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:50.302 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:54.700 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/user/17
2025-05-12 22:57:54.701 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:54.701 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:54.717 ERROR 55640 --- [http-nio-8080-exec-8] c.s.s.common.GlobalExceptionHandler      : 业务异常

com.soical.server.common.BusinessException: 用户不存在
	at com.soical.server.service.impl.AdminUserServiceImpl.getUserDetail(AdminUserServiceImpl.java:149) ~[classes/:na]
	at com.soical.server.service.impl.AdminUserServiceImpl$$FastClassBySpringCGLIB$$559add65.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.20.jar:5.3.20]
	at com.soical.server.service.impl.AdminUserServiceImpl$$EnhancerBySpringCGLIB$$3bd3727a.getUserDetail(<generated>) ~[classes/:na]
	at com.soical.server.controller.AdminUserController.getUserDetail(AdminUserController.java:50) ~[classes/:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilterInternal(AuthorizationFilter.java:73) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at com.soical.server.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:92) [classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.lang.Thread.run(Thread.java:748) [na:1.8.0_202]

2025-05-12 22:57:55.296 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/17
2025-05-12 22:57:55.296 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/17/comments
2025-05-12 22:57:55.296 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:55.296 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:55.296 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:57:55.297 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:57:55.300  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.AdminContentServiceImpl     : 未查询到评论数据
2025-05-12 22:58:02.025 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/reports
2025-05-12 22:58:02.025 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/reports/stats
2025-05-12 22:58:02.026 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:58:02.026 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:58:02.026 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:58:02.026 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:58:02.028  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.controller.AdminContentController  : 获取举报列表, 页码: 1, 每页数量: 10, 类型: null, 状态: null, 关键词: 
2025-05-12 22:58:02.032  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.controller.AdminContentController  : 查询到举报数量: 0
2025-05-12 22:58:04.021  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:58:04.022  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:58:04.022 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:58:06.432 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/verification/identity/all
2025-05-12 22:58:06.433 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:58:06.433 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:58:07.626 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/verification/detail/2
2025-05-12 22:58:07.627 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:58:07.627 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:58:20.287 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/verification/education/all
2025-05-12 22:58:20.288 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:58:20.288 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:58:22.634 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/verification/detail/3
2025-05-12 22:58:22.635 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:58:22.635 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:58:25.908 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/ai-config
2025-05-12 22:58:25.908 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 22:58:25.908 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:58:25.909 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:58:25.908 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 22:58:25.966 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 22:58:53.411  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:58:53.411  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 设置为在线状态
2025-05-12 22:58:53.411 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户58活动状态
2025-05-12 22:58:57.943  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 用户 58 的WebSocket连接已关闭: CloseStatus[code=1000, reason=User logout]
2025-05-12 22:59:07.256 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/login
2025-05-12 22:59:07.257  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.AuthController     : 开始处理用户登录请求: user5
2025-05-12 22:59:07.332  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.AuthController     : 用户登录成功: user5
2025-05-12 22:59:07.338 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:59:07.338 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:07.338 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:07.339 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:59:07.339 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1725778374 wrapping com.mysql.cj.jdbc.ConnectionImpl@58365e45] for JDBC transaction
2025-05-12 22:59:07.339 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1725778374 wrapping com.mysql.cj.jdbc.ConnectionImpl@58365e45] to manual commit
2025-05-12 22:59:07.340 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:59:07.340 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1725778374 wrapping com.mysql.cj.jdbc.ConnectionImpl@58365e45]
2025-05-12 22:59:07.341 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1725778374 wrapping com.mysql.cj.jdbc.ConnectionImpl@58365e45] after transaction
2025-05-12 22:59:07.352 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/basic
2025-05-12 22:59:07.352 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/ai/history
2025-05-12 22:59:07.352 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:07.352 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:07.352 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:07.352 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:07.353 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.updateUserBasicInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-12 22:59:07.354 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@383214289 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] for JDBC transaction
2025-05-12 22:59:07.354 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@383214289 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] to manual commit
2025-05-12 22:59:07.356 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:59:07.357 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:07.357 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:07.357 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:59:07.362 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:59:07.362 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@383214289 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605]
2025-05-12 22:59:07.362 DEBUG 55640 --- [http-nio-8080-exec-7] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@383214289 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ed6e605] after transaction
2025-05-12 22:59:07.422 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:59:07.423  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc0NywidXNlcklkIjo0Nn0.-95_6UKZm33DEEOJgiO5LVHNS-dNOiDVbDNH0tejZt4UmUyl9LoZoa-lXGM-5u8bmPQdzlPbfOpvB0H7_aIFrw&userId=46, Path=/ws/chat
2025-05-12 22:59:07.423  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc0NywidXNlcklkIjo0Nn0.-95_6UKZm33DEEOJgiO5LVHNS-dNOiDVbDNH0tejZt4UmUyl9LoZoa-lXGM-5u8bmPQdzlPbfOpvB0H7_aIFrw&userId=46
2025-05-12 22:59:07.423 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc0NywidXNlcklkIjo0Nn0.-95_6UKZm33DEEOJgiO5LVHNS-dNOiDVbDNH0tejZt4UmUyl9LoZoa-lXGM-5u8bmPQdzlPbfOpvB0H7_aIFrw
2025-05-12 22:59:07.423 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 46
2025-05-12 22:59:07.423  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=46, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc0NywidXNlcklkIjo0Nn0.-95_6UKZm33DEEOJgiO5LVHNS-dNOiDVbDNH0tejZt4UmUyl9LoZoa-lXGM-5u8bmPQdzlPbfOpvB0H7_aIFrw}
2025-05-12 22:59:07.424  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=46
2025-05-12 22:59:07.424  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:59:07.424  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 46
2025-05-12 22:59:07.424 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:59:07.424 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747666747, userId=46}
2025-05-12 22:59:07.424 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 46
2025-05-12 22:59:07.424 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 46
2025-05-12 22:59:07.424  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 46
2025-05-12 22:59:07.424 ERROR 55640 --- [http-nio-8080-exec-2] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:59:07.424  WARN 55640 --- [http-nio-8080-exec-2] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:59:07.426  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 46
2025-05-12 22:59:07.427  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: 8971ef84-6308-5989-eb8f-c5609ce9f021, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc0NywidXNlcklkIjo0Nn0.-95_6UKZm33DEEOJgiO5LVHNS-dNOiDVbDNH0tejZt4UmUyl9LoZoa-lXGM-5u8bmPQdzlPbfOpvB0H7_aIFrw&userId=46
2025-05-12 22:59:07.428  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 46
2025-05-12 22:59:07.428  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 用户 46 的WebSocket连接已建立
2025-05-12 22:59:07.428  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 用户 46 已注册WebSocket会话: 8971ef84-6308-5989-eb8f-c5609ce9f021
2025-05-12 22:59:07.468  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc0NywidXNlcklkIjo0Nn0.-95_6UKZm33DEEOJgiO5LVHNS-dNOiDVbDNH0tejZt4UmUyl9LoZoa-lXGM-5u8bmPQdzlPbfOpvB0H7_aIFrw","userId":46}
2025-05-12 22:59:07.469  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 22:59:07.469 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 22:59:07.493 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:59:07.494 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:07.494 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:07.495  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 58 会话已断开或状态超时，清除过期的在线状态
2025-05-12 22:59:07.496 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:59:07.497 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:07.497 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:07.498  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.controller.UserMatchController     : 用户 46 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:59:07.627 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:59:07.628 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:07.628 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:07.785 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:59:07.785 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:07.786 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:07.790  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.controller.UserMatchController     : 用户 46 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:59:07.955 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:59:07.956 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:07.956 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:09.283 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:59:09.284 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:09.284 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:09.284 DEBUG 55640 --- [http-nio-8080-exec-2] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:59:09.284 DEBUG 55640 --- [http-nio-8080-exec-2] com.soical.server.util.UserUtils         : principal是Long类型: 46
2025-05-12 22:59:09.285  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 46
2025-05-12 22:59:09.287  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.impl.ConversationServiceImpl     : 查询到 7 个会话
2025-05-12 22:59:09.293 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:59:09.294 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:09.294 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:09.303  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 22:59:09.309  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 22:59:09.309 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 22:59:09.341 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/43
2025-05-12 22:59:09.342 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:09.342 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:09.372 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/52
2025-05-12 22:59:09.372 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:09.372 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:09.393 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 22:59:09.394 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:09.394 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:09.394 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/51
2025-05-12 22:59:09.394 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/43
2025-05-12 22:59:09.395 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:09.395 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:09.395 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:09.395 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:09.396  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 43 在线状态: 离线
2025-05-12 22:59:09.396  INFO 55640 --- [http-nio-8080-exec-1] c.s.server.controller.UserController     : 用户 51 在线状态: 离线
2025-05-12 22:59:09.396  INFO 55640 --- [http-nio-8080-exec-8] c.s.server.controller.UserController     : 用户 42 在线状态: 离线
2025-05-12 22:59:09.400 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/47
2025-05-12 22:59:09.401 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/45
2025-05-12 22:59:09.401 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:09.401 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:09.401 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:09.401 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:09.402  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.UserController     : 用户 45 在线状态: 离线
2025-05-12 22:59:09.402  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.UserController     : 用户 47 在线状态: 离线
2025-05-12 22:59:09.407 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/49
2025-05-12 22:59:09.407 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/52
2025-05-12 22:59:09.407 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:09.407 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:09.408 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:09.408 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:09.408  INFO 55640 --- [http-nio-8080-exec-2] c.s.server.controller.UserController     : 用户 52 在线状态: 离线
2025-05-12 22:59:09.408  INFO 55640 --- [http-nio-8080-exec-7] c.s.server.controller.UserController     : 用户 49 在线状态: 离线
2025-05-12 22:59:18.032  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 22:59:18.033  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 22:59:18.033 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 22:59:19.404 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/login
2025-05-12 22:59:19.405  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.controller.AuthController     : 开始处理用户登录请求: user1
2025-05-12 22:59:19.474  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.controller.AuthController     : 用户登录成功: user1
2025-05-12 22:59:19.482 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 22:59:19.483 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 22:59:19.483 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 22:59:19.483 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 22:59:19.483 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@312744413 wrapping com.mysql.cj.jdbc.ConnectionImpl@58365e45] for JDBC transaction
2025-05-12 22:59:19.483 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@312744413 wrapping com.mysql.cj.jdbc.ConnectionImpl@58365e45] to manual commit
2025-05-12 22:59:19.484 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:59:19.484 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@312744413 wrapping com.mysql.cj.jdbc.ConnectionImpl@58365e45]
2025-05-12 22:59:19.485 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@312744413 wrapping com.mysql.cj.jdbc.ConnectionImpl@58365e45] after transaction
2025-05-12 22:59:19.497 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/basic
2025-05-12 22:59:19.497 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 22:59:19.498 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 22:59:19.498 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.updateUserBasicInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-12 22:59:19.498 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1505770883 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] for JDBC transaction
2025-05-12 22:59:19.498 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1505770883 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] to manual commit
2025-05-12 22:59:19.501 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:59:19.502 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 22:59:19.503 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 22:59:19.504 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 22:59:19.505 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:59:19.505 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1505770883 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd]
2025-05-12 22:59:19.505 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1505770883 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] after transaction
2025-05-12 22:59:19.511 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 22:59:19.512  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc1OSwidXNlcklkIjo0Mn0.ZxatG30TRR8ecypZ-mwX_uS8wkNaeiBb6g6m-nCits-kDq6FUoOgjFLHgLQSroCNJXRCmie3K-wzSN5FhFedSA&userId=42, Path=/ws/chat
2025-05-12 22:59:19.512  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc1OSwidXNlcklkIjo0Mn0.ZxatG30TRR8ecypZ-mwX_uS8wkNaeiBb6g6m-nCits-kDq6FUoOgjFLHgLQSroCNJXRCmie3K-wzSN5FhFedSA&userId=42
2025-05-12 22:59:19.512 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc1OSwidXNlcklkIjo0Mn0.ZxatG30TRR8ecypZ-mwX_uS8wkNaeiBb6g6m-nCits-kDq6FUoOgjFLHgLQSroCNJXRCmie3K-wzSN5FhFedSA
2025-05-12 22:59:19.512 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 42
2025-05-12 22:59:19.512  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=42, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc1OSwidXNlcklkIjo0Mn0.ZxatG30TRR8ecypZ-mwX_uS8wkNaeiBb6g6m-nCits-kDq6FUoOgjFLHgLQSroCNJXRCmie3K-wzSN5FhFedSA}
2025-05-12 22:59:19.512  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=42
2025-05-12 22:59:19.512  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:59:19.512  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 42
2025-05-12 22:59:19.512 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 22:59:19.512 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747666759, userId=42}
2025-05-12 22:59:19.512 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 42
2025-05-12 22:59:19.513 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 42
2025-05-12 22:59:19.513  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 42
2025-05-12 22:59:19.513 ERROR 55640 --- [http-nio-8080-exec-7] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 22:59:19.513  WARN 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 22:59:19.514  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 42
2025-05-12 22:59:19.515  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: a8b4e7a4-20dd-ba3b-d907-1edcd16aa68f, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc1OSwidXNlcklkIjo0Mn0.ZxatG30TRR8ecypZ-mwX_uS8wkNaeiBb6g6m-nCits-kDq6FUoOgjFLHgLQSroCNJXRCmie3K-wzSN5FhFedSA&userId=42
2025-05-12 22:59:19.516  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 42
2025-05-12 22:59:19.516  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 用户 42 的WebSocket连接已建立
2025-05-12 22:59:19.516  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 用户 42 已注册WebSocket会话: a8b4e7a4-20dd-ba3b-d907-1edcd16aa68f
2025-05-12 22:59:19.519  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc1OSwidXNlcklkIjo0Mn0.ZxatG30TRR8ecypZ-mwX_uS8wkNaeiBb6g6m-nCits-kDq6FUoOgjFLHgLQSroCNJXRCmie3K-wzSN5FhFedSA","userId":42}
2025-05-12 22:59:19.519  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 22:59:19.519 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 22:59:19.573 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:59:19.574 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 22:59:19.574 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 22:59:19.574  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.controller.UserMatchController     : 用户 42 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:59:19.692 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:59:19.693 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 22:59:19.693 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 22:59:20.009 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 22:59:20.009 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 22:59:20.009 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 22:59:20.010  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.controller.UserMatchController     : 用户 42 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 22:59:20.221 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 22:59:20.222 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 22:59:20.222 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 22:59:21.698 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:59:21.699 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:59:21.699 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 22:59:21.699 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 22:59:21.699 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 22:59:21.699 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 22:59:21.700 DEBUG 55640 --- [http-nio-8080-exec-7] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:59:21.700 DEBUG 55640 --- [http-nio-8080-exec-7] com.soical.server.util.UserUtils         : principal是Long类型: 42
2025-05-12 22:59:21.700  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 42
2025-05-12 22:59:21.703  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.impl.ConversationServiceImpl     : 查询到 1 个会话
2025-05-12 22:59:21.711  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 22:59:21.711  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 22:59:21.712 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 22:59:21.758 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/46
2025-05-12 22:59:21.759 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 22:59:21.759 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 22:59:21.760  INFO 55640 --- [http-nio-8080-exec-1] c.s.server.controller.UserController     : 用户 46 在线状态: 在线
2025-05-12 22:59:28.026  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 22:59:28.027  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 22:59:28.027 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 22:59:29.523  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 22:59:29.525  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 22:59:29.525 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 22:59:31.367 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/13
2025-05-12 22:59:31.368 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:31.368 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:31.373  WARN 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.UserProfileServiceImpl      : 用户资料不存在: userId=13
2025-05-12 22:59:31.665 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 22:59:31.665 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:31.665 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:31.729 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 22:59:31.730 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:31.730 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:31.731  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 用户 42 在线状态: 在线
2025-05-12 22:59:32.739  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42]}
2025-05-12 22:59:32.740  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 22:59:32.741 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 22:59:32.845  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42]}
2025-05-12 22:59:32.846  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 22:59:32.846 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 22:59:33.244  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42]}
2025-05-12 22:59:33.246  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 22:59:33.246 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 22:59:37.432  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:59:37.433  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 22:59:37.433 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 22:59:37.433  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 22:59:37.433  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 22:59:37.434 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 22:59:38.323 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/send
2025-05-12 22:59:38.324 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:38.324 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:38.331 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:59:38.331 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : principal是Long类型: 46
2025-05-12 22:59:38.331  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.ChatController     : 接收到发送消息请求 - 发送者: 46, 接收者: 42, 内容: 你好
2025-05-12 22:59:38.333  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.ChatController     : 找到已存在会话，ID: 13
2025-05-12 22:59:38.333  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.ChatController     : 准备保存消息到数据库: conversation_id=13, sender_id=46, receiver_id=42, content=你好
2025-05-12 22:59:38.341  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.ChatController     : 消息直接SQL插入成功，ID: 48
2025-05-12 22:59:38.341 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.ConversationServiceImpl.updateConversation]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:59:38.341 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@402376360 wrapping com.mysql.cj.jdbc.ConnectionImpl@603ceca9] for JDBC transaction
2025-05-12 22:59:38.341 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@402376360 wrapping com.mysql.cj.jdbc.ConnectionImpl@603ceca9] to manual commit
2025-05-12 22:59:38.345  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 会话更新成功: 13
2025-05-12 22:59:38.345 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:59:38.346 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@402376360 wrapping com.mysql.cj.jdbc.ConnectionImpl@603ceca9]
2025-05-12 22:59:38.347 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@402376360 wrapping com.mysql.cj.jdbc.ConnectionImpl@603ceca9] after transaction
2025-05-12 22:59:38.347  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.ChatController     : 会话更新成功
2025-05-12 22:59:38.353  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.ChatMessageQueueServiceImpl    : 消息已发布到Redis通道: soical:chat:user:42
2025-05-12 22:59:38.353  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.ChatController     : 消息已发布到Redis: 48
2025-05-12 22:59:38.353  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ChatMessageServiceImpl      : 获取消息详情，ID: 48
2025-05-12 22:59:38.355  INFO 55640 --- [redisMessageListenerContainer-1] sageQueueServiceImpl$ChatMessageListener : 收到Redis消息，通道: soical:chat:user:42
2025-05-12 22:59:38.355 DEBUG 55640 --- [redisMessageListenerContainer-1] sageQueueServiceImpl$ChatMessageListener : 消息内容: "{\"messageId\":48,\"conversationId\":13,\"senderId\":46,\"receiverId\":42,\"content\":\"你好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:38.309+00:00\",\"senderName\":null,\"senderAvatar\":null}"
2025-05-12 22:59:38.355  INFO 55640 --- [redisMessageListenerContainer-2] sageQueueServiceImpl$ChatMessageListener : 收到Redis消息，通道: soical:chat:user:42
2025-05-12 22:59:38.355 DEBUG 55640 --- [redisMessageListenerContainer-2] sageQueueServiceImpl$ChatMessageListener : 消息内容: "{\"messageId\":48,\"conversationId\":13,\"senderId\":46,\"receiverId\":42,\"content\":\"你好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:38.309+00:00\",\"senderName\":null,\"senderAvatar\":null}"
2025-05-12 22:59:38.357 DEBUG 55640 --- [redisMessageListenerContainer-1] sageQueueServiceImpl$ChatMessageListener : JSON直接反序列化失败: Cannot construct instance of `com.soical.server.entity.ChatMessage` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('{"messageId":48,"conversationId":13,"senderId":46,"receiverId":42,"content":"你好","messageType":1,"isRead":false,"createTime":"2025-05-12T14:59:38.309+00:00","senderName":null,"senderAvatar":null}')
 at [Source: (String)""{\"messageId\":48,\"conversationId\":13,\"senderId\":46,\"receiverId\":42,\"content\":\"你好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:38.309+00:00\",\"senderName\":null,\"senderAvatar\":null}""; line: 1, column: 1]
2025-05-12 22:59:38.357 DEBUG 55640 --- [redisMessageListenerContainer-2] sageQueueServiceImpl$ChatMessageListener : JSON直接反序列化失败: Cannot construct instance of `com.soical.server.entity.ChatMessage` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('{"messageId":48,"conversationId":13,"senderId":46,"receiverId":42,"content":"你好","messageType":1,"isRead":false,"createTime":"2025-05-12T14:59:38.309+00:00","senderName":null,"senderAvatar":null}')
 at [Source: (String)""{\"messageId\":48,\"conversationId\":13,\"senderId\":46,\"receiverId\":42,\"content\":\"你好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:38.309+00:00\",\"senderName\":null,\"senderAvatar\":null}""; line: 1, column: 1]
2025-05-12 22:59:38.359 DEBUG 55640 --- [redisMessageListenerContainer-1] sageQueueServiceImpl$ChatMessageListener : Map反序列化也失败: Cannot construct instance of `java.util.HashMap` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('{"messageId":48,"conversationId":13,"senderId":46,"receiverId":42,"content":"你好","messageType":1,"isRead":false,"createTime":"2025-05-12T14:59:38.309+00:00","senderName":null,"senderAvatar":null}')
 at [Source: (String)""{\"messageId\":48,\"conversationId\":13,\"senderId\":46,\"receiverId\":42,\"content\":\"你好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:38.309+00:00\",\"senderName\":null,\"senderAvatar\":null}""; line: 1, column: 1]
2025-05-12 22:59:38.359 DEBUG 55640 --- [redisMessageListenerContainer-2] sageQueueServiceImpl$ChatMessageListener : Map反序列化也失败: Cannot construct instance of `java.util.HashMap` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('{"messageId":48,"conversationId":13,"senderId":46,"receiverId":42,"content":"你好","messageType":1,"isRead":false,"createTime":"2025-05-12T14:59:38.309+00:00","senderName":null,"senderAvatar":null}')
 at [Source: (String)""{\"messageId\":48,\"conversationId\":13,\"senderId\":46,\"receiverId\":42,\"content\":\"你好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:38.309+00:00\",\"senderName\":null,\"senderAvatar\":null}""; line: 1, column: 1]
2025-05-12 22:59:38.360 ERROR 55640 --- [redisMessageListenerContainer-2] sageQueueServiceImpl$ChatMessageListener : 消息反序列化失败或缺少接收者ID
2025-05-12 22:59:38.360 DEBUG 55640 --- [redisMessageListenerContainer-2] sageQueueServiceImpl$ChatMessageListener : 异常详情: Cannot construct instance of `com.soical.server.entity.ChatMessage` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('{"messageId":48,"conversationId":13,"senderId":46,"receiverId":42,"content":"你好","messageType":1,"isRead":false,"createTime":"2025-05-12T14:59:38.309+00:00","senderName":null,"senderAvatar":null}')
 at [Source: (String)""{\"messageId\":48,\"conversationId\":13,\"senderId\":46,\"receiverId\":42,\"content\":\"你好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:38.309+00:00\",\"senderName\":null,\"senderAvatar\":null}""; line: 1, column: 1]
2025-05-12 22:59:38.359 ERROR 55640 --- [redisMessageListenerContainer-1] sageQueueServiceImpl$ChatMessageListener : 消息反序列化失败或缺少接收者ID
2025-05-12 22:59:38.360 DEBUG 55640 --- [redisMessageListenerContainer-1] sageQueueServiceImpl$ChatMessageListener : 异常详情: Cannot construct instance of `com.soical.server.entity.ChatMessage` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('{"messageId":48,"conversationId":13,"senderId":46,"receiverId":42,"content":"你好","messageType":1,"isRead":false,"createTime":"2025-05-12T14:59:38.309+00:00","senderName":null,"senderAvatar":null}')
 at [Source: (String)""{\"messageId\":48,\"conversationId\":13,\"senderId\":46,\"receiverId\":42,\"content\":\"你好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:38.309+00:00\",\"senderName\":null,\"senderAvatar\":null}""; line: 1, column: 1]
2025-05-12 22:59:40.025  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 22:59:40.027  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 22:59:40.027 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 22:59:42.291 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 22:59:42.292 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 22:59:42.292 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 22:59:42.318 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/46
2025-05-12 22:59:42.319 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 22:59:42.319 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 22:59:42.320  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 用户 46 在线状态: 在线
2025-05-12 22:59:43.344  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 22:59:43.345  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 22:59:43.345 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 22:59:43.444  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 22:59:43.445  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 22:59:43.445 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 22:59:43.846  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 22:59:43.848  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 22:59:43.848 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 22:59:48.035  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 22:59:48.036  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 22:59:48.036 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 22:59:49.527  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 22:59:49.527  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 22:59:49.527 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 22:59:49.528  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 22:59:49.528  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 22:59:49.529 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 22:59:50.832 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/send
2025-05-12 22:59:50.833 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 22:59:50.833 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 22:59:50.834 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:59:50.834 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : principal是Long类型: 42
2025-05-12 22:59:50.834  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.ChatController     : 接收到发送消息请求 - 发送者: 42, 接收者: 46, 内容: 你也好
2025-05-12 22:59:50.835  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.ChatController     : 找到已存在会话，ID: 13
2025-05-12 22:59:50.836  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.ChatController     : 准备保存消息到数据库: conversation_id=13, sender_id=42, receiver_id=46, content=你也好
2025-05-12 22:59:50.839  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.ChatController     : 消息直接SQL插入成功，ID: 49
2025-05-12 22:59:50.839 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.ConversationServiceImpl.updateConversation]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:59:50.839 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@108552300 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] for JDBC transaction
2025-05-12 22:59:50.839 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@108552300 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] to manual commit
2025-05-12 22:59:50.841  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ConversationServiceImpl     : 会话更新成功: 13
2025-05-12 22:59:50.841 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:59:50.841 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@108552300 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd]
2025-05-12 22:59:50.843 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@108552300 wrapping com.mysql.cj.jdbc.ConnectionImpl@3dfaf2fd] after transaction
2025-05-12 22:59:50.844  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.ChatController     : 会话更新成功
2025-05-12 22:59:50.846  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.ChatMessageQueueServiceImpl    : 消息已发布到Redis通道: soical:chat:user:46
2025-05-12 22:59:50.846  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.ChatController     : 消息已发布到Redis: 49
2025-05-12 22:59:50.846  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ChatMessageServiceImpl      : 获取消息详情，ID: 49
2025-05-12 22:59:50.849  INFO 55640 --- [redisMessageListenerContainer-3] sageQueueServiceImpl$ChatMessageListener : 收到Redis消息，通道: soical:chat:user:46
2025-05-12 22:59:50.850 DEBUG 55640 --- [redisMessageListenerContainer-3] sageQueueServiceImpl$ChatMessageListener : 消息内容: "{\"messageId\":49,\"conversationId\":13,\"senderId\":42,\"receiverId\":46,\"content\":\"你也好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:50.821+00:00\",\"senderName\":null,\"senderAvatar\":null}"
2025-05-12 22:59:50.850 DEBUG 55640 --- [redisMessageListenerContainer-3] sageQueueServiceImpl$ChatMessageListener : JSON直接反序列化失败: Cannot construct instance of `com.soical.server.entity.ChatMessage` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('{"messageId":49,"conversationId":13,"senderId":42,"receiverId":46,"content":"你也好","messageType":1,"isRead":false,"createTime":"2025-05-12T14:59:50.821+00:00","senderName":null,"senderAvatar":null}')
 at [Source: (String)""{\"messageId\":49,\"conversationId\":13,\"senderId\":42,\"receiverId\":46,\"content\":\"你也好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:50.821+00:00\",\"senderName\":null,\"senderAvatar\":null}""; line: 1, column: 1]
2025-05-12 22:59:50.850 DEBUG 55640 --- [redisMessageListenerContainer-3] sageQueueServiceImpl$ChatMessageListener : Map反序列化也失败: Cannot construct instance of `java.util.HashMap` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('{"messageId":49,"conversationId":13,"senderId":42,"receiverId":46,"content":"你也好","messageType":1,"isRead":false,"createTime":"2025-05-12T14:59:50.821+00:00","senderName":null,"senderAvatar":null}')
 at [Source: (String)""{\"messageId\":49,\"conversationId\":13,\"senderId\":42,\"receiverId\":46,\"content\":\"你也好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:50.821+00:00\",\"senderName\":null,\"senderAvatar\":null}""; line: 1, column: 1]
2025-05-12 22:59:50.851 ERROR 55640 --- [redisMessageListenerContainer-3] sageQueueServiceImpl$ChatMessageListener : 消息反序列化失败或缺少接收者ID
2025-05-12 22:59:50.851 DEBUG 55640 --- [redisMessageListenerContainer-3] sageQueueServiceImpl$ChatMessageListener : 异常详情: Cannot construct instance of `com.soical.server.entity.ChatMessage` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('{"messageId":49,"conversationId":13,"senderId":42,"receiverId":46,"content":"你也好","messageType":1,"isRead":false,"createTime":"2025-05-12T14:59:50.821+00:00","senderName":null,"senderAvatar":null}')
 at [Source: (String)""{\"messageId\":49,\"conversationId\":13,\"senderId\":42,\"receiverId\":46,\"content\":\"你也好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:50.821+00:00\",\"senderName\":null,\"senderAvatar\":null}""; line: 1, column: 1]
2025-05-12 22:59:50.852  INFO 55640 --- [redisMessageListenerContainer-4] sageQueueServiceImpl$ChatMessageListener : 收到Redis消息，通道: soical:chat:user:46
2025-05-12 22:59:50.852 DEBUG 55640 --- [redisMessageListenerContainer-4] sageQueueServiceImpl$ChatMessageListener : 消息内容: "{\"messageId\":49,\"conversationId\":13,\"senderId\":42,\"receiverId\":46,\"content\":\"你也好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:50.821+00:00\",\"senderName\":null,\"senderAvatar\":null}"
2025-05-12 22:59:50.852 DEBUG 55640 --- [redisMessageListenerContainer-4] sageQueueServiceImpl$ChatMessageListener : JSON直接反序列化失败: Cannot construct instance of `com.soical.server.entity.ChatMessage` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('{"messageId":49,"conversationId":13,"senderId":42,"receiverId":46,"content":"你也好","messageType":1,"isRead":false,"createTime":"2025-05-12T14:59:50.821+00:00","senderName":null,"senderAvatar":null}')
 at [Source: (String)""{\"messageId\":49,\"conversationId\":13,\"senderId\":42,\"receiverId\":46,\"content\":\"你也好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:50.821+00:00\",\"senderName\":null,\"senderAvatar\":null}""; line: 1, column: 1]
2025-05-12 22:59:50.853 DEBUG 55640 --- [redisMessageListenerContainer-4] sageQueueServiceImpl$ChatMessageListener : Map反序列化也失败: Cannot construct instance of `java.util.HashMap` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('{"messageId":49,"conversationId":13,"senderId":42,"receiverId":46,"content":"你也好","messageType":1,"isRead":false,"createTime":"2025-05-12T14:59:50.821+00:00","senderName":null,"senderAvatar":null}')
 at [Source: (String)""{\"messageId\":49,\"conversationId\":13,\"senderId\":42,\"receiverId\":46,\"content\":\"你也好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:50.821+00:00\",\"senderName\":null,\"senderAvatar\":null}""; line: 1, column: 1]
2025-05-12 22:59:50.853 ERROR 55640 --- [redisMessageListenerContainer-4] sageQueueServiceImpl$ChatMessageListener : 消息反序列化失败或缺少接收者ID
2025-05-12 22:59:50.853 DEBUG 55640 --- [redisMessageListenerContainer-4] sageQueueServiceImpl$ChatMessageListener : 异常详情: Cannot construct instance of `com.soical.server.entity.ChatMessage` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('{"messageId":49,"conversationId":13,"senderId":42,"receiverId":46,"content":"你也好","messageType":1,"isRead":false,"createTime":"2025-05-12T14:59:50.821+00:00","senderName":null,"senderAvatar":null}')
 at [Source: (String)""{\"messageId\":49,\"conversationId\":13,\"senderId\":42,\"receiverId\":46,\"content\":\"你也好\",\"messageType\":1,\"isRead\":false,\"createTime\":\"2025-05-12T14:59:50.821+00:00\",\"senderName\":null,\"senderAvatar\":null}""; line: 1, column: 1]
2025-05-12 22:59:55.295 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 22:59:55.296 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.297 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.295 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:59:55.301 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.301 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.302 DEBUG 55640 --- [http-nio-8080-exec-2] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:59:55.302 DEBUG 55640 --- [http-nio-8080-exec-2] com.soical.server.util.UserUtils         : principal是Long类型: 46
2025-05-12 22:59:55.302  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 46
2025-05-12 22:59:55.306  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.impl.ConversationServiceImpl     : 查询到 7 个会话
2025-05-12 22:59:55.321  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 22:59:55.323  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 22:59:55.324 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 22:59:55.354 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/43
2025-05-12 22:59:55.354 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.355 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.362 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/52
2025-05-12 22:59:55.363 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.363 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.376 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 22:59:55.376 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/43
2025-05-12 22:59:55.377 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.377 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.379 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.379  INFO 55640 --- [http-nio-8080-exec-8] c.s.server.controller.UserController     : 用户 43 在线状态: 离线
2025-05-12 22:59:55.379 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.380 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/51
2025-05-12 22:59:55.380 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/47
2025-05-12 22:59:55.381 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.381  INFO 55640 --- [http-nio-8080-exec-1] c.s.server.controller.UserController     : 用户 42 在线状态: 在线
2025-05-12 22:59:55.381 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.381 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.382 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.383  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 47 在线状态: 离线
2025-05-12 22:59:55.383 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/45
2025-05-12 22:59:55.384 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.384 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.384 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/49
2025-05-12 22:59:55.384  INFO 55640 --- [http-nio-8080-exec-1] c.s.server.controller.UserController     : 用户 45 在线状态: 离线
2025-05-12 22:59:55.384 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.386 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.385 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/52
2025-05-12 22:59:55.384  INFO 55640 --- [http-nio-8080-exec-8] c.s.server.controller.UserController     : 用户 51 在线状态: 离线
2025-05-12 22:59:55.387 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.388  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 49 在线状态: 离线
2025-05-12 22:59:55.388 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.389  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.UserController     : 用户 52 在线状态: 离线
2025-05-12 22:59:55.596 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 22:59:55.597 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.598 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.598 DEBUG 55640 --- [http-nio-8080-exec-4] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 22:59:55.599 DEBUG 55640 --- [http-nio-8080-exec-4] com.soical.server.util.UserUtils         : principal是Long类型: 46
2025-05-12 22:59:55.599  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 46
2025-05-12 22:59:55.603  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.impl.ConversationServiceImpl     : 查询到 7 个会话
2025-05-12 22:59:55.626  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 22:59:55.627  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 22:59:55.627 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 22:59:55.673 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/43
2025-05-12 22:59:55.673 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.673 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.703 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/52
2025-05-12 22:59:55.703 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.704 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.790 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/43
2025-05-12 22:59:55.791 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.791 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.791 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/51
2025-05-12 22:59:55.791 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.791 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.792  INFO 55640 --- [http-nio-8080-exec-7] c.s.server.controller.UserController     : 用户 43 在线状态: 离线
2025-05-12 22:59:55.793  INFO 55640 --- [http-nio-8080-exec-2] c.s.server.controller.UserController     : 用户 51 在线状态: 离线
2025-05-12 22:59:55.795 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/47
2025-05-12 22:59:55.795 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/45
2025-05-12 22:59:55.795 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.795 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.797  INFO 55640 --- [http-nio-8080-exec-7] c.s.server.controller.UserController     : 用户 47 在线状态: 离线
2025-05-12 22:59:55.798 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/49
2025-05-12 22:59:55.790 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 22:59:55.799 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.799 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.801  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.UserController     : 用户 42 在线状态: 在线
2025-05-12 22:59:55.798 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.802 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.803  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 49 在线状态: 离线
2025-05-12 22:59:55.795 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.798 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/52
2025-05-12 22:59:55.804 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.804 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:55.804 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:55.805  INFO 55640 --- [http-nio-8080-exec-2] c.s.server.controller.UserController     : 用户 45 在线状态: 离线
2025-05-12 22:59:55.805  INFO 55640 --- [http-nio-8080-exec-8] c.s.server.controller.UserController     : 用户 52 在线状态: 离线
2025-05-12 22:59:56.745 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/read
2025-05-12 22:59:56.746 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:56.746 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:56.747 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.ChatMessageServiceImpl.markMessagesAsRead]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-java.lang.Exception
2025-05-12 22:59:56.747 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@741864858 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c4357e9] for JDBC transaction
2025-05-12 22:59:56.747 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@741864858 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c4357e9] to manual commit
2025-05-12 22:59:56.749 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 22:59:56.752 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 22:59:56.752 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@741864858 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c4357e9]
2025-05-12 22:59:56.755 DEBUG 55640 --- [http-nio-8080-exec-3] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@741864858 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c4357e9] after transaction
2025-05-12 22:59:56.781 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/13
2025-05-12 22:59:56.781 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:56.781 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 22:59:56.781 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:56.781 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 22:59:56.781 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 22:59:56.786  WARN 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.UserProfileServiceImpl      : 用户资料不存在: userId=13
2025-05-12 22:59:57.431  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 22:59:57.432  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 22:59:57.432 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 22:59:59.534  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 22:59:59.536  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 22:59:59.536 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:00:01.917 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:00:01.917 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 23:00:01.918 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:01.918 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:01.918 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:01.919 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:01.919 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:00:01.919 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : principal是Long类型: 46
2025-05-12 23:00:01.919  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 46
2025-05-12 23:00:01.922  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ConversationServiceImpl     : 查询到 7 个会话
2025-05-12 23:00:01.928  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:00:01.930  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:00:01.930 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:00:01.973 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/43
2025-05-12 23:00:01.973 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:01.974 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:01.989 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/52
2025-05-12 23:00:01.989 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:01.990 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.009 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 23:00:02.009 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/43
2025-05-12 23:00:02.009 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.010 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.010 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.010 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.010  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.controller.UserController     : 用户 42 在线状态: 在线
2025-05-12 23:00:02.011  INFO 55640 --- [http-nio-8080-exec-1] c.s.server.controller.UserController     : 用户 43 在线状态: 离线
2025-05-12 23:00:02.011 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/51
2025-05-12 23:00:02.011 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/47
2025-05-12 23:00:02.011 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.012 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.012 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.012 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.012  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 用户 47 在线状态: 离线
2025-05-12 23:00:02.014 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/45
2025-05-12 23:00:02.014 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.014 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.012  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.UserController     : 用户 51 在线状态: 离线
2025-05-12 23:00:02.015 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/49
2025-05-12 23:00:02.016  INFO 55640 --- [http-nio-8080-exec-7] c.s.server.controller.UserController     : 用户 45 在线状态: 离线
2025-05-12 23:00:02.017 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/52
2025-05-12 23:00:02.016 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.017 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.017 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.017 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.019  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.UserController     : 用户 52 在线状态: 离线
2025-05-12 23:00:02.019  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 49 在线状态: 离线
2025-05-12 23:00:02.190 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:00:02.191 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.191 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.191 DEBUG 55640 --- [http-nio-8080-exec-2] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:00:02.191 DEBUG 55640 --- [http-nio-8080-exec-2] com.soical.server.util.UserUtils         : principal是Long类型: 46
2025-05-12 23:00:02.191  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 46
2025-05-12 23:00:02.192  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.impl.ConversationServiceImpl     : 查询到 7 个会话
2025-05-12 23:00:02.199  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:00:02.200  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:00:02.200 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:00:02.225 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/43
2025-05-12 23:00:02.225 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.225 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.245 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/52
2025-05-12 23:00:02.245 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.245 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.263 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 23:00:02.265 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.266 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/43
2025-05-12 23:00:02.266 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.266 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.266 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.266  INFO 55640 --- [http-nio-8080-exec-1] c.s.server.controller.UserController     : 用户 42 在线状态: 在线
2025-05-12 23:00:02.269 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/47
2025-05-12 23:00:02.269 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/51
2025-05-12 23:00:02.270 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.270 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.270 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.270 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/45
2025-05-12 23:00:02.267  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 用户 43 在线状态: 离线
2025-05-12 23:00:02.270 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.270 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.270  INFO 55640 --- [http-nio-8080-exec-1] c.s.server.controller.UserController     : 用户 47 在线状态: 离线
2025-05-12 23:00:02.271  INFO 55640 --- [http-nio-8080-exec-7] c.s.server.controller.UserController     : 用户 45 在线状态: 离线
2025-05-12 23:00:02.272 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/49
2025-05-12 23:00:02.272 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.272 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.272 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/52
2025-05-12 23:00:02.273 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:02.273  INFO 55640 --- [http-nio-8080-exec-1] c.s.server.controller.UserController     : 用户 49 在线状态: 离线
2025-05-12 23:00:02.273 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.274  INFO 55640 --- [http-nio-8080-exec-7] c.s.server.controller.UserController     : 用户 52 在线状态: 离线
2025-05-12 23:00:02.270 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:02.286  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.UserController     : 用户 51 在线状态: 离线
2025-05-12 23:00:02.340 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:00:02.341 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:02.341 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:07.437  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:00:07.438  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:00:07.438 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:00:07.438  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:00:07.439  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:00:07.439 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:00:10.025  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:00:10.026  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:00:10.026 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:00:17.439  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:00:17.441  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:00:17.442 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:00:20.020 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/13
2025-05-12 23:00:20.021 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:00:20.021 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:20.021 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:20.021 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:20.022 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:20.024  WARN 55640 --- [http-nio-8080-exec-4] c.s.s.s.impl.UserProfileServiceImpl      : 用户资料不存在: userId=13
2025-05-12 23:00:20.029  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:00:20.030  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:00:20.030 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:00:20.031  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:00:20.032  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:00:20.032 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:00:27.439  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:00:27.441  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:00:27.441 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:00:30.032  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:00:30.033  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:00:30.033 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:00:31.741 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:00:31.741 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:31.741 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:37.445  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:00:37.445  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:00:37.445 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:00:37.446  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:00:37.446  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:00:37.446 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:00:40.031  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:00:40.032  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:00:40.033 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:00:43.205 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:00:43.206 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.206 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 23:00:43.206 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.206 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.206 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.207 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:00:43.207 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : principal是Long类型: 46
2025-05-12 23:00:43.207  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 46
2025-05-12 23:00:43.213  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 查询到 7 个会话
2025-05-12 23:00:43.220  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:00:43.221  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:00:43.222 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:00:43.244 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/43
2025-05-12 23:00:43.245 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.245 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.271 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/52
2025-05-12 23:00:43.271 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.271 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.287 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 23:00:43.288 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/51
2025-05-12 23:00:43.288 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.288 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.288 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/45
2025-05-12 23:00:43.287 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/43
2025-05-12 23:00:43.288 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.288 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.288 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.288 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.288  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.UserController     : 用户 42 在线状态: 在线
2025-05-12 23:00:43.289  INFO 55640 --- [http-nio-8080-exec-8] c.s.server.controller.UserController     : 用户 43 在线状态: 离线
2025-05-12 23:00:43.290 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/49
2025-05-12 23:00:43.290  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 45 在线状态: 离线
2025-05-12 23:00:43.291 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.288 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/47
2025-05-12 23:00:43.292 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.292 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.292 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.292 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/52
2025-05-12 23:00:43.293  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.controller.UserController     : 用户 47 在线状态: 离线
2025-05-12 23:00:43.288 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.294 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.293  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.UserController     : 用户 49 在线状态: 离线
2025-05-12 23:00:43.295  INFO 55640 --- [http-nio-8080-exec-9] c.s.server.controller.UserController     : 用户 51 在线状态: 离线
2025-05-12 23:00:43.293 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.297 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.298  INFO 55640 --- [http-nio-8080-exec-1] c.s.server.controller.UserController     : 用户 52 在线状态: 离线
2025-05-12 23:00:43.505 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:00:43.505 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.505 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.505 DEBUG 55640 --- [http-nio-8080-exec-7] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:00:43.505 DEBUG 55640 --- [http-nio-8080-exec-7] com.soical.server.util.UserUtils         : principal是Long类型: 46
2025-05-12 23:00:43.505  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 46
2025-05-12 23:00:43.508  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.impl.ConversationServiceImpl     : 查询到 7 个会话
2025-05-12 23:00:43.513  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:00:43.514  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:00:43.514 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:00:43.542 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/43
2025-05-12 23:00:43.543 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.543 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.559 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/52
2025-05-12 23:00:43.559 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.559 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.578 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 23:00:43.579 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/51
2025-05-12 23:00:43.579 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/43
2025-05-12 23:00:43.579 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.579 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.579 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.580 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.580 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.580 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.580  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 用户 42 在线状态: 在线
2025-05-12 23:00:43.580  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 43 在线状态: 离线
2025-05-12 23:00:43.581  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.controller.UserController     : 用户 51 在线状态: 离线
2025-05-12 23:00:43.582 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/45
2025-05-12 23:00:43.582 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/47
2025-05-12 23:00:43.582 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.582 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.582 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.583 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.585  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.controller.UserController     : 用户 45 在线状态: 离线
2025-05-12 23:00:43.585  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 47 在线状态: 离线
2025-05-12 23:00:43.586 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/52
2025-05-12 23:00:43.587 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.587 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.591  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.controller.UserController     : 用户 52 在线状态: 离线
2025-05-12 23:00:43.593 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/49
2025-05-12 23:00:43.594 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:43.594 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:43.595  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 用户 49 在线状态: 离线
2025-05-12 23:00:45.948 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:00:45.949 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:45.949 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:45.949 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:00:45.949 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : principal是Long类型: 42
2025-05-12 23:00:45.949  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 42
2025-05-12 23:00:45.954  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ConversationServiceImpl     : 查询到 1 个会话
2025-05-12 23:00:45.956 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 23:00:45.957 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:45.957 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:45.961  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:00:45.962  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:00:45.962 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:00:45.990 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/46
2025-05-12 23:00:45.990 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:45.990 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:45.991  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 46 在线状态: 在线
2025-05-12 23:00:46.223 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:00:46.223 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:46.223 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:46.223 DEBUG 55640 --- [http-nio-8080-exec-3] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:00:46.223 DEBUG 55640 --- [http-nio-8080-exec-3] com.soical.server.util.UserUtils         : principal是Long类型: 42
2025-05-12 23:00:46.223  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 42
2025-05-12 23:00:46.225  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.impl.ConversationServiceImpl     : 查询到 1 个会话
2025-05-12 23:00:46.228  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:00:46.230  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:00:46.230 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:00:46.245 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/46
2025-05-12 23:00:46.245 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:46.245 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:46.246  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.UserController     : 用户 46 在线状态: 在线
2025-05-12 23:00:46.992 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:00:46.993 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:46.993 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:48.027  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:00:48.028  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:00:48.029 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:00:49.520  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:00:49.521  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:00:49.521 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:00:49.521  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:00:49.522  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:00:49.522 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:00:51.578  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 用户 42 的WebSocket连接已关闭: CloseStatus[code=1001, reason=null]
2025-05-12 23:00:51.729 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 23:00:51.730 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:51.730 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:51.730 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 23:00:51.730 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@2040242137 wrapping com.mysql.cj.jdbc.ConnectionImpl@58365e45] for JDBC transaction
2025-05-12 23:00:51.731 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@2040242137 wrapping com.mysql.cj.jdbc.ConnectionImpl@58365e45] to manual commit
2025-05-12 23:00:51.732 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 23:00:51.732 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@2040242137 wrapping com.mysql.cj.jdbc.ConnectionImpl@58365e45]
2025-05-12 23:00:51.732 DEBUG 55640 --- [http-nio-8080-exec-8] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@2040242137 wrapping com.mysql.cj.jdbc.ConnectionImpl@58365e45] after transaction
2025-05-12 23:00:51.820 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 23:00:51.821 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:51.821 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:51.888 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:00:51.889 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:51.889 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:51.889 DEBUG 55640 --- [http-nio-8080-exec-3] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:00:51.889 DEBUG 55640 --- [http-nio-8080-exec-3] com.soical.server.util.UserUtils         : principal是Long类型: 42
2025-05-12 23:00:51.889  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 42
2025-05-12 23:00:51.891  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.impl.ConversationServiceImpl     : 查询到 1 个会话
2025-05-12 23:00:51.917 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:00:51.917 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:51.918 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:51.963 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/46
2025-05-12 23:00:51.963 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:51.964 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:51.965  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.UserController     : 用户 46 在线状态: 在线
2025-05-12 23:00:53.626 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:00:53.626 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:53.626 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:53.626 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 23:00:53.627 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:53.630 DEBUG 55640 --- [http-nio-8080-exec-9] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:00:53.630 DEBUG 55640 --- [http-nio-8080-exec-9] com.soical.server.util.UserUtils         : principal是Long类型: 42
2025-05-12 23:00:53.630  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 42
2025-05-12 23:00:53.630 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:53.633  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.impl.ConversationServiceImpl     : 查询到 1 个会话
2025-05-12 23:00:53.633 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:00:53.635 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:53.635 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:53.636 DEBUG 55640 --- [http-nio-8080-exec-7] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:00:53.636 DEBUG 55640 --- [http-nio-8080-exec-7] com.soical.server.util.UserUtils         : principal是Long类型: 42
2025-05-12 23:00:53.636  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 42
2025-05-12 23:00:53.638  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.impl.ConversationServiceImpl     : 查询到 1 个会话
2025-05-12 23:00:53.663 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/46
2025-05-12 23:00:53.663 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:53.663 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:53.664  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.UserController     : 用户 46 在线状态: 在线
2025-05-12 23:00:53.675 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/46
2025-05-12 23:00:53.675 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:53.675 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:53.676  INFO 55640 --- [http-nio-8080-exec-2] c.s.server.controller.UserController     : 用户 46 在线状态: 在线
2025-05-12 23:00:55.319 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:00:55.321 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:00:55.323 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:00:57.440  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:00:57.442  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:00:57.442 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:00:57.701  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 用户 46 的WebSocket连接已关闭: CloseStatus[code=1001, reason=null]
2025-05-12 23:00:57.869 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 23:00:57.869 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:57.870 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:57.870 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 23:00:57.870 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@799451180 wrapping com.mysql.cj.jdbc.ConnectionImpl@603ceca9] for JDBC transaction
2025-05-12 23:00:57.871 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@799451180 wrapping com.mysql.cj.jdbc.ConnectionImpl@603ceca9] to manual commit
2025-05-12 23:00:57.872 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 23:00:57.872 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@799451180 wrapping com.mysql.cj.jdbc.ConnectionImpl@603ceca9]
2025-05-12 23:00:57.872 DEBUG 55640 --- [http-nio-8080-exec-5] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@799451180 wrapping com.mysql.cj.jdbc.ConnectionImpl@603ceca9] after transaction
2025-05-12 23:00:57.937 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 23:00:57.937 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:57.938 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.003 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:00:58.004 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 23:00:58.004 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.004 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.004 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.004 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.004 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:00:58.005 DEBUG 55640 --- [http-nio-8080-exec-1] com.soical.server.util.UserUtils         : principal是Long类型: 46
2025-05-12 23:00:58.005  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 46
2025-05-12 23:00:58.005 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:00:58.005 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.005 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.006 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:00:58.008 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : principal是Long类型: 46
2025-05-12 23:00:58.008  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 46
2025-05-12 23:00:58.009  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.ConversationServiceImpl     : 查询到 7 个会话
2025-05-12 23:00:58.011  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ConversationServiceImpl     : 查询到 7 个会话
2025-05-12 23:00:58.055 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/43
2025-05-12 23:00:58.056 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.056 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.061 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/43
2025-05-12 23:00:58.062 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.062 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.068 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/52
2025-05-12 23:00:58.069 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.069 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.077 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/52
2025-05-12 23:00:58.077 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.078 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.094 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 23:00:58.095 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.096 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.096 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/43
2025-05-12 23:00:58.096 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/51
2025-05-12 23:00:58.096 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.096  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 用户 42 在线状态: 在线
2025-05-12 23:00:58.097 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.099  INFO 55640 --- [http-nio-8080-exec-9] c.s.server.controller.UserController     : 用户 51 在线状态: 离线
2025-05-12 23:00:58.100 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/45
2025-05-12 23:00:58.096 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.100 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/49
2025-05-12 23:00:58.100 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.101 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/52
2025-05-12 23:00:58.101  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.UserController     : 用户 43 在线状态: 离线
2025-05-12 23:00:58.100 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/47
2025-05-12 23:00:58.102 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.102 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.103 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.102 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.104  INFO 55640 --- [http-nio-8080-exec-9] c.s.server.controller.UserController     : 用户 52 在线状态: 离线
2025-05-12 23:00:58.105  INFO 55640 --- [http-nio-8080-exec-1] c.s.server.controller.UserController     : 用户 47 在线状态: 离线
2025-05-12 23:00:58.100 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.107 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.100 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.109  INFO 55640 --- [http-nio-8080-exec-7] c.s.server.controller.UserController     : 用户 45 在线状态: 离线
2025-05-12 23:00:58.109 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.110  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 用户 49 在线状态: 离线
2025-05-12 23:00:58.110 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 23:00:58.110 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.111 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.111 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/43
2025-05-12 23:00:58.111 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.111  INFO 55640 --- [http-nio-8080-exec-7] c.s.server.controller.UserController     : 用户 42 在线状态: 在线
2025-05-12 23:00:58.111 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.112  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 用户 43 在线状态: 离线
2025-05-12 23:00:58.112 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/51
2025-05-12 23:00:58.112 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.113 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.113  INFO 55640 --- [http-nio-8080-exec-7] c.s.server.controller.UserController     : 用户 51 在线状态: 离线
2025-05-12 23:00:58.114 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/47
2025-05-12 23:00:58.114 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/49
2025-05-12 23:00:58.114 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/45
2025-05-12 23:00:58.114 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.115 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.115 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.115 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.116  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 47 在线状态: 离线
2025-05-12 23:00:58.116  INFO 55640 --- [http-nio-8080-exec-7] c.s.server.controller.UserController     : 用户 49 在线状态: 离线
2025-05-12 23:00:58.117 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/52
2025-05-12 23:00:58.117 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.118 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.118  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 52 在线状态: 离线
2025-05-12 23:00:58.120 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:58.121 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:58.123  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 用户 45 在线状态: 离线
2025-05-12 23:00:59.509 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:00:59.509 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:59.509 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:59.533 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 23:00:59.534 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:00:59.534 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:00:59.534  INFO 55640 --- [http-nio-8080-exec-8] c.s.server.controller.UserController     : 用户 42 在线状态: 在线
2025-05-12 23:01:13.948 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/user/17
2025-05-12 23:01:13.948 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:01:13.948 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:01:13.951 ERROR 55640 --- [http-nio-8080-exec-3] c.s.s.common.GlobalExceptionHandler      : 业务异常

com.soical.server.common.BusinessException: 用户不存在
	at com.soical.server.service.impl.AdminUserServiceImpl.getUserDetail(AdminUserServiceImpl.java:149) ~[classes/:na]
	at com.soical.server.service.impl.AdminUserServiceImpl$$FastClassBySpringCGLIB$$559add65.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.20.jar:5.3.20]
	at com.soical.server.service.impl.AdminUserServiceImpl$$EnhancerBySpringCGLIB$$3bd3727a.getUserDetail(<generated>) ~[classes/:na]
	at com.soical.server.controller.AdminUserController.getUserDetail(AdminUserController.java:50) ~[classes/:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilterInternal(AuthorizationFilter.java:73) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at com.soical.server.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:92) [classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) [spring-security-web-5.7.1.jar:5.7.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.lang.Thread.run(Thread.java:748) [na:1.8.0_202]

2025-05-12 23:01:51.850 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 23:01:51.851  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc1OSwidXNlcklkIjo0Mn0.ZxatG30TRR8ecypZ-mwX_uS8wkNaeiBb6g6m-nCits-kDq6FUoOgjFLHgLQSroCNJXRCmie3K-wzSN5FhFedSA&userId=42, Path=/ws/chat
2025-05-12 23:01:51.851  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc1OSwidXNlcklkIjo0Mn0.ZxatG30TRR8ecypZ-mwX_uS8wkNaeiBb6g6m-nCits-kDq6FUoOgjFLHgLQSroCNJXRCmie3K-wzSN5FhFedSA&userId=42
2025-05-12 23:01:51.851 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc1OSwidXNlcklkIjo0Mn0.ZxatG30TRR8ecypZ-mwX_uS8wkNaeiBb6g6m-nCits-kDq6FUoOgjFLHgLQSroCNJXRCmie3K-wzSN5FhFedSA
2025-05-12 23:01:51.851 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 42
2025-05-12 23:01:51.851  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=42, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc1OSwidXNlcklkIjo0Mn0.ZxatG30TRR8ecypZ-mwX_uS8wkNaeiBb6g6m-nCits-kDq6FUoOgjFLHgLQSroCNJXRCmie3K-wzSN5FhFedSA}
2025-05-12 23:01:51.851  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=42
2025-05-12 23:01:51.851  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 23:01:51.851  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 42
2025-05-12 23:01:51.851 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 23:01:51.852 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747666759, userId=42}
2025-05-12 23:01:51.852 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 42
2025-05-12 23:01:51.852 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 42
2025-05-12 23:01:51.852  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 42
2025-05-12 23:01:51.852 ERROR 55640 --- [http-nio-8080-exec-10] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 23:01:51.852  WARN 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 23:01:51.854  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 42
2025-05-12 23:01:51.855  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: f01e6d7b-a784-3492-6162-d3734e0ff569, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc1OSwidXNlcklkIjo0Mn0.ZxatG30TRR8ecypZ-mwX_uS8wkNaeiBb6g6m-nCits-kDq6FUoOgjFLHgLQSroCNJXRCmie3K-wzSN5FhFedSA&userId=42
2025-05-12 23:01:51.855  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 42
2025-05-12 23:01:51.855  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 用户 42 的WebSocket连接已建立
2025-05-12 23:01:51.855  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 用户 42 已注册WebSocket会话: f01e6d7b-a784-3492-6162-d3734e0ff569
2025-05-12 23:01:51.856  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc1OSwidXNlcklkIjo0Mn0.ZxatG30TRR8ecypZ-mwX_uS8wkNaeiBb6g6m-nCits-kDq6FUoOgjFLHgLQSroCNJXRCmie3K-wzSN5FhFedSA","userId":42}
2025-05-12 23:01:51.856  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:01:51.857 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:01:52.060 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:01:52.061 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:01:52.061 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:01:52.864  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:01:52.865  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:01:52.865 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:02:01.871  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:02:01.872  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:02:01.872 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:02:11.864  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:02:11.865  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:02:11.866 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:02:12.008 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:02:12.009 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:02:12.009 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:02:21.860  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:02:21.861  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:02:21.861 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:02:21.861  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:02:21.862  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:02:21.862 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:02:31.860  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:02:31.861  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:02:31.862 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:02:31.989 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:02:31.990 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:02:31.990 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:02:41.868  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:02:41.869  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:02:41.869 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:02:51.865  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:02:51.865  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:02:51.865 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:02:51.866  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:02:51.866  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:02:51.866 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:02:51.976 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:02:51.977 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:02:51.977 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:03:01.871  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:03:01.872  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:03:01.872 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:03:11.871  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:03:11.872  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:03:11.872 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:03:11.980 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:03:11.980 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:03:11.981 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:03:21.859  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:03:21.859  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:03:21.859 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:03:21.860  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:03:21.860  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:03:21.860 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:03:31.861  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:03:31.862  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:03:31.862 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:03:31.991 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:03:31.991 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:03:31.991 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:03:41.860  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:03:41.861  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:03:41.862 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:03:51.863  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:03:51.864  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:03:51.864 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:03:51.864  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:03:51.866  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:03:51.866 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:03:51.991 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:03:51.991 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:03:51.991 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:04:01.867  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:04:01.868  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:04:01.868 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:04:11.867  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:04:11.868  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:04:11.868 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:04:11.979 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:04:11.979 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:04:11.979 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:04:21.862  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:04:21.863  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:04:21.864 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:04:21.864  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:04:21.864  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:04:21.864 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:04:31.865  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:04:31.866  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:04:31.866 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:04:32.004 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:04:32.005 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:04:32.005 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:04:41.857  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:04:41.858  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:04:41.860 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:04:51.861  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:04:51.861  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:04:51.861 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:04:51.863  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:04:51.863  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:04:51.863 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:04:51.990 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:04:51.990 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:04:51.990 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:05:01.862  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:05:01.863  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:05:01.863 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:05:11.870  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:05:11.871  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:05:11.871 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:05:11.982 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:05:11.982 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:05:11.982 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:05:21.862  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:05:21.863  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:05:21.863 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:05:21.863  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:05:21.864  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:05:21.864 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:05:31.857  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:05:31.858  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:05:31.858 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:05:31.984 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:05:31.985 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:05:31.985 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:05:41.863  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:05:41.864  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:05:41.864 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:05:51.859  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:05:51.860  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:05:51.860 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:05:51.860  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:05:51.862  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:05:51.862 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:05:51.988 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:05:51.988 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:05:51.988 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:06:01.862  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:06:01.863  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:06:01.863 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:06:12.022  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:06:12.023  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:06:12.023 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:06:22.048  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:06:22.048  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:06:22.049 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:06:22.053  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:06:22.054  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:06:22.054 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:06:32.034  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:06:32.034  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:06:32.034 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:06:42.032  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:06:42.033  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:06:42.034 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:06:51.224 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/17
2025-05-12 23:06:51.224 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:06:51.226 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:06:51.236 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/17/comments
2025-05-12 23:06:51.236 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:06:51.236 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:06:51.239  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.AdminContentServiceImpl     : 未查询到评论数据
2025-05-12 23:06:52.025  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:06:52.025  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:06:52.025 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:06:52.027  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:06:52.028  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:06:52.028 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:07:02.033  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:07:02.034  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:07:02.034 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:08:03.032  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:08:03.034  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:08:03.034 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:08:03.035  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:08:03.035  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:08:03.035 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:09:04.028  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:09:04.029  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:09:04.029 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:09:04.031  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:09:04.032  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:09:04.032 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:09:48.997  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:09:49.004  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:09:49.004 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:09:49.005  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:09:49.005  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:09:49.005 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:09:49.009 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:09:49.010 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:09:49.010 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:09:52.033  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:09:52.034  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:09:52.034 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:09:52.034  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:09:52.036  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:09:52.036 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:10:01.859  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:10:01.860  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:10:01.860 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:10:04.998 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/current
2025-05-12 23:10:05.000 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:10:05.000 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:10:05.000 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/17
2025-05-12 23:10:05.001 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:10:05.002 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:10:05.005 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/17/comments
2025-05-12 23:10:05.005 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:10:05.006 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:10:05.009  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.AdminContentServiceImpl     : 未查询到评论数据
2025-05-12 23:10:08.001 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts
2025-05-12 23:10:08.001 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/stats
2025-05-12 23:10:08.002 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:10:08.002 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:10:08.002 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:10:08.002 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:10:12.036  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:10:12.037  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:10:12.037 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:10:14.678 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/current
2025-05-12 23:10:14.678 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:10:14.678 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:10:14.680 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/stats
2025-05-12 23:10:14.680 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts
2025-05-12 23:10:14.681 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:10:14.681 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:10:14.681 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:10:14.681 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:10:17.017 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/1
2025-05-12 23:10:17.017 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/1/comments
2025-05-12 23:10:17.017 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:10:17.017 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:10:17.017 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:10:17.017 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:10:17.019  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.AdminContentServiceImpl     : 未查询到评论数据
2025-05-12 23:10:22.023  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:10:22.024  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:10:22.024 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:10:22.025  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:10:22.025  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:10:22.026 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:10:32.032  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:10:32.033  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:10:32.033 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:10:41.867  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:10:41.868  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:10:41.868 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:10:51.862  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:10:51.863  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:10:51.863 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:10:51.863  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:10:51.864  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:10:51.864 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:10:51.990 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:10:51.990 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:10:51.990 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:11:01.871  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:11:01.872  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:11:01.872 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:11:11.863  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:11:11.864  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:11:11.865 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:11:11.992 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:11:11.993 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:11:11.993 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:11:21.865  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:11:21.865  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:11:21.865 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:11:21.865  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:11:21.866  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:11:21.866 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:11:22.170 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/1
2025-05-12 23:11:22.170 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:11:22.170 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:11:22.174 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/1/comments
2025-05-12 23:11:22.174 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:11:22.174 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:11:22.177  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.impl.AdminContentServiceImpl     : 未查询到评论数据
2025-05-12 23:11:31.866  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:11:31.868  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:11:31.868 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:11:31.979 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:11:31.980 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:11:31.980 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:11:34.853 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/1
2025-05-12 23:11:34.853 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:11:34.854 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:11:34.855 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/1/comments
2025-05-12 23:11:34.855 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:11:34.855 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:11:34.858  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.AdminContentServiceImpl     : 未查询到评论数据
2025-05-12 23:11:41.859  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:11:41.860  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:11:41.861 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:11:51.860  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:11:51.861  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:11:51.861 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:11:51.862  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:11:51.862  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:11:51.863 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:11:51.991 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:11:51.991 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:11:51.991 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:12:01.870  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:12:01.871  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:12:01.871 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:12:11.858  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:12:11.859  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:12:11.859 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:12:11.986 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:12:11.986 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:12:11.986 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:12:21.863  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:12:21.864  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:12:21.864 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:12:21.864  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:12:21.865  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:12:21.865 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:12:31.865  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:12:31.866  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:12:31.866 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:12:31.978 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:12:31.978 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:12:31.978 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:12:42.026  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:12:42.027  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:12:42.028 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:12:44.998 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/current
2025-05-12 23:12:44.998 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:12:44.998 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:12:44.999 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/17
2025-05-12 23:12:44.999 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts/17/comments
2025-05-12 23:12:44.999 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:12:45.000 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:12:45.000 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:12:45.000 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:12:45.002  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.impl.AdminContentServiceImpl     : 未查询到评论数据
2025-05-12 23:12:52.034  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:12:52.035  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:12:52.035 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:12:52.037  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:12:52.037  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:12:52.038 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:13:01.868  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:13:01.868  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:13:01.869 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:13:09.204 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:13:09.204 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 23:13:09.205 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.205 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.205 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.205 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.206 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:13:09.206 DEBUG 55640 --- [http-nio-8080-exec-5] com.soical.server.util.UserUtils         : principal是Long类型: 46
2025-05-12 23:13:09.206  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 46
2025-05-12 23:13:09.211  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.impl.ConversationServiceImpl     : 查询到 7 个会话
2025-05-12 23:13:09.242 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/43
2025-05-12 23:13:09.243 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.243 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.250 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/52
2025-05-12 23:13:09.250 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.250 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.259 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 23:13:09.259  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc0NywidXNlcklkIjo0Nn0.-95_6UKZm33DEEOJgiO5LVHNS-dNOiDVbDNH0tejZt4UmUyl9LoZoa-lXGM-5u8bmPQdzlPbfOpvB0H7_aIFrw&userId=46, Path=/ws/chat
2025-05-12 23:13:09.259  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc0NywidXNlcklkIjo0Nn0.-95_6UKZm33DEEOJgiO5LVHNS-dNOiDVbDNH0tejZt4UmUyl9LoZoa-lXGM-5u8bmPQdzlPbfOpvB0H7_aIFrw&userId=46
2025-05-12 23:13:09.259 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc0NywidXNlcklkIjo0Nn0.-95_6UKZm33DEEOJgiO5LVHNS-dNOiDVbDNH0tejZt4UmUyl9LoZoa-lXGM-5u8bmPQdzlPbfOpvB0H7_aIFrw
2025-05-12 23:13:09.259 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 46
2025-05-12 23:13:09.259  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=46, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc0NywidXNlcklkIjo0Nn0.-95_6UKZm33DEEOJgiO5LVHNS-dNOiDVbDNH0tejZt4UmUyl9LoZoa-lXGM-5u8bmPQdzlPbfOpvB0H7_aIFrw}
2025-05-12 23:13:09.260  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=46
2025-05-12 23:13:09.260  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 23:13:09.260  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 46
2025-05-12 23:13:09.260 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 23:13:09.260 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747666747, userId=46}
2025-05-12 23:13:09.260 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 46
2025-05-12 23:13:09.260 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 46
2025-05-12 23:13:09.260  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 46
2025-05-12 23:13:09.260 ERROR 55640 --- [http-nio-8080-exec-1] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 23:13:09.260  WARN 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 23:13:09.261  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 46
2025-05-12 23:13:09.262  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: 17709cd1-a708-964b-acdc-f81789393797, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc0NywidXNlcklkIjo0Nn0.-95_6UKZm33DEEOJgiO5LVHNS-dNOiDVbDNH0tejZt4UmUyl9LoZoa-lXGM-5u8bmPQdzlPbfOpvB0H7_aIFrw&userId=46
2025-05-12 23:13:09.262  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 46
2025-05-12 23:13:09.262  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 用户 46 的WebSocket连接已建立
2025-05-12 23:13:09.262  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 用户 46 已注册WebSocket会话: 17709cd1-a708-964b-acdc-f81789393797
2025-05-12 23:13:09.263  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2Njc0NywidXNlcklkIjo0Nn0.-95_6UKZm33DEEOJgiO5LVHNS-dNOiDVbDNH0tejZt4UmUyl9LoZoa-lXGM-5u8bmPQdzlPbfOpvB0H7_aIFrw","userId":46}
2025-05-12 23:13:09.264  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:13:09.264 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:13:09.267 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 23:13:09.267 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/43
2025-05-12 23:13:09.267 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.267 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/51
2025-05-12 23:13:09.267 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.267 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.267 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.267 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.268 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.268  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 42 在线状态: 在线
2025-05-12 23:13:09.268  INFO 55640 --- [http-nio-8080-exec-8] c.s.server.controller.UserController     : 用户 43 在线状态: 离线
2025-05-12 23:13:09.268  INFO 55640 --- [http-nio-8080-exec-7] c.s.server.controller.UserController     : 用户 51 在线状态: 离线
2025-05-12 23:13:09.268 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/47
2025-05-12 23:13:09.269 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.269 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.269  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.controller.UserController     : 用户 47 在线状态: 离线
2025-05-12 23:13:09.271 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/45
2025-05-12 23:13:09.271 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.272 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.273  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.UserController     : 用户 45 在线状态: 离线
2025-05-12 23:13:09.272 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/52
2025-05-12 23:13:09.273 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.274 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.274 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/49
2025-05-12 23:13:09.274  INFO 55640 --- [http-nio-8080-exec-9] c.s.server.controller.UserController     : 用户 52 在线状态: 离线
2025-05-12 23:13:09.274 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.274 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.275  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.UserController     : 用户 49 在线状态: 离线
2025-05-12 23:13:09.476 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:13:09.476 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.477 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.477 DEBUG 55640 --- [http-nio-8080-exec-4] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:13:09.477 DEBUG 55640 --- [http-nio-8080-exec-4] com.soical.server.util.UserUtils         : principal是Long类型: 46
2025-05-12 23:13:09.477  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 46
2025-05-12 23:13:09.479  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.impl.ConversationServiceImpl     : 查询到 7 个会话
2025-05-12 23:13:09.500  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:13:09.501  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:13:09.501 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:13:09.526 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/43
2025-05-12 23:13:09.526 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.527 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.538 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/52
2025-05-12 23:13:09.539 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.539 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.549 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 23:13:09.549 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.551 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.552 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/43
2025-05-12 23:13:09.552  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 42 在线状态: 在线
2025-05-12 23:13:09.552 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.555 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/51
2025-05-12 23:13:09.555 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/47
2025-05-12 23:13:09.555 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.555 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.556 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.556 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.556 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.556 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/45
2025-05-12 23:13:09.556 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.556  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 51 在线状态: 离线
2025-05-12 23:13:09.556 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.556 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/49
2025-05-12 23:13:09.556  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.controller.UserController     : 用户 47 在线状态: 离线
2025-05-12 23:13:09.556 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/52
2025-05-12 23:13:09.556 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.556 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.556 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:09.557  INFO 55640 --- [http-nio-8080-exec-6] c.s.server.controller.UserController     : 用户 45 在线状态: 离线
2025-05-12 23:13:09.557 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:09.557  INFO 55640 --- [http-nio-8080-exec-8] c.s.server.controller.UserController     : 用户 43 在线状态: 离线
2025-05-12 23:13:09.558  INFO 55640 --- [http-nio-8080-exec-5] c.s.server.controller.UserController     : 用户 52 在线状态: 离线
2025-05-12 23:13:09.557  INFO 55640 --- [http-nio-8080-exec-9] c.s.server.controller.UserController     : 用户 49 在线状态: 离线
2025-05-12 23:13:10.268  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:13:10.269  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:13:10.269 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:13:10.778 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 23:13:10.778 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:10.778 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:10.789 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 23:13:10.789 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:10.789 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:10.789 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 23:13:10.790 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1938227981 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] for JDBC transaction
2025-05-12 23:13:10.790 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1938227981 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] to manual commit
2025-05-12 23:13:10.791 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 23:13:10.792 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1938227981 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc]
2025-05-12 23:13:10.792 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1938227981 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] after transaction
2025-05-12 23:13:10.800 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 23:13:10.800 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:10.801 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:10.813 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 23:13:10.813 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 23:13:10.813 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:10.813 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:10.814 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:10.814 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:10.822 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 23:13:10.822 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:10.822 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:10.823 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 23:13:10.823 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@973493506 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] for JDBC transaction
2025-05-12 23:13:10.823 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@973493506 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] to manual commit
2025-05-12 23:13:10.825 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 23:13:10.825 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@973493506 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc]
2025-05-12 23:13:10.825 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@973493506 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] after transaction
2025-05-12 23:13:10.825 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 23:13:10.825 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@300956732 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] for JDBC transaction
2025-05-12 23:13:10.826 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@300956732 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] to manual commit
2025-05-12 23:13:10.827 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 23:13:10.827 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@300956732 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc]
2025-05-12 23:13:10.827 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@300956732 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] after transaction
2025-05-12 23:13:10.827 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 23:13:10.827 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1875735561 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] for JDBC transaction
2025-05-12 23:13:10.827 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1875735561 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] to manual commit
2025-05-12 23:13:10.828 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 23:13:10.828 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1875735561 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc]
2025-05-12 23:13:10.829 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1875735561 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] after transaction
2025-05-12 23:13:10.835 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 23:13:10.835 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:10.835 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:12.025  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:13:12.026  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:13:12.026 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:13:12.942  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 用户 46 的WebSocket连接已关闭: CloseStatus[code=1000, reason=User logout]
2025-05-12 23:13:22.035  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:13:22.035  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:13:22.035 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:13:22.036  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:13:22.036  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:13:22.036 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:13:31.860  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:13:31.861  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:13:31.861 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:13:31.990 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:13:31.990 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:13:31.991 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:13:37.189 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/auth/login
2025-05-12 23:13:37.190  INFO 55640 --- [http-nio-8080-exec-9] c.s.server.controller.AuthController     : 开始处理用户登录请求: user5
2025-05-12 23:13:37.259  INFO 55640 --- [http-nio-8080-exec-9] c.s.server.controller.AuthController     : 用户登录成功: user5
2025-05-12 23:13:37.266 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 23:13:37.266 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:37.266 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:37.266 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 23:13:37.267 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1251220901 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] for JDBC transaction
2025-05-12 23:13:37.267 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1251220901 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] to manual commit
2025-05-12 23:13:37.267 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 23:13:37.267 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1251220901 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc]
2025-05-12 23:13:37.268 DEBUG 55640 --- [http-nio-8080-exec-2] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1251220901 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] after transaction
2025-05-12 23:13:37.279 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 23:13:37.280 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:37.280 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/basic
2025-05-12 23:13:37.280 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:37.280 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:37.280 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:37.281 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.updateUserBasicInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-12 23:13:37.282 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@317587856 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] for JDBC transaction
2025-05-12 23:13:37.282 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@317587856 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] to manual commit
2025-05-12 23:13:37.285 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:37.288 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 23:13:37.288 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@317587856 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78]
2025-05-12 23:13:37.288 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@317587856 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] after transaction
2025-05-12 23:13:37.303 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /ws/chat
2025-05-12 23:13:37.303  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.w.WebSocketAuthInterceptor         : WebSocket握手请求: URI=http://localhost:8080/ws/chat?token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NzYxNywidXNlcklkIjo0Nn0.tK5AxrA1Riu_IXRDSnnFeL2ITORte9OnimqkpwlI4M7UBKFqKejlYW9n8dlagRcYvHMkOHA6BJXKs6aqXaT_Ow&userId=46, Path=/ws/chat
2025-05-12 23:13:37.303  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.w.WebSocketAuthInterceptor         : WebSocket连接参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NzYxNywidXNlcklkIjo0Nn0.tK5AxrA1Riu_IXRDSnnFeL2ITORte9OnimqkpwlI4M7UBKFqKejlYW9n8dlagRcYvHMkOHA6BJXKs6aqXaT_Ow&userId=46
2025-05-12 23:13:37.303 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: token = eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NzYxNywidXNlcklkIjo0Nn0.tK5AxrA1Riu_IXRDSnnFeL2ITORte9OnimqkpwlI4M7UBKFqKejlYW9n8dlagRcYvHMkOHA6BJXKs6aqXaT_Ow
2025-05-12 23:13:37.303 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.w.WebSocketAuthInterceptor         : 解析查询参数: userId = 46
2025-05-12 23:13:37.303  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.w.WebSocketAuthInterceptor         : 解析出的URL参数: {userId=46, token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NzYxNywidXNlcklkIjo0Nn0.tK5AxrA1Riu_IXRDSnnFeL2ITORte9OnimqkpwlI4M7UBKFqKejlYW9n8dlagRcYvHMkOHA6BJXKs6aqXaT_Ow}
2025-05-12 23:13:37.303  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中获取: token=eyJhbGciOiJIUzUxMiJ9..., userId=46
2025-05-12 23:13:37.303  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.w.WebSocketAuthInterceptor         : 解码后的token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 23:13:37.303  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.w.WebSocketAuthInterceptor         : 从URL参数中提取的userId: 46
2025-05-12 23:13:37.303 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.service.impl.TokenServiceImpl      : 开始解析token: eyJhbGciOiJIUzUxMiJ9...
2025-05-12 23:13:37.304 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.service.impl.TokenServiceImpl      : 解析token成功, claims: {type=user, exp=1747667617, userId=46}
2025-05-12 23:13:37.304 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.service.impl.TokenServiceImpl      : 从token的claims中找到userId字段, 类型: java.lang.Integer, 值: 46
2025-05-12 23:13:37.304 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.service.impl.TokenServiceImpl      : 从Integer转换为Long: 46
2025-05-12 23:13:37.304  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.w.WebSocketAuthInterceptor         : 从token中提取的用户ID: 46
2025-05-12 23:13:37.304 ERROR 55640 --- [http-nio-8080-exec-3] c.s.s.service.impl.TokenServiceImpl      : Token中subject为null
2025-05-12 23:13:37.304  WARN 55640 --- [http-nio-8080-exec-3] c.s.s.w.WebSocketAuthInterceptor         : TokenService验证token失败，尝试使用JwtUtil验证
2025-05-12 23:13:37.305  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.w.WebSocketAuthInterceptor         : WebSocket认证成功，用户ID: 46
2025-05-12 23:13:37.306  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : WebSocket连接已建立: bed83431-7ce2-ab77-df34-e3d44abf85a6, 查询参数: token=eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NzYxNywidXNlcklkIjo0Nn0.tK5AxrA1Riu_IXRDSnnFeL2ITORte9OnimqkpwlI4M7UBKFqKejlYW9n8dlagRcYvHMkOHA6BJXKs6aqXaT_Ow&userId=46
2025-05-12 23:13:37.306  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 会话属性: userId = 46
2025-05-12 23:13:37.306  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 用户 46 的WebSocket连接已建立
2025-05-12 23:13:37.306  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 用户 46 已注册WebSocket会话: bed83431-7ce2-ab77-df34-e3d44abf85a6
2025-05-12 23:13:37.307  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"AUTH","token":"eyJhbGciOiJIUzUxMiJ9.eyJ0eXBlIjoidXNlciIsImV4cCI6MTc0NzY2NzYxNywidXNlcklkIjo0Nn0.tK5AxrA1Riu_IXRDSnnFeL2ITORte9OnimqkpwlI4M7UBKFqKejlYW9n8dlagRcYvHMkOHA6BJXKs6aqXaT_Ow","userId":46}
2025-05-12 23:13:37.308  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:13:37.308 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:13:37.365 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 23:13:37.365 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:37.366 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:37.366  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.controller.UserMatchController     : 用户 46 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 23:13:37.466 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 23:13:37.467 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:37.467 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:37.614 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/match/recommend
2025-05-12 23:13:37.615 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:37.615 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:37.615  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.controller.UserMatchController     : 用户 46 请求推荐列表，条件: gender=null, ageMin=null, ageMax=null, location=null, interests=null, limit=30
2025-05-12 23:13:37.715 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/online-status
2025-05-12 23:13:37.716 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:37.716 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:38.316  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:13:38.317  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:13:38.317 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:13:39.383 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 23:13:39.384 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:39.384 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:39.391 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/current
2025-05-12 23:13:39.391 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:39.391 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:39.392 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserServiceImpl.getUserInfo]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 23:13:39.392 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@691204387 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] for JDBC transaction
2025-05-12 23:13:39.392 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@691204387 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] to manual commit
2025-05-12 23:13:39.393 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 23:13:39.393 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@691204387 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc]
2025-05-12 23:13:39.393 DEBUG 55640 --- [http-nio-8080-exec-6] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@691204387 wrapping com.mysql.cj.jdbc.ConnectionImpl@77838ddc] after transaction
2025-05-12 23:13:39.401 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/verification/status
2025-05-12 23:13:39.401 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 23:13:39.401 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:39.401 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:39.401 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:39.401 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:39.408 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 23:13:39.408 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:39.408 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:39.420 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/stats
2025-05-12 23:13:39.420 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:39.420 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:39.421 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.countUserPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 23:13:39.421 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1558720926 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] for JDBC transaction
2025-05-12 23:13:39.421 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1558720926 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] to manual commit
2025-05-12 23:13:39.423 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 23:13:39.423 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1558720926 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78]
2025-05-12 23:13:39.424 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1558720926 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] after transaction
2025-05-12 23:13:39.424 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowerCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 23:13:39.424 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@606617910 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] for JDBC transaction
2025-05-12 23:13:39.424 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@606617910 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] to manual commit
2025-05-12 23:13:39.426 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 23:13:39.426 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@606617910 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78]
2025-05-12 23:13:39.426 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@606617910 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] after transaction
2025-05-12 23:13:39.427 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.UserFollowServiceImpl.getFollowingCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 23:13:39.427 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1244431151 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] for JDBC transaction
2025-05-12 23:13:39.427 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1244431151 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] to manual commit
2025-05-12 23:13:39.428 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 23:13:39.428 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1244431151 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78]
2025-05-12 23:13:39.428 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1244431151 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] after transaction
2025-05-12 23:13:39.437 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/frequency/stats
2025-05-12 23:13:39.437 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:39.437 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:42.025  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:13:42.026  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:13:42.026 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:13:44.454 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile
2025-05-12 23:13:44.454 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:44.455 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:47.315  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:13:47.316  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:13:47.316 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:13:52.028  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:13:52.028  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:13:52.028 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:13:52.029  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:13:52.029  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:13:52.029 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:13:54.783 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/reports/reasons
2025-05-12 23:13:54.783 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:54.783 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:54.785 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/post/list/community
2025-05-12 23:13:54.785 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:13:54.786 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:13:54.786 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Creating new transaction with name [com.soical.server.service.impl.PostServiceImpl.getCommunityPosts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-12 23:13:54.786 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Acquired Connection [HikariProxyConnection@1148832116 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] for JDBC transaction
2025-05-12 23:13:54.787 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Switching JDBC Connection [HikariProxyConnection@1148832116 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] to manual commit
2025-05-12 23:13:54.794 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.797 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.799 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.803 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.805 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.809 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.811 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.814 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.817 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.820 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.823 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.827 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.830 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.832 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.834 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.836 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.837 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.838 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.839 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.841 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.842 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.843 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.844 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.845 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.846 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.847 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.848 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.850 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Participating in existing transaction
2025-05-12 23:13:54.861 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Initiating transaction commit
2025-05-12 23:13:54.861 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Committing JDBC transaction on Connection [HikariProxyConnection@1148832116 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78]
2025-05-12 23:13:54.861 DEBUG 55640 --- [http-nio-8080-exec-10] o.s.j.d.DataSourceTransactionManager     : Releasing JDBC Connection [HikariProxyConnection@1148832116 wrapping com.mysql.cj.jdbc.ConnectionImpl@5fb24b78] after transaction
2025-05-12 23:13:57.314  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:13:57.315  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:13:57.315 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:14:02.032  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:14:02.034  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:14:02.035 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:14:04.743 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/ai
2025-05-12 23:14:04.743 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/conversations
2025-05-12 23:14:04.744 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:14:04.744 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:14:04.744 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:14:04.745 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : 当前用户principal类型: java.lang.Long
2025-05-12 23:14:04.746 DEBUG 55640 --- [http-nio-8080-exec-6] com.soical.server.util.UserUtils         : principal是Long类型: 46
2025-05-12 23:14:04.746 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:14:04.746  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ConversationServiceImpl     : 查询用户会话列表: 46
2025-05-12 23:14:04.748  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.impl.ConversationServiceImpl     : 查询到 7 个会话
2025-05-12 23:14:04.757  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:14:04.758  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:14:04.758 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:14:04.779 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/43
2025-05-12 23:14:04.779 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:14:04.779 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:14:04.790 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/profile/52
2025-05-12 23:14:04.790 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:14:04.790 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:14:04.807 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/42
2025-05-12 23:14:04.808 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:14:04.808 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:14:04.809 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/43
2025-05-12 23:14:04.809  INFO 55640 --- [http-nio-8080-exec-7] c.s.server.controller.UserController     : 用户 42 在线状态: 在线
2025-05-12 23:14:04.809 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:14:04.809 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:14:04.810  INFO 55640 --- [http-nio-8080-exec-4] c.s.server.controller.UserController     : 用户 43 在线状态: 离线
2025-05-12 23:14:04.812 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/51
2025-05-12 23:14:04.812 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/47
2025-05-12 23:14:04.812 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:14:04.812 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:14:04.812 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:14:04.812 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:14:04.813  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 51 在线状态: 离线
2025-05-12 23:14:04.813  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.controller.UserController     : 用户 47 在线状态: 离线
2025-05-12 23:14:04.814 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/45
2025-05-12 23:14:04.814 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/49
2025-05-12 23:14:04.814 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/user/status/52
2025-05-12 23:14:04.814 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:14:04.814 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:14:04.814 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:14:04.814 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 46
2025-05-12 23:14:04.814 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:14:04.814 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 46
2025-05-12 23:14:04.815  INFO 55640 --- [http-nio-8080-exec-3] c.s.server.controller.UserController     : 用户 52 在线状态: 离线
2025-05-12 23:14:04.816  INFO 55640 --- [http-nio-8080-exec-10] c.s.server.controller.UserController     : 用户 49 在线状态: 离线
2025-05-12 23:14:04.816  INFO 55640 --- [http-nio-8080-exec-8] c.s.server.controller.UserController     : 用户 45 在线状态: 离线
2025-05-12 23:14:07.310  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:14:07.310  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:14:07.310 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:14:07.310  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:14:07.311  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:14:07.311 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:14:12.034  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:14:12.035  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:14:12.035 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:14:17.313  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:14:17.314  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:14:17.314 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:14:22.032  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:14:22.033  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:14:22.033 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:14:22.033  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:14:22.034  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:14:22.034 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:14:28.034  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:14:28.035  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:14:28.035 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:14:32.028  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:14:32.029  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:14:32.029 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:14:38.026  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:14:38.027  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:14:38.027 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:14:38.027  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:14:38.028  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:14:38.028 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:14:42.067  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:14:42.068  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:14:42.068 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:14:52.039  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:14:52.039  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:14:52.039 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:14:52.041  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:14:52.042  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:14:52.042 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:14:59.683  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:14:59.684  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:14:59.684 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:14:59.684  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:14:59.685  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:14:59.685 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:15:02.023  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:15:02.024  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:15:02.024 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:15:08.093  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:15:08.093  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:15:08.093 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:15:08.111  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:15:08.113  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:15:08.113 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:15:12.067  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:15:12.067  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:15:12.068 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:15:22.104  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:15:22.105  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:15:22.105 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:15:22.108  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:15:22.109  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:15:22.109 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:15:24.663  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:15:24.663  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:15:24.663 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:15:38.203  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:15:38.203  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:15:38.204 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:15:46.598  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:15:46.600  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:15:46.601 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:15:46.813  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:15:46.815  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:15:46.816 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:15:46.872 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:15:46.873 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:15:46.873 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:15:51.869  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:15:51.869  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:15:51.869 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:15:51.869  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:15:51.870  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:15:51.870 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:15:51.994 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:15:51.995 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:15:51.995 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:15:58.167  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:15:58.174  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:15:58.175 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:16:01.873  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:16:01.876  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:16:01.878 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:16:07.817  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:16:07.818  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:16:07.818 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:16:07.818  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:16:07.819  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:16:07.819 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:16:12.032  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:16:12.033  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:16:12.033 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:16:18.028  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:16:18.029  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:16:18.029 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:16:22.030  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:16:22.031  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:16:22.031 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:16:22.047  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:16:22.048  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:16:22.048 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:16:28.032  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:16:28.033  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:16:28.033 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:16:32.028  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:16:32.029  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:16:32.030 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:16:32.570 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/login
2025-05-12 23:16:32.643 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/current
2025-05-12 23:16:32.644 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:16:32.644 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:16:32.781 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/users
2025-05-12 23:16:32.782 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:16:32.782 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:16:32.783 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/user-growth
2025-05-12 23:16:32.784 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:16:32.784 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:16:32.785 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/user-gender
2025-05-12 23:16:32.785 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:16:32.785 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/system
2025-05-12 23:16:32.785 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/match-trend
2025-05-12 23:16:32.785 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/content-trend
2025-05-12 23:16:32.785 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:16:32.786 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:16:32.787 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:16:32.787 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:16:32.788 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:16:32.787 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:16:32.809 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:16:32.925 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/content
2025-05-12 23:16:32.925 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:16:32.925 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:16:32.948 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/statistics/match-stats
2025-05-12 23:16:32.948 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:16:32.948 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:16:38.026  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:16:38.026  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:16:38.026 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:16:38.027  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:16:38.028  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:16:38.028 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:16:42.034  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:16:42.035  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:16:42.035 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:16:48.026  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:16:48.027  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:16:48.028 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:16:52.036  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:16:52.037  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:16:52.038 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:16:52.038  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:16:52.039  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:16:52.039 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:16:58.037  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:16:58.038  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:16:58.038 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:17:02.027  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:17:02.029  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:17:02.029 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:17:08.021  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:17:08.022  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:17:08.022 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:17:08.024  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:17:08.025  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:17:08.025 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:17:12.025  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:17:12.026  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:17:12.026 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:17:15.111 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/user/list
2025-05-12 23:17:15.111 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:17:15.112 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:17:21.865  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:17:21.866  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:17:21.866 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:17:21.866  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:17:21.867  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:17:21.867 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:17:32.028  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:17:32.029  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:17:32.029 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:17:33.560 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/posts
2025-05-12 23:17:33.561 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/content/stats
2025-05-12 23:17:33.561 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:17:33.561 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:17:33.561 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:17:33.562 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:17:41.864  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:17:41.866  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:17:41.867 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:17:51.872  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:17:51.872  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:17:51.872 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:17:51.872  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:17:51.872  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:17:51.872 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:17:51.985 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:17:51.986 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:17:51.986 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:18:01.865  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:18:01.866  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:18:01.866 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:18:04.029  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:18:04.030  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:18:04.030 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:18:04.040  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:18:04.040  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:18:04.040 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:18:11.858  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:18:11.859  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:18:11.859 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:18:13.693 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/admin/ai-config
2025-05-12 23:18:13.693 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/system/settings/security
2025-05-12 23:18:13.694 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:18:13.694 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 1
2025-05-12 23:18:13.695 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:18:13.695 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 管理员已认证，ID: 1
2025-05-12 23:18:22.035  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:18:22.036  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:18:22.036 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:18:22.036  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:18:22.038  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:18:22.038 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:18:32.035  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:18:32.036  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:18:32.036 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:18:42.023  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:18:42.024  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:18:42.024 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:18:52.039  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:18:52.039  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:18:52.039 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:18:52.040  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:18:52.042  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:18:52.042 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:19:02.041  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:19:02.042  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:19:02.042 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:19:04.036  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:19:04.036  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:19:04.037 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:19:04.037  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:19:04.037  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:19:04.038 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:19:12.033  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:19:12.033  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:19:12.033 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:19:22.035  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:19:22.035  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:19:22.036 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:19:22.036  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:19:22.037  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:19:22.037 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:19:36.900  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:19:36.901  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:19:36.901 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:19:36.943 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:19:36.943 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:19:36.944 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:19:42.066  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:19:42.067  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:19:42.067 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:19:52.023  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:19:52.023  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:19:52.023 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:19:52.023  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:19:52.024  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:19:52.025 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:20:02.023  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:20:02.025  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:20:02.025 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:20:04.028  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:20:04.028  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:20:04.028 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:20:04.028  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:20:04.029  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:20:04.029 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:20:12.035  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:20:12.036  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:20:12.036 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:20:22.034  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:20:22.034  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:20:22.034 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:20:22.035  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:20:22.035  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:20:22.035 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:20:32.036  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:20:32.037  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:20:32.037 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:21:04.027  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:21:04.029  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:21:04.029 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:21:04.029  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:21:04.030  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:21:04.030 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:21:04.031  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:21:04.031  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:21:04.032 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:21:04.032  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:21:04.032  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:21:04.032 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:22:04.031  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:22:04.032  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:22:04.032  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:22:04.033  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:22:04.033 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:22:04.033 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:22:04.033  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:22:04.033  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:22:04.033 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:22:04.037  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:22:04.038  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:22:04.038 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:23:04.033  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:23:04.033  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:23:04.034  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:23:04.034 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:23:04.034  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:23:04.035 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:23:04.036  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:23:04.037  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:23:04.037 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:23:04.039  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:23:04.039  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:23:04.040 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:23:23.663  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:23:23.663  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:23:23.664 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:23:23.669  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:23:23.669  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:23:23.669 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:23:23.699 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:23:23.699 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:23:23.700 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:23:32.034  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:23:32.035  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:23:32.036 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:23:42.237  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:23:42.238  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:23:42.238 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:23:52.030  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:23:52.030  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:23:52.130 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:23:52.130  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:23:52.131  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:23:52.131 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:24:02.036  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:24:02.037  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:24:02.037 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:24:04.035  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:24:04.036  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:24:04.036 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:24:04.038  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:24:04.038  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:24:04.038 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:24:12.135  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:24:12.136  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:24:12.136 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:24:22.030  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:24:22.031  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:24:22.031 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:24:22.031  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:24:22.032  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:24:22.032 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:24:32.024  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:24:32.025  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:24:32.025 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:25:04.033  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:25:04.033  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:25:04.034 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:25:04.037  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:25:04.037  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:25:04.037 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:25:04.990  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:25:04.991  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:25:04.991 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:25:05.130  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:25:05.131  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:25:05.132 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:25:22.093  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:25:22.094  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:25:22.094 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:25:22.098  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:25:22.098  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:25:22.099 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:25:22.161 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:25:22.161 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:25:22.161 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:25:32.033  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:25:32.034  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:25:32.034 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:25:42.219  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:25:42.219  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:25:42.222 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:25:52.096  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:25:52.097  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:25:52.097 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:25:52.099  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:25:52.100  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:25:52.100 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:26:02.043  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:26:02.044  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:26:02.044 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:26:04.045  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:26:04.045  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:26:04.046 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:26:04.079  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:26:04.080  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:26:04.080 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:26:12.026  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:26:12.026  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:26:12.026 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:26:22.030  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:26:22.030  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:26:22.030 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:26:22.032  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:26:22.033  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:26:22.033 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:27:04.035  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:27:04.036  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:27:04.036 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:27:04.036  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:27:04.036  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:27:04.037 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:27:04.053  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:27:04.053  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:27:04.053 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:27:04.062  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:27:04.062  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:27:04.063 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:28:04.030  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:28:04.030  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:28:04.031 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:28:04.031  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:28:04.031  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:28:04.031 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:28:04.032  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:28:04.033  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:28:04.033 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:28:04.034  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:28:04.035  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:28:04.036 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:29:04.022  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:29:04.023  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:29:04.023 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:29:04.025  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:29:04.025  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:29:04.025 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:29:04.031  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:29:04.031  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:29:04.031 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:29:04.033  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:29:04.034  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:29:04.034 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:29:16.263  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:29:16.265  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:29:16.265 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:29:16.283 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:29:16.284 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:29:16.284 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:29:22.035  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:29:22.036  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:29:22.037 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:29:22.037  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:29:22.038  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:29:22.038 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:29:32.034  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:29:32.035  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:29:32.036 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:29:42.035  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:29:42.036  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:29:42.036 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:29:52.023  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:29:52.023  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:29:52.024 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:29:52.025  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:29:52.026  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:29:52.026 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:30:02.035  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:30:02.035  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:30:02.035 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:30:04.027  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:30:04.028  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:30:04.028 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:30:04.030  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:30:04.031  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:30:04.031 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:30:12.026  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:30:12.027  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:30:12.027 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:31:00.321  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:31:00.321  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:31:00.321 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:31:00.321  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:31:00.323  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:31:00.323 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:31:00.344 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:31:00.345 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:31:00.345 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:31:02.033  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:31:02.034  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:31:02.034 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:31:04.035  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:31:04.035  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:31:04.036 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:31:04.036  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:31:04.037  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:31:04.037 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:31:12.040  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:31:12.041  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:31:12.041 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:31:22.034  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:31:22.035  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:31:22.035 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:31:22.036  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:31:22.038  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:31:22.038 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:31:32.034  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:31:32.034  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:31:32.035 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:31:42.034  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:31:42.035  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:31:42.035 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:31:52.022  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:31:52.023  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:31:52.023 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:31:52.024  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:31:52.025  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:31:52.025 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:32:04.028  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:32:04.028  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:32:04.029 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:32:04.030  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:32:04.030  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:32:04.030 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:32:04.032  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:32:04.033  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:32:04.033 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:33:04.023  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:33:04.024  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:33:04.024 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:33:04.025  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:33:04.026  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:33:04.026 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:33:04.029  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:33:04.030  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:33:04.030 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:33:04.031  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:33:04.031  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:33:04.031 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:34:04.034  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:34:04.035  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:34:04.035 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:34:04.037  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:34:04.037  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:34:04.037 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:34:04.039  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:34:04.039  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:34:04.039 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:34:04.041  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:34:04.042  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:34:04.042 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:35:04.036  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:35:04.036  INFO 55640 --- [http-nio-8080-exec-6] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:35:04.037 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:35:04.039  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:35:04.039  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:35:04.040 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:35:04.047  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:35:04.047  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:35:04.047 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:35:04.049  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:35:04.050  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:35:04.050 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:36:04.027  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:36:04.028  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:36:04.028 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:36:04.028  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:36:04.029  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:36:04.029 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:36:04.032  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:36:04.032  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:36:04.032  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:36:04.032 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:36:04.033  INFO 55640 --- [http-nio-8080-exec-8] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:36:04.033 DEBUG 55640 --- [http-nio-8080-exec-8] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:36:32.086  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:36:32.087  INFO 55640 --- [http-nio-8080-exec-9] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:36:32.087 DEBUG 55640 --- [http-nio-8080-exec-9] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:36:32.091  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:36:32.091  INFO 55640 --- [http-nio-8080-exec-1] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:36:32.092 DEBUG 55640 --- [http-nio-8080-exec-1] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:36:32.103 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 处理请求: /api/chat/messages/13
2025-05-12 23:36:32.104 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : JWT Token有效，用户/管理员ID: 42
2025-05-12 23:36:32.104 DEBUG 55640 --- [http-nio-8080-exec-6] c.s.s.config.JwtAuthenticationFilter     : 用户已认证，ID: 42
2025-05-12 23:36:42.033  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:36:42.034  INFO 55640 --- [http-nio-8080-exec-7] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:36:42.035 DEBUG 55640 --- [http-nio-8080-exec-7] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:36:52.034  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:36:52.034  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:36:52.034 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:36:52.035  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:36:52.035  INFO 55640 --- [http-nio-8080-exec-10] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:36:52.036 DEBUG 55640 --- [http-nio-8080-exec-10] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:37:02.028  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:37:02.028  INFO 55640 --- [http-nio-8080-exec-5] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:37:02.028 DEBUG 55640 --- [http-nio-8080-exec-5] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
2025-05-12 23:37:04.028  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"PING"}
2025-05-12 23:37:04.028  INFO 55640 --- [http-nio-8080-exec-4] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:37:04.029 DEBUG 55640 --- [http-nio-8080-exec-4] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:37:04.031  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[42,43,51,47,45,49,52]}
2025-05-12 23:37:04.032  INFO 55640 --- [http-nio-8080-exec-3] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 46 设置为在线状态
2025-05-12 23:37:04.032 DEBUG 55640 --- [http-nio-8080-exec-3] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户46活动状态
2025-05-12 23:37:12.026  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 接收到WebSocket消息: {"type":"GET_USER_STATUS","userIds":[46]}
2025-05-12 23:37:12.027  INFO 55640 --- [http-nio-8080-exec-2] c.s.s.s.i.UserOnlineStatusServiceImpl    : 用户 42 设置为在线状态
2025-05-12 23:37:12.027 DEBUG 55640 --- [http-nio-8080-exec-2] c.s.s.websocket.ChatWebSocketHandler     : 已更新用户42活动状态
